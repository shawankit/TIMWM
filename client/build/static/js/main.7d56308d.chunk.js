(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[0],{141:function(e,t,n){"use strict";var a=n(7),r=n(5),c=n(1),_=n(11),i=n(0),o=n(171),s=n(86),l=n(324),u=n(37),d=n(323),m=n(3),b=["index"],j=["title","editable","children","dataIndex","record","handleSave","items","handleTaxInput"],O=function(e){e.index;var t=Object(_.a)(e,b);return Object(m.jsx)("tr",Object(c.a)({},t))},p=function(e){e.title;var t=e.editable,n=e.children,a=e.dataIndex,r=e.record,i=e.handleSave,l=e.items,u=e.handleTaxInput,d=Object(_.a)(e,j),b=function(e,t){if(r.taxRow)u(Object(c.a)(Object(c.a)({},r),{},{total:t}));else{var n={};"categoryName"===a&&(n={categoryName:l[t].name,itemId:t,rate:l[t].rate,itemCode:l[t].code},void 0!=r.quantity&&(n.total=Math.round(parseFloat(n.rate)*parseFloat(r.quantity)*10)/10)),"quantity"==a&&void 0!=r.rate&&((n={quantity:t}).total=Math.round(parseFloat(r.rate)*parseFloat(t)*10)/10),i(Object(c.a)(Object(c.a)({},r),n))}},O=n;return(!("total"!=a||null===r||void 0===r||!r.taxRow||!t)||!!("total"!=a||null!==r&&void 0!==r&&r.taxRow)&&(t&&!r.taxRow))&&(O="Total Amount"!=r.categoryName&&"Taxable Value"!=r.categoryName?Object(m.jsx)(m.Fragment,{children:"categoryName"!==a?Object(m.jsx)(o.a,{className:"w-full",onChange:function(e){return b(0,e.target.value)},value:r[a]}):Object(m.jsx)(s.a,{placeholder:"Select Items",showSearch:!0,optionFilterProp:"children",showArrow:!1,value:null===r||void 0===r?void 0:r.itemId,onChange:function(e){return b(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},className:"w-full",children:Object.values(l).map((function(e,t){return Object(m.jsx)(Option,{value:e.id,children:e.name},t)}))},"itemId")}):Object(m.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:n})),Object(m.jsx)("td",Object(c.a)(Object(c.a)({},d),{},{children:O}))};t.a=function(e){var t=e.setTransactions,n=e.transactions,_=e.items,o=e.notEditable,s=e.invoiceDetails,b=e.setParentTaxableRows,j=Object(i.useState)([]),f=Object(r.a)(j,2),h=f[0],E=f[1],x=Object(i.useState)(0),v=Object(r.a)(x,2),D=v[0],y=v[1];Object(i.useEffect)((function(){E(n||[])}),[n]);var g=function(e,t){return Object(m.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})},M=[{title:"Item Name",dataIndex:"categoryName",width:"35%",editable:!o},{title:"Item Code",dataIndex:"itemCode",width:"15%"},{title:"Rate",dataIndex:"rate",width:"10%",render:g},{title:"Quantity",dataIndex:"quantity",width:"10%",editable:!o},{title:"Total",dataIndex:"total",width:"20%",render:g,editable:!o}];o||M.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,n){return!n.taxRow&&Object(m.jsx)(l.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var n=h.filter((function(t){return t.key!==e}));E(n),t(n)}(n.key)},children:Object(m.jsx)("a",{children:"Delete"})})}});var C=function(e){var n=Object(a.a)(h),r=n.findIndex((function(t){return e.key===t.key})),_=n[r];n.splice(r,1,Object(c.a)(Object(c.a)({},_),e)),t(n)},P=2,I={key:"taxRow"+P++,categoryName:"IGST",taxRow:!0,fieldName:"igst",total:s.igst||0},A={key:"taxRow"+P++,categoryName:"CGST",taxRow:!0,fieldName:"cgst",total:s.cgst||0},k={key:"taxRow"+P++,categoryName:"SGST",taxRow:!0,fieldName:"sgst",total:s.sgst||0},T={key:"taxRow"+P++,categoryName:"Cess",taxRow:!0,fieldName:"cess",total:s.cess||0},w={key:"taxRow"+P++,categoryName:"Round Off",taxRow:!0,fieldName:"roundOff",total:s.roundOff||0},R=Object(i.useState)([I,A,k,T,w]),N=Object(r.a)(R,2),S=N[0],B=N[1];Object(i.useEffect)((function(){B(Object(a.a)(S.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{total:s[e.fieldName]||0})}))))}),[s]);var L=function(e){var t=Object(a.a)(S),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(c.a)(Object(c.a)({},r),e)),B(t),b(t)},U={body:{row:O,cell:p}},K=M.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{onCell:function(t,n){var a={},r=["Total Amount","Taxable Value","IGST","CGST"];return r.includes(t.categoryName)&&"categoryName"==e.dataIndex&&(a={colSpan:4}),!r.includes(t.categoryName)||"quantity"!=e.dataIndex&&"rate"!=e.dataIndex&&"itemCode"!=e.dataIndex||(a={colSpan:0}),e.editable?Object(c.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:C,items:_,handleTaxInput:L},a):a}})})),W=h.reduce((function(e,t){return e+t.total}),0),F=S.reduce((function(e,t){return e+parseFloat(t.total||0)}),0),q={key:"taxRow"+P++,categoryName:"Taxable Value",total:o?s.taxableAmount:W,render:g,taxRow:!0},V={key:"taxRow"+P++,categoryName:"Total Amount",taxRow:!0,total:o?s.totalValue:W+F};return Object(m.jsxs)("div",{children:[o?null:Object(m.jsx)(u.a,{onClick:function(){var e={key:D,categoryName:"Select Item",rate:"0",quantity:"0",total:0};E([].concat(Object(a.a)(h),[e])),y(D+1)},type:"primary",style:{marginBottom:16},children:"Add a item"}),Object(m.jsx)(d.a,{components:U,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:[].concat(Object(a.a)(h),[q],Object(a.a)(S),[V]),columns:K,pagination:!1})]})}},143:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(119),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(144),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(49),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(87),_common_SelectField__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(145),_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(210),_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(211),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__),CustomerForm=function CustomerForm(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,page=_ref.page,initialData=_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__.a.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(initialData),_useState2=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],onChange=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(e,t){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e,t)))},_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState4=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),divisions=_useState4[0],setDivisions=_useState4[1],fetchCompanies=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_api__WEBPACK_IMPORTED_MODULE_10__.k)();case 2:n=e.sent,setDivisions(null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){fetchCompanies(),setFormData(data)}),[data]);var setRatesToData=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{rates:Object.values(e)}))},onSubmit=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var n,a,r,c,_;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{type:page}),console.log("finalData",n),!data){e.next=10;break}return e.next=5,Object(_api__WEBPACK_IMPORTED_MODULE_10__.s)(data.id,n);case 5:r=e.sent,console.log(r),1==(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated customer details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=15;break;case 10:return e.next=12,Object(_api__WEBPACK_IMPORTED_MODULE_10__.a)(n);case 12:_=e.sent,console.log(_),1==(null===_||void 0===_||null===(c=_.data)||void 0===c?void 0:c.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully added customer details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 15:reset(),callback();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData),setEditData(null)},customerType=[{value:"normal",name:"Normal"},{value:"special",name:"Special"}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__.a.map((function(field){return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:"vendor"===page?field.label.replace("Customer","Vendor"):field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_13__.a,{label:field.label,option:eval(field.list).map((function(e){return{value:e.value,text:e.label}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:"",showArrow:!1,onChange:function(e){return onSelectChange(field.name,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},field.name)}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__.a,{}),children:data?"Edit":"Add"})]})})]})})};__webpack_exports__.a=CustomerForm},144:function(e,t,n){"use strict";var a=n(1),r=n(11),c=n(91),_=n(3),i=["label","lcol","icol","placeholder"];t.a=function(e){var t=e.label,n=e.lcol,o=e.icol,s=e.placeholder,l=Object(r.a)(e,i);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(c.a,{span:n||4,className:"mb-3",children:Object(_.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(_.jsx)(c.a,{span:o||8,className:"mb-3",children:Object(_.jsx)("input",Object(a.a)(Object(a.a)({},l),{},{placeholder:s||t,className:"w-full py-2 px-2 mt-2 border-2"}))})]})}},145:function(e,t,n){"use strict";var a=n(1),r=n(11),c=n(86),_=n(91),i=n(3),o=["label","lcol","icol","option","selected"],s=c.a.Option;t.a=function(e){var t=e.label,n=e.lcol,l=e.icol,u=e.option,d=(e.selected,Object(r.a)(e,o));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(_.a,{span:n||4,className:"mb-3",children:Object(i.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(i.jsx)(_.a,{span:l||8,className:"mb-3",children:Object(i.jsx)("div",{className:"mt-5",children:Object(i.jsx)(c.a,Object(a.a)(Object(a.a)({className:"w-full",placeholder:t},d),{},{children:u.map((function(e,t){return Object(i.jsx)(s,{value:e.value,children:e.text},t)}))}))})})]})}},167:function(e,t,n){"use strict";t.a=[{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"text"},{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Taxable Amount",name:"taxableAmount",inputType:"number",list:"customerType"},{label:"Total Amount",name:"totalValue",inputType:"number",list:"customerType"}]},170:function(e,t,n){"use strict";t.a=[{label:"Invoice Number",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"date"},{label:"Customer",name:"customerId",type:"select",inputType:"text",list:"customers"},{label:"Division - Company",name:"companyId",type:"select",inputType:"text",list:"divisions"}]},174:function(e,t,n){},202:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(119),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(144),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(49),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_common_SelectField__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(145),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(210),_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(173),_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(211),_common_EditableTable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(141),moment__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(33),moment__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_17__),_util_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(31),_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(170),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(3),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__),InvoiceForm=function InvoiceForm(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,page=_ref.page,initialData=_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__.a.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},initialData),{},{invoiceDate:moment__WEBPACK_IMPORTED_MODULE_17___default()().format("YYYY-MM-DD"),transactions:[],labourCharges:0,claimAmount:0,taxableAmount:0,igst:0,cgst:0,sgst:0,cess:0,roundOff:0,tcs:0,totalValue:0})),_useState2=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState4=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState6=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),divisions=_useState6[0],setDivisions=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({}),_useState8=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),items=_useState8[0],setItems=_useState8[1],fetchData=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n,a,r,c,_,i;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="sales"==page||"receipts"==page?"customer":"vendor",e.next=3,Object(_api__WEBPACK_IMPORTED_MODULE_10__.l)(r);case 3:return c=e.sent,setCustomers(null===(t=c.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.code," - ").concat(e.name),companyId:e.companyId}}))),e.next=7,Object(_api__WEBPACK_IMPORTED_MODULE_10__.k)();case 7:return _=e.sent,setDivisions(null===(n=_.data.entity)||void 0===n?void 0:n.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}}))),e.next=11,Object(_api__WEBPACK_IMPORTED_MODULE_10__.o)();case 11:i=e.sent,setItems(null===(a=i.data.entity)||void 0===a?void 0:a.rows.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.id,t))}),{}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetchData();case 2:data&&(t=data.transactions.map((function(e,t){var n=e.rate*e.quantity;return{id:e.id,key:t,itemId:e.item.id,itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:n}})),setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},data),{},{invoiceDate:moment__WEBPACK_IMPORTED_MODULE_17___default()(data.invoiceDate,"DD-MM-YYYY").format("YYYY-MM-DD"),transactions:t})));case 3:case"end":return e.stop()}}),e)}))),[data]);var onChange=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(e,t){if("customerId"==e){var n=customers.find((function(e){return e.value==t}));formData.companyId=n?n.companyId:null}setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e,t)))},onSubmit=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var n,a,r,c,_,i;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(formData.transactions&&0!=(null===(n=formData.transactions)||void 0===n?void 0:n.length)){e.next=3;break}return Object(_util_util__WEBPACK_IMPORTED_MODULE_18__.k)("Please insert atleast one item"),e.abrupt("return");case 3:if(""!=formData.customerId){e.next=6;break}return Object(_util_util__WEBPACK_IMPORTED_MODULE_18__.k)("Please select customer"),e.abrupt("return");case 6:if(formData.taxableAmount=formData.transactions.reduce((function(e,t){return e+t.total}),0),a=["igst","cgst","sgst","cess","roundOff","tcs"],formData.totalValue=formData.taxableAmount+a.reduce((function(e,t){return e+parseFloat(formData[t])}),0),formData.type=page,!data){e.next=19;break}return e.next=14,Object(_api__WEBPACK_IMPORTED_MODULE_10__.t)(data.id,formData);case 14:c=e.sent,console.log(c),1==(null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.status)?(sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated invoice details","success"),reset(),callback()):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=24;break;case 19:return e.next=21,Object(_api__WEBPACK_IMPORTED_MODULE_10__.b)(formData);case 21:i=e.sent,console.log(i),1==(null===i||void 0===i||null===(_=i.data)||void 0===_?void 0:_.status)?(sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully generated invoice details","success"),reset(),callback()):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData)},setTransactions=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{transactions:e}))},setTaxableRows=function(e){var t=e.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.fieldName,t.total))}),{});setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),t))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__.a.map((function(field){return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:"vendor"===page?field.label.replace("Customer","Vendor"):field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_12__.a,{label:field.label,option:eval(field.list).map((function(e){return{value:e.value,text:e.label}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:"",showArrow:!1,onChange:function(e){return onSelectChange(field.name,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},field.name)}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_EditableTable__WEBPACK_IMPORTED_MODULE_16__.a,{setTransactions:setTransactions,transactions:formData&&formData.transactions,items:items,notEditable:!1,invoiceDetails:formData,setParentTaxableRows:setTaxableRows})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right mt-5",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:data?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__.a,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__.a,{}),children:data?"Update Invoice":"Generate Invoice"})]})})]})})};__webpack_exports__.a=InvoiceForm},218:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"j",(function(){return _})),n.d(t,"r",(function(){return i})),n.d(t,"q",(function(){return o})),n.d(t,"u",(function(){return m})),n.d(t,"v",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"h",(function(){return p})),n.d(t,"n",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"t",(function(){return E})),n.d(t,"f",(function(){return x})),n.d(t,"p",(function(){return v})),n.d(t,"m",(function(){return D})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return C})),n.d(t,"a",(function(){return P})),n.d(t,"s",(function(){return I})),n.d(t,"e",(function(){return A})),n.d(t,"o",(function(){return k}));var a=n(194),r=n.n(a),c=new(n(207).a),_=function(){return c.get("AUTH")},i=function(e){return c.set("AUTH",JSON.stringify(e),{path:"/"}),e},o=function(){c.remove("AUTH",{path:"/"})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="".concat(e);t&&Object.keys(t).forEach((function(e){return a=a.replace(":".concat(e),t[e])}));var r={};if(n){Object.keys(n).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(r[e]=n[e])}));var c=new URLSearchParams(r);a+="?".concat(c.toString())}return a},l="http://".concat(window.location.hostname,":8000"),u=r.a.create({baseURL:l}),d=function(){return{"content-type":"application/json","x-access-token":_().token}},m=function(e){return u.post("/auth/mobile/sendOTP",{mobileNumber:e})},b=function(e,t){return u.post("/auth/mobile/user",{mobileNumber:e,otp:t})},j=function(e,t){return u.post("/sales",{sales:e,type:t},{headers:d()})},O=function(e,t){return u.post("/receipts",{receipts:e,type:t},{headers:d()})},p=function(e,t,n,a,r){return u.get(s("/invoices",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:d()})},f=function(e){return u.get("/invoices/".concat(e),{headers:d()})},h=function(e){return u.post("/invoices",e,{headers:d()})},E=function(e,t){return u.put("/invoices/".concat(e),t,{headers:d()})},x=function(e){return u.delete("/invoices/".concat(e),{headers:d()})},v=function(e){return u.get("/reports?type=".concat(e),{headers:d()})},D=function(e,t,n,a){return u.get(s("/fund-reports",{},{reportType:e,date:t,month:n,year:a}),{headers:d()})},y=function(e,t,n,a,r){return u.get(s("/receipts",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:d()})},g=function(e){return u.delete("/receipts/".concat(e),{headers:d()})},M=function(e,t,n){return u.get(s("/companies",{},{search:e,offset:t,limit:n}),{headers:d()})},C=function(e,t,n,a){return u.get(s("/customers",{},{type:e,search:t,offset:n,limit:a}),{headers:d()})},P=function(e){return u.post("/customers",e,{headers:d()})},I=function(e,t){return u.put("/customers/".concat(e),t,{headers:d()})},A=function(e){return u.delete("/customers/".concat(e),{headers:d()})},k=function(e,t,n){return u.get(s("/items",{},{search:e,offset:t,limit:n}),{headers:d()})}},31:function(e,t,n){"use strict";n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return D}));var a=n(1),r=n(5),c=n(33),_=n.n(c),i=n(49),o=n.n(i),s=n(22),l=[{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Receipt Date",name:"receiptDate",type:"input",inputType:"text"},{label:"Nature",name:"nature",type:"input",inputType:"text"},{label:"Receipt VIA",name:"via",inputType:"text",list:"customerType"},{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Amount",name:"amount",inputType:"number",list:"customerType"}],u=n(167),d=n(87);function m(e){o()({text:e,icon:"error",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-primary",closeModal:!0}}})}function b(e){o()({text:e,icon:"info",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-info",closeModal:!0}}})}function j(e,t,n){o()({text:e,icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-danger",closeModal:!0}}}).then((function(e){e?t():n()}))}var O=function(e,t){var n=Object(r.a)(t,3),a=n[0],c=n[1],i=n[2],o=_()(e);return o.set("hour",a),o.set("minute",c),o.set("second",i),o.toDate()},p=function(e,t){return"purchase"!=t&&"payments"!=t||"customerName"!=e.name&&"customerCode"!=e.name?"payments"!=t||"receiptDate"!=e.name&&"via"!=e.name?"vendor"!=t||"name"!=e.name&&"code"!=e.name?e.label:e.label.replace("Customer","Vendor"):e.label.replace("Receipt","Payment"):e.label.replace("Customer","Vendor")},f=function(e){return"sales"===e?"Sale Invoices":"purchase"===e?"Purchase Invoices":"receipts"===e?"Receipts":"payments"===e?"Payments":"customer"===e?"Customers":"vendor"===e?"Vendors":void 0},h=function(e,t){var n,r,c;return["sales","purchase","receipts","payments"].includes(e)?Object(a.a)(Object(a.a)({},t),{},{invoiceNumber:"receipts"==e||"payments"==e?null===(n=t.invoice)||void 0===n?void 0:n.invoiceNumber:t.invoiceNumber,customerName:null===(r=t.customer)||void 0===r?void 0:r.name,customerCode:null===(c=t.customer)||void 0===c?void 0:c.code,invoiceDate:t.invoiceDate?_()(t.invoiceDate).format("DD-MM-YYYY"):null,companyName:t.company.name,division:t.company.division,receiptDate:t.receiptDate?_()(t.receiptDate).format("DD-MM-YYYY"):null}):Object(a.a)({},t)},E=function(e){return"receipts"==e||"payments"==e?s.i:"purchase"==e||"sales"==e?s.h:"customer"==e||"vendor"==e?s.l:void 0},x=function(e){return"receipts"==e||"payments"==e?l:"purchase"==e||"sales"==e?u.a:"customer"==e||"vendor"==e?d.a:void 0},v=function(e){return"receipts"==e||"payments"==e||("purchase"==e||"sales"==e||"customer"!=e&&"vendor"!=e&&void 0)},D=function(e){return"receipts"==e||"payments"==e?s.g:"purchase"==e||"sales"==e?s.f:"customer"==e||"vendor"==e?s.e:void 0}},322:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),_=n.n(c),i=n(53),o=(n(174),n(5)),s=n(38),l=(n(175),n(218),n(326)),u=n(71),d=n(330),m=n(7),b=n(1),j=n(26),O=n(13),p=n.n(O),f=(n(120),n(328)),h=n(119),E=n(91),x=n(323),v=n(22),D=(n(167),n(33)),y=n.n(D),g=n(3),M=f.a.Title,C=function(e){var t=e.page,n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=Object(a.useState)(null),c=Object(o.a)(r,2),_=c[0],i=c[1],s=Object(a.useState)(null),l=Object(o.a)(s,2),u=l[0],d=l[1],O=function(){var e=Object(j.a)(p.a.mark((function e(){var a,r,c,_,o,s,l,u,m,j,O,f,h,E,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.p)(t,"");case 2:for(r=e.sent,console.log("response",r),c=null===(a=r.data)||void 0===a?void 0:a.entity,_=P(2023),o={},s={},l=0;l<c.length;l++)u=c[l],m="".concat(n[u.month-1].slice(0,3),"-").concat(u.year.toString().slice(-2)),o[u.division]||(o[u.division]={}),o[u.division][m]=u.taxable_amount,s[u.name]||(s[u.name]={}),s[u.name][m]||(s[u.name][m]=0),s[u.name][m]+=u.taxable_amount;for(f in j=[],O=function(e){var t=o[e],n={};_.forEach((function(e){n[e]=t[e]?t[e]:0})),j.push(Object(b.a)({division:e},n))},o)O(f);for(x in i(j),h=[],E=function(e){var t=s[e],n={};_.forEach((function(e){n[e]=t[e]?t[e]:0})),h.push(Object(b.a)({company:e},n))},s)E(x);d(h);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){O()}),[t]);var D=P(2023).map((function(e){return{label:e,name:e,render:function(e,t){return Object(g.jsx)("div",{children:e.toLocaleString("en-IN")})}}})),y=function(e){return e.map((function(e){return{title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px",render:e.render}}))},C=function(e,t){return Object(g.jsx)("div",{children:e})},I=y([{label:"Division",name:"division",render:C}].concat(Object(m.a)(D))),A=y([{label:"Company",name:"company",render:C}].concat(Object(m.a)(D)));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(M,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Division"}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(x.a,{dataSource:_,columns:I,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(M,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Company"}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(x.a,{dataSource:u,columns:A,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},P=function(e){for(var t=["April","May","June","July","August","September","October","November","December","January","February","March"],n=[],a=new Date,r=a.getMonth(),c=a.getFullYear(),_=0;_<t.length;_++){var i=t[_],o=_<9?e-1:e;n.push("".concat(i.slice(0,3),"-").concat(o.toString().slice(-2)))}return c===e&&r<3&&(n=n.slice(0,12-(3-r))),c===e-1&&r>=3&&(n=n.slice(0,r-3)),n},I=function(e){var t=e.page;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(g.jsxs)(d.a.Item,{children:["sales"==t?"Sales":"Purchase"," Report"]})}),Object(g.jsx)(C,{page:t})]})},A=n(37),k=n(331),T=n(332),w=n(333),R=n(334),N=n(335),S=n(336),B=n(337),L=n(338),U=n(339),K=n(340),W=n(341),F=function(e){e.collapsed;var t=Object(a.useState)(!0),n=Object(o.a)(t,2),r=n[0],c=n[1],_=Object(a.useState)(void 0),s=Object(o.a)(_,2),l=s[0],d=s[1];Object(a.useEffect)((function(){var e=function(){return d(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){c(!(l<=800))}),[l]);var m="/"===window.location.pathname?["fund-reports"]:[window.location.pathname.replace("/","")];return Object(g.jsxs)("div",{className:"nav-container  h-screen",children:[Object(g.jsxs)("div",{className:"logo-container",children:[Object(g.jsx)(f.a.Title,{level:2,className:"logo",children:Object(g.jsx)(i.b,{to:"/",children:"TIMWM"})}),Object(g.jsx)(A.a,{className:"menu-control-container",onClick:function(){return c(!r)},children:Object(g.jsx)(k.a,{})})]}),r&&Object(g.jsxs)(u.a,{theme:"dark",mode:"inline",defaultOpenKeys:["reports","master-data"],defaultSelectedKeys:m,subMenuOpenDelay:.2,children:[Object(g.jsxs)(u.a.SubMenu,{title:"Reports",icon:Object(g.jsx)(T.a,{}),children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(w.a,{}),children:Object(g.jsx)(i.b,{to:"/",children:"Fund Reports"})},"fund-reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(w.a,{}),children:Object(g.jsx)(i.b,{to:"/sales-reports",children:"Sales Report"})},"sales-reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(R.a,{}),children:Object(g.jsx)(i.b,{to:"/purchase-reports",children:"Purchase Report"})},"purchase-reports")]},"reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(N.a,{}),children:Object(g.jsx)(i.b,{to:"/sales",children:"Sales"})},"sales"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(S.a,{}),children:Object(g.jsx)(i.b,{to:"/purchases",children:"Purchases"})},"purchases"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(B.a,{}),children:Object(g.jsx)(i.b,{to:"/receipts",children:"Receipts"})},"receipts"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(L.a,{}),children:Object(g.jsx)(i.b,{to:"/payments",children:"Payments"})},"payments"),Object(g.jsxs)(u.a.SubMenu,{title:"Master Data",icon:Object(g.jsx)(U.a,{}),children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(K.a,{}),children:Object(g.jsx)(i.b,{to:"/customers",children:"Customers"})},"customers"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(W.a,{}),children:Object(g.jsx)(i.b,{to:"/vendors",children:"Vendors"})},"vendors")]},"master-data")]})]})},q=n(200),V=n(11),Y=["children","type","className"],H=function(e){var t=e.children,n=e.type,a=void 0===n?"h1":n,r=e.className,c=void 0===r?"":r,_=Object(V.a)(e,Y),i={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},o=i[a]?i[a]:"h1";return Object(g.jsx)(o,Object(b.a)(Object(b.a)({className:"".concat(c)},_),{},{children:t}))},G=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,r=e.whiteSpace,c=void 0===r?"normal":r,_=e.onClick;return Object(g.jsx)("p",{className:"".concat(n),style:{whiteSpace:c},onClick:_,children:a})},z=n.p+"static/media/cryptocurrency.1548aced.png",J=n.p+"static/media/login-bg.a6a7c455.jpg",Q=function(e){var t=e.loginContentHeading,n=e.loginContentDesc;return Object(g.jsxs)("div",{className:"md:min-h-screen relative p-6 py-8 md:py-16 md:px-9 overflow-hidden bg-gradient-secondary md:bg-transparent",children:[Object(g.jsxs)("div",{className:"relative z-10 max-w-md",children:[Object(g.jsx)("img",{src:z,width:"170",height:"34",alt:"logo"}),Object(g.jsx)(H,{type:"h3",className:"text-2xl md:text-3xl md:mt-24 mt-5 mb-4 text-white",children:t}),Object(g.jsx)(G,{className:"text-white",children:n})]}),Object(g.jsx)("div",{className:"hidden md:block min-h-screen absolute w-full h-full top-0 left-0 z-0 login-bg",children:Object(g.jsx)("img",{src:J,layout:"fixed",objectFit:"cover",width:"1024",height:"1024",alt:"login bg"})})]})},X=function(e){var t=e.labelFor,n=void 0===t?"":t,a=e.variant,r=void 0===a?"medium":a,c=e.textColor,_=void 0===c?"text-gray-900":c,i=e.fontWeight,o=void 0===i?"font-bold":i,s=e.className,l=void 0===s?"block mb-2":s,u=e.children,d=e.labelDisable,m=void 0!==d&&d;return Object(g.jsx)("label",{htmlFor:"".concat(n),variant:{small:"small",medium:"medium",large:"large"}[r],className:"".concat({small:"text-sm",medium:"text-base font-bold",large:"text-lg"}[r]," ").concat(_," ").concat(o,"  ").concat(l," ").concat(m&&"opacity-60 pointer-events-none"),children:u})},Z=function(e){var t=e.disabled,n=e.error,a=(e.isRequired,e.register,e.id),r=e.name,c=e.type,_=e.maxLength,i=void 0===_?256:_,o=e.placeholder,s=e.variant,l=void 0===s?"outlineBottom":s,u=e.bg,d=void 0===u?"bg-lightGrey":u,m=e.fontSize,b=void 0===m?"text-base":m,j=(e.borderColor,e.borderRadius),O=void 0===j?"rounded":j,p=e.className,f=void 0===p?"":p,h=(e.onClick,e.value,e.defaultValue),E=e.onChangeValue,x=void 0===E?function(){}:E,v=e.inputLength;e.getValues;return Object(g.jsxs)("div",{className:"w-full mb-6",children:[Object(g.jsx)("input",{id:a,type:c,name:r,placeholder:o,variant:{normal:"normal",outline:"outline",outlineBottom:"outlineBottom",error:"error"}[l],className:"".concat({normal:"border-0",outline:"border-gray-200",outlineBottom:"border-b-gray-400",error:"border-error border-b-error"}[l]," w-full border text-gray-900 h-12 px-4 outline-none placeholder:text-grey-400 ").concat(d," ").concat(O," ").concat(b," ").concat(f," ").concat(t&&"opacity-60 pointer-events-none"," ").concat(n?" border border-error border-b-error":""),disabled:void 0!==t&&t,maxLength:i,onChange:function(e){x(e)},defaultValue:h}),n&&Object(g.jsx)("div",{className:"text-sm text-error pt-1",children:0!=n.length&&n.message}),v&&Object(g.jsxs)(G,{className:"text-xs text-gray-400 absolute bottom-2 right-2",children:[inputValue.length,"/",v]})]})},$=function(e){var t=e.type,n=void 0===t?"":t,a=e.children,r=e.variant,c=e.fontWeight,_=void 0===c?"font-medium":c,i=e.padding,o=void 0===i?"py-2 px-3":i,s=e.btnClass,l=void 0===s?"":s,u=e.imgClassName,d=void 0===u?"":u,m=e.imgSrc,b=e.imgWidth,j=e.imgHeight,O=e.imgAlt,p=void 0===O?"":O,f=e.onClick,h=void 0===f?function(){}:f,E=e.disabled,x=e.form,v=e.buttonRef;return Object(g.jsxs)("button",{type:n,variant:{primaryBtn:"primaryBtn",outlineBtn:"outlineBtn",normalBtn:"normalBtn",secondaryBtn:"secondaryBtn"}[r],className:"".concat({primaryBtn:"flex items-center justify-center bg-yellow-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",secondaryBtn:"flex items-center justify-center bg-blue-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",outlineBtn:"flex items-center justify-center bg-transparent border border-gray-200 rounded text-gray-500 text-base drop-shadow-btn disabled:bg-primary-100 disabled:text-primary-300",normalBtn:"flex items-center justify-center text-base"}[r]," ").concat(_," ").concat(o," ").concat(l," ").concat(m&&"pl-4 bg-red"," "),onClick:h,disabled:E,form:x,ref:v,children:[m?Object(g.jsx)("span",{className:"mx-2 flex items-center flex-shrink-0 ".concat(d),children:Object(g.jsx)("img",{src:m,width:b,height:j,alt:p})}):"",a]})},ee=function(e){var t=e.loginDetails,n=e.onSubmit,r=e.apierror,c=Object(a.useState)(10!=t.mobileNumber.length),_=Object(o.a)(c,2),i=(_[0],_[1]),s=Object(a.useState)(r),l=Object(o.a)(s,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){d(r)}),[r]),console.log("error",u),Object(g.jsx)("div",{className:"md:min-h-screen flex items-center px-6 py-14 bg-white lg:pl-20 lg:pr-32",children:Object(g.jsxs)("div",{className:"w-full max-w-md",children:[Object(g.jsx)(H,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:"Login"}),Object(g.jsx)(G,{className:"mb-6",children:"Enter your details to get sign in to your account"}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target[0].value;console.log(t.length,"mobileNumber"),10==t.length?n({mobileNumber:t}):d("Please enter valid mobile number")},children:[Object(g.jsx)(X,{textColor:"text-gray-700",children:"Mobile Number"}),Object(g.jsx)("div",{className:"mt-2 flex",children:Object(g.jsx)(Z,{id:"mobileNumber",name:"mobileNumber",type:"number",className:"ml-1 rounded-none mb-0",placeholder:"Mobile Number",maxLength:10,isRequired:!0,onChangeValue:function(e){10!=e.target.value.toString().length?(i(!0),d("")):i(!1)},variant:"outlineBottom"})}),u&&0!=u.length&&Object(g.jsx)("div",{className:"text-sm text-red-700 -mt-5 mb-1",children:0!=u.length&&u}),Object(g.jsx)(G,{className:"mb-16 md:mb-10 text-sm text-gray-500",children:"Proceed To Enter PIN"}),Object(g.jsx)($,{type:"submit",variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",children:"Proceed"})]})]})})},te=n(14),ne=n(15),ae=n(16),re=n(17),ce=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"],_e=function(e){return"object"===typeof e},ie=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(e){var a;return Object(te.a)(this,n),(a=t.call(this,e)).getClasses=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!_e(e)&&!1!==e})).join(" ")},a.getType=function(){var e=a.props,t=e.isInputSecure,n=e.isInputNum;return t?"password":n?"tel":"text"},a.input=r.a.createRef(),a}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,n=e.shouldAutoFocus,a=this.input.current;a&&t&&n&&a.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,n=this.input.current;e.focus!==t&&n&&t&&(n.focus(),n.select())}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.separator,a=e.isLastChild,r=e.inputStyle,c=e.focus,_=e.isDisabled,i=e.hasErrored,o=e.errorStyle,s=e.focusStyle,l=e.disabledStyle,u=(e.shouldAutoFocus,e.isInputNum),d=e.index,m=e.value,j=e.className,O=(e.isInputSecure,Object(V.a)(e,ce));return Object(g.jsxs)("div",{className:j,style:{display:"flex",alignItems:"center"},children:[Object(g.jsx)("input",Object(b.a)({"aria-label":"".concat(0===d?"Please enter verification code. ":"").concat(u?"Digit":"Character"," ").concat(d+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},_e(r)&&r,c&&_e(s)&&s,_&&_e(l)&&l,i&&_e(o)&&o),placeholder:t,className:this.getClasses(r,c&&s,_&&l,i&&o),type:this.getType(),maxLength:"1",ref:this.input,disabled:_,value:m||""},O)),!a&&n]})}}]),n}(a.PureComponent),oe=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeInput:0},e.getOtpValue=function(){return e.props.value?e.props.value.toString().split(""):[]},e.getPlaceholderValue=function(){var t=e.props,n=t.placeholder,a=t.numInputs;if("string"===typeof n){if(n.length===a)return n;n.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},e.handleOtpChange=function(t){(0,e.props.onChange)(t.join(""))},e.isInputValueValid=function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"===typeof t)&&1===t.trim().length},e.focusInput=function(t){var n=e.props.numInputs,a=Math.max(Math.min(n-1,t),0);e.setState({activeInput:a})},e.focusNextInput=function(){var t=e.state.activeInput;e.focusInput(t+1)},e.focusPrevInput=function(){var t=e.state.activeInput;e.focusInput(t-1)},e.changeCodeAtFocus=function(t){var n=e.state.activeInput,a=e.getOtpValue();a[n]=t[0],e.handleOtpChange(a)},e.handleOnPaste=function(t){t.preventDefault();var n=e.state.activeInput,a=e.props,r=a.numInputs;if(!a.isDisabled){for(var c=e.getOtpValue(),_=n,i=t.clipboardData.getData("text/plain").slice(0,r-n).split(""),o=0;o<r;++o)o>=n&&i.length>0&&(c[o]=i.shift(),_++);e.setState({activeInput:_},(function(){e.focusInput(_),e.handleOtpChange(c)}))}},e.handleOnChange=function(t){var n=t.target.value;e.isInputValueValid(n)&&e.changeCodeAtFocus(n)},e.handleOnKeyDown=function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32!==t.keyCode&&" "!==t.key&&"Spacebar"!==t.key&&"Space"!==t.key||t.preventDefault()},e.handleOnInput=function(t){if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var n=t.nativeEvent;null===n.data&&"deleteContentBackward"===n.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}},e.renderInputs=function(){for(var t=e.state.activeInput,n=e.props,a=n.numInputs,r=n.inputStyle,c=n.focusStyle,_=n.separator,i=n.isDisabled,o=n.disabledStyle,s=n.hasErrored,l=n.errorStyle,u=n.shouldAutoFocus,d=n.isInputNum,m=n.isInputSecure,b=n.className,j=[],O=e.getOtpValue(),p=e.getPlaceholderValue(),f=e.props["data-cy"],h=e.props["data-testid"],E=function(n){j.push(Object(g.jsx)(ie,{placeholder:p&&p[n],index:n,focus:t===n,value:O&&O[n],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:n}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:_,inputStyle:r,focusStyle:c,isLastChild:n===a-1,isDisabled:i,disabledStyle:o,hasErrored:s,errorStyle:l,shouldAutoFocus:u,isInputNum:d,isInputSecure:m,className:b,"data-cy":f&&"".concat(f,"-").concat(n),"data-testid":h&&"".concat(h,"-").concat(n)},n))},x=0;x<a;x++)E(x);return j},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.props.containerStyle;return Object(g.jsx)("div",{style:Object.assign({display:"flex"},_e(e)&&e),className:_e(e)?"":e,children:this.renderInputs()})}}]),n}(a.Component);oe.defaultProps={numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1};var se=oe,le=function(e){var t=e.onChange,n=e.otpValue,a=e.length,r=e.errorMessage;return Object(g.jsxs)("div",{className:"otp",children:[Object(g.jsx)(se,{isInputNum:!0,value:n,onChange:function(e){t(e)},numInputs:a,hasErrored:(null===r||void 0===r?void 0:r.length)>0,placeholder:!1,containerStyle:{fontSize:"16px",color:"black"},inputStyle:{width:42,height:48,border:"1px solid #E5E5EB",marginRight:16,borderRadius:"7px",fontWeight:400,fontSize:"18px",lineHeight:"28px"},focusStyle:{outline:"none",border:"1px solid #9C9CAF",color:"#14142B"},errorStyle:{border:"1px solid #E64C4C",color:"#E64C4C"},shouldAutoFocus:!0}),r&&Object(g.jsx)(G,{className:"text-xs font-light text-error mt-1",children:r})]})},ue=n(173),de=function(e){var t=e.handleLogin,n=e.loginDetails,r=e.editMobile,c=e.resendOtp,_=e.error,i=Object(a.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(30),m=Object(o.a)(d,2),b=m[0],j=m[1];Object(a.useCallback)((function(){return j((function(e){return e-1}))}),[]);return Object(g.jsx)("div",{className:"md:min-h-screen bg-white flex items-center px-6 py-14 lg:pl-20 lg:pr-30",children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(l)},children:[Object(g.jsxs)(H,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:["Enter Your PIN "," ",Object(g.jsx)("span",{className:"font-bold",children:"".concat(n.mobileNumber)}),Object(g.jsx)("span",{className:"ml-1",children:Object(g.jsx)(ue.a,{onClick:r})})]}),Object(g.jsx)(le,{onChange:u,otpValue:l,length:4,errorMessage:_}),b>0&&Object(g.jsx)(G,{className:"my-8 md:my-11 text-sm text-gray-600 font-light"}),0==b&&Object(g.jsx)("div",{onClick:function(){b||j(30),c()},children:Object(g.jsx)(G,{className:"text-primary-900 my-8 md:my-11 cursor-pointer",children:"Send the code again"})}),Object(g.jsx)($,{variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",disabled:4!=l.length,type:"submit",children:"Submit"})]})})},me=function(e){Object(q.a)(e);var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1],_=Object(a.useState)({step:1,mobileNumber:""}),i=Object(o.a)(_,2),s=i[0],l=i[1],u=function(){var e=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.u)(t.mobileNumber);case 2:(n=e.sent).data.status?(l({step:2,mobileNumber:t.mobileNumber}),c([])):c(n.data.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!=t.length){e.next=6;break}return e.next=3,Object(v.v)(s.mobileNumber,t,s.countryCode);case 3:n=e.sent,console.log(n),n.data.status?(Object(v.r)({id:n.data.entity.id,token:n.data.entity.token}),window.location.reload(!1)):c(n.data.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.u)(s.mobileNumber);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){c([]),l((function(e){return Object(b.a)(Object(b.a)({},e),{},{step:1})}))};return Object(g.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap",children:[Object(g.jsx)("div",{className:"w-full md:w-55/100 shrink-0",children:Object(g.jsx)(Q,{})}),Object(g.jsx)("div",{className:"w-full md:w-45/100",children:function(){switch(s.step){case 1:return Object(g.jsx)(ee,{onSubmit:u,loginDetails:s,apierror:r,defaultValues:{mobileNumber:s.mobileNumber}});case 2:return Object(g.jsx)(de,{handleLogin:d,loginDetails:s,editMobile:O,resendOtp:m,error:r})}}()})]})},be=n(347),je=n(348),Oe=n(349),pe=n(350),fe=[{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Total Collection",name:"toatalCollection",inputType:"number",list:"customerType"},{label:"Total Payment",name:"toatlPayment",inputType:"number",list:"customerType"},{label:"Fund Available",name:"fundAvailable",inputType:"number",list:"customerType"}],he=f.a.Title,Ee=function(e){e.page;var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1],_=Object(a.useState)(null),i=Object(o.a)(_,2),s=i[0],l=i[1],u=Object(a.useState)(y()().format("YYYY-MM-DD")),d=Object(o.a)(u,2),m=d[0],O=d[1],D=Object(a.useState)(y()().format("YYYY-MM")),M=Object(o.a)(D,2),C=M[0],P=M[1],I=function(e,t){for(var n={},a=0;a<e.length;a++){var r=e[a];n[r.company_id]||(n[r.company_id]={id:r.company_id,companyName:r.name,division:r.division,fundAvailable:0});var c=n[r.company_id];"receipts"==r.type&&(c.toatalCollection="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year),"payments"==r.type&&(c.toatlPayment="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year)}return Object.values(n)},A=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.m)(t,m,C.split("-")[1],C.split("-")[0]);case 2:a=e.sent,console.log(a),r=null===(n=a.data)||void 0===n?void 0:n.entity,"date"==t?c(Object.values(I(r,t))):l(Object.values(I(r,t)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){A("date")}),[m]),Object(a.useEffect)((function(){A("month")}),[C]);var k=fe.map((function(e){return Object(b.a)({title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"},function(e){return"number"===e.inputType?{render:function(e,t){return Object(g.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}}(e))}));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(he,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["As on ",Object(g.jsx)("input",{type:"date",onChange:function(e){return O(e.target.value)},value:m})]}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(x.a,{dataSource:r,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(he,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Month Report ",Object(g.jsx)("input",{type:"month",onChange:function(e){return P(e.target.value)},value:C})]}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(x.a,{dataSource:s,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},xe=n(4),ve=n(171),De=n(329),ye=n(141),ge=f.a.Title,Me=function(e){var t,n=e.visible,r=e.setVisible,c=e.invoiceId,_=Object(a.useState)({transactions:[]}),i=Object(o.a)(_,2),s=i[0],l=i[1],u=Object(a.useState)({}),d=Object(o.a)(u,2),m=(d[0],d[1],function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.n)(t);case 2:r=e.sent,console.log(r),c=null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity.transactions.map((function(e){e.rate,e.quantity;return{itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:e.rate*e.quantity}})),l(Object(b.a)(Object(b.a)({},null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity),{},{transactions:c}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(a.useEffect)(Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("calling",c),!c){e.next=4;break}return e.next=4,m(c);case 4:case"end":return e.stop()}}),e)}))),[c]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(De.a,{title:"Invoice Details",visible:n,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return r(!1)},footer:[],children:Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(h.a,{children:[Object(g.jsx)(E.a,{span:18,children:Object(g.jsxs)(ge,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Customer Name : ",null===s||void 0===s||null===(t=s.customer)||void 0===t?void 0:t.name]})}),Object(g.jsx)(E.a,{span:6,children:Object(g.jsxs)(ge,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Dated : ",y()(null===s||void 0===s?void 0:s.invoiceDate).format("DD-MM-YYYY")]})}),Object(g.jsx)(E.a,{span:12,children:Object(g.jsxs)(ge,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Invoice Number : ",null===s||void 0===s?void 0:s.invoiceNumber]})})]}),Object(g.jsx)(h.a,{children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(ye.a,{customerData:s&&s.customerId&&(null===s||void 0===s?void 0:s.customer),transactions:s&&(null===s||void 0===s?void 0:s.transactions),milk:{},notEditable:!0,invoiceDetails:s})})})]})})})},Ce=n(327),Pe=n(86),Ie=n(31),Ae=function(e){var t=null,n=null;return e.length>0&&(t=Object(Ie.c)(e[0],[0,0,0]),n=Object(Ie.c)(e[1],[23,59,59])),{fromDate:t,toDate:n}},ke=Ce.a.RangePicker,Te=function(e){var t,n=e.visible,r=e.onOk,c=e.onCancel,_=e.page,i=e.filters,s=Object(a.useState)(null!==(t=i.dateRange)&&void 0!==t&&t.fromDate?[y()(i.dateRange.fromDate),y()(i.dateRange.toDate)]:[]),l=Object(o.a)(s,2),u=l[0],d=l[1],m=Object(a.useState)(i.companyIds?i.companyIds:[]),b=Object(o.a)(m,2),O=b[0],f=b[1],h=Object(a.useState)(i.customerIds?i.customerIds:[]),E=Object(o.a)(h,2),x=E[0],D=E[1],M=function(){r({dateRange:Ae(u),companyIds:O,customerIds:x})},C=Object(a.useState)([]),P=Object(o.a)(C,2),I=P[0],k=P[1],T=Object(a.useState)([]),w=Object(o.a)(T,2),R=w[0],N=w[1],S=function(e){return e.map((function(e,t){return Object(g.jsx)(Option,{value:e.value,children:e.label},t)}))},B=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.k)();case 2:n=e.sent,k(null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="sales"==_||"receipts"==_?"customer":"vendor",e.next=3,Object(v.l)(n);case 3:a=e.sent,N(null===(t=a.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.name)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){n&&(B(),L())}),[n]);return Object(g.jsxs)(De.a,{title:"Filter",visible:n,onOk:M,onCancel:c,footer:[Object(g.jsx)(A.a,{onClick:function(){return d([]),f([]),void D([])},children:"Clear Filter"},"cancel"),Object(g.jsx)(A.a,{type:"primary",onClick:function(){return M()},children:"Apply Filter"},"save")],children:[Object(g.jsxs)("label",{children:["receipts"==_?"Receipt":"payments"==_?"Payment":"Invoice"," Date Range"]}),Object(g.jsx)(ke,{style:{width:"100%"},dateRender:function(e){var t={};return 1===e.date()&&(t.border="1px solid #1890ff",t.borderRadius="50%"),Object(g.jsx)("div",{className:"ant-picker-cell-inner",style:t,children:e.date()})},onChange:function(e){return d(e)},value:u}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{children:"Division"}),Object(g.jsx)(Pe.a,{placeholder:"Divisions",allowClear:!0,style:{width:"100%"},value:O,onChange:f,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:S(I)}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{children:"sales"==_||"receipts"==_?"Customers":"Vendors"}),Object(g.jsx)(Pe.a,{placeholder:"Customers",value:x,allowClear:!0,style:{width:"100%"},onChange:D,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:S(R)})]})},we=n(209),Re=function(e){var t=e.filters,n=e.onRemoveFilter,a=(e.page,!1);Object.keys(t).length>0&&(a=!0);var r={dateRange:{label:"Date Range",checkFunction:function(e){var t;return null===(t=e.dateRange)||void 0===t?void 0:t.fromDate}},companyIds:{label:"Divisions",checkFunction:function(e){var t;return(null===(t=e.companyIds)||void 0===t?void 0:t.length)>0}},customerIds:{label:"Customers",checkFunction:function(e){var t;return(null===(t=e.customerIds)||void 0===t?void 0:t.length)>0}}};return Object(g.jsx)(g.Fragment,{children:a&&Object(g.jsx)("div",{className:"mt-5",children:Object.keys(t).filter((function(e){return r[e].checkFunction(t)})).map((function(e){return Object(g.jsx)(we.a,{color:"processing",closable:!0,onClose:function(){return function(e){n(e)}(e)},children:r[e].label})}))})})},Ne=n(342),Se=f.a.Title,Be=function(e){var t=e.page,n=e.reload,r=e.setEditData,c=e.setReload,_=Object(a.useState)(null),i=Object(o.a)(_,2),s=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(o.a)(u,2),m=d[0],O=d[1],v=Object(a.useState)(null),D=Object(o.a)(v,2),y=D[0],M=D[1],C=Object(a.useState)(1),P=Object(o.a)(C,2),I=P[0],k=P[1],T=Object(a.useState)(20),w=Object(o.a)(T,2),R=w[0],N=w[1],S=Object(a.useState)(0),B=Object(o.a)(S,2),L=B[0],U=B[1],K=Object(a.useState)(""),W=Object(o.a)(K,2),F=W[0],q=W[1],V=Object(a.useState)({}),Y=Object(o.a)(V,2),H=Y[0],G=Y[1],z=Object(a.useState)(!1),J=Object(o.a)(z,2),Q=J[0],X=J[1],Z=function(){var e=Object(j.a)(p.a.mark((function e(){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(Ie.b)(t),e.next=3,r(t,F,(I-1)*R,R,JSON.stringify(H));case 3:c=e.sent,l(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.entity.rows.map((function(e){return Object(Ie.h)(t,e)}))),U(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.entity.count);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Z()}),[t,I,R,n,F,H]);var $=function(){var e=Object(j.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Ie.j)("Are you sure you want to delete ?",Object(j.a)(p.a.mark((function e(){var r,_,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _=Object(Ie.a)(t),e.next=3,_(a.id);case 3:null!==(i=e.sent)&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.status?Object(Ie.i)("Succesfully Deleted"):(console.log("err",i),Object(Ie.k)("OOPS!! Something went wrong")),c(!n);case 6:case"end":return e.stop()}}),e)}))),(function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){return{render:function(n,a){if("invoiceNumber"==e.name){var r,c="receipts"==t||"payments"==t?null===(r=a.invoice)||void 0===r?void 0:r.id:a.id;return Object(g.jsx)("div",{children:Object(g.jsx)("a",{onClick:function(){return function(e){M(e),O(!0)}(c)},className:"underline text-blue-900",children:n})})}return"number"===e.inputType?Object(g.jsx)("div",{children:n?n.toLocaleString("en-IN"):n}):"companyId"===e.name?"".concat(a.company.division," - ").concat(a.company.name):n}}},te=Object(Ie.d)(t).map((function(e){return Object(b.a)({title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:Object(Ie.f)(e,t)}),dataIndex:e.name,key:e.name,width:"150px"},ee(e,t))}));te.push({title:"Action",key:"operation",width:"100px",render:function(e){return Object(g.jsxs)("div",{className:"float-right",children:[Object(g.jsx)(A.a,{type:"primary",onClick:function(){return function(e){r(Object(b.a)({},e))}(e)},title:"Edit",children:Object(g.jsx)(ue.a,{})},"edit"+e.id),Object(g.jsx)(A.a,{type:"secondary",onClick:function(){return $(e)},className:"ml-2",title:"Delete",children:Object(g.jsx)(Ne.a,{})},"delete"+e.id)]})}});for(var ne=[10,20,50,100],ae=[];ne.length>0&&ne[0]<L;)ae.push(ne[0]+""),ne.shift();L>10&&ae.push(L+"");return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(Se,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:Object(Ie.e)(t)}),Object(g.jsx)("div",{className:"mb-2",children:Object(g.jsxs)(h.a,{className:"w-full",children:[Object(g.jsx)(E.a,{span:12,children:Object(g.jsx)(ve.a,{placeholder:"Search...",value:F,onChange:function(e){return q(e.target.value)}})}),Object(g.jsx)(E.a,{span:3,className:"ml-5",children:Object(g.jsx)(A.a,{onClick:function(){return X(!Q)},children:"Filter"})}),Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(Re,{filters:H,onRemoveFilter:function(e){G(Object(b.a)(Object(b.a)({},H),{},Object(xe.a)({},e,null)))}})})]})}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(E.a,{span:24,children:Object(g.jsx)(x.a,{dataSource:s,columns:te,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:ae,current:I,pageSize:R,onChange:function(e){k(e)},onShowSizeChange:function(e,t){N(t),k(1)},total:L,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(g.jsx)(Me,{visible:m,setVisible:O,invoiceId:y}),Q&&Object(g.jsx)(Te,{visible:Q,onCancel:function(){return X(!1)},onOk:function(e){return G(e),void X(!1)},page:t,filters:H})]})})},Le=function(e){var t=e.tableData,n=e.invalidHeader,r=e.setHasErrors,c=e.setRecord,_=e.record,i=[{title:"ROW INDEX",dataIndex:"index",key:"index",width:"150px",render:function(e){return Object(g.jsx)("div",{className:"flex flex-col",children:Object(g.jsx)("label",{className:"font-semibold",children:e+2},e+2)},e+2)}},{title:"REASON",dataIndex:"reason",key:"reason",render:function(e,t){var n=e.map((function(e,t){return Object(g.jsx)("li",{children:e},t)}));return Object(g.jsx)("ul",{children:n},t.index+2)}}];return Object(a.useEffect)((function(){!function(){var e=0;c(e),t.map((function(t){t.reason.length&&(e+=1)})),c(e),e||n.length||r(!1)}()}),[_]),Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"flex-col pb-5",children:[Object(g.jsx)("label",{className:"font text-md",children:"The following data is invalid. Please correct them and upload again."}),Object(g.jsx)("ul",{className:"pl-2 text-red-800",children:n.length?n.map((function(e,t){return Object(g.jsxs)("li",{children:["Invalid Header : ",e.invalidColumn]},t)})):""}),Object(g.jsx)("label",{className:"font text-md",children:"Correct the errors and upload again."})]}),Object(g.jsx)(x.a,{dataSource:t,columns:i,bordered:!0,pagination:{}})]})},Ue=function(e){var t=e.cardClass,n=void 0===t?"":t,a=e.cardWidth,r=void 0===a?"":a,c=e.cardBg,_=void 0===c?"bg-white":c,i=e.cardBorder,o=void 0===i?"border":i,s=e.cardBorderColor,l=void 0===s?"border-gray-200":s,u=e.cardRadius,d=void 0===u?"rounded-2xl":u,m=e.cardPadding,b=void 0===m?"":m,j=e.cardShadow,O=void 0===j?"":j,p=e.children,f=e.cardHeight,h=void 0===f?"":f,E=e.onClick;return Object(g.jsx)("div",{className:"".concat(r," ").concat(h," ").concat(_," ").concat(o," ").concat(l," ").concat(d," ").concat(b," ").concat(O," ").concat(n," "),onClick:E,children:p})},Ke=n(343),We=n(100),Fe=function(e){var t=e.acceptedFile,n=e.onValidate,a=e.resetUploadedCsv,r=e.setCsvArray,c=e.onCancel,_=e.setCsvErrors,i=e.setHasErrors,o=e.dataKeysMap,s=(e.validateButtonRef,Object(We.c)().readString),l=o,u=function(e){if(0===e.length||e.length>0&&0===Object.keys(e[0]).length)return alert("Error!! Empty Csv file upload!"),null;var t=[],n=[];return Object.keys(e[0]).forEach((function(e){l[e]||t.push({invalidColumn:e})})),t.length?console.log("invalidHeaders",t):(n=function(e,t){return t.map((function(t){return Object.keys(t).reduce((function(n,a){return Object(b.a)(Object(b.a)({},n),Object(xe.a)({},e[a]||a,t[a]))}),{})}))}(l,e),r(n)),{newCsv:n,invalidHeaders:t}},d=function(){r(null),_([]),i(!1),function(e){if(null===t)return alert("Error !! Empty Csv file upload!"),a(),[];e()}((function(){console.log("acceptedFile",t),s(t,{worker:!0,header:!0,skipEmptyLines:!0,complete:function(e){var t=u(e.data);if(console.log("results.data",e.data),t){var a=Object(b.a)({},t),r=a.newCsv,_=a.invalidHeaders;n({newCsv:r,invalidHeaders:_})}else c()}})}))};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"flex justify-end items-center mt-5",children:[Object(g.jsx)($,{type:"button",variant:"outlineBtn",btnClass:"text-sm font-normal py-3 px-6",onClick:function(){return c()},children:"Cancel"}),Object(g.jsx)($,{type:"submit",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 py-3 px-8",onClick:function(){return d()},children:"Save"})]})})},qe=function(e){var t=e.validateBulkCreation,n=e.onCancel,c=e.hasErrors,_=e.setHasErrors,i=(e.csvErrors,e.setCsvErrors),s=e.csvArray,l=e.setCsvArray,u=e.validateButtonRef,d=(e.invalidHeader,e.setInvalidHeader),m=e.record,O=e.setRecord,f=e.dataKeysMap,h=Object(We.b)().CSVReader,E=r.a.useRef(),x=Object(a.useState)(null),v=Object(o.a)(x,2),D=v[0],y=v[1],M=function(){var e=Object(j.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.newCsv,r=n.invalidHeaders,O(!1),a||C(),t(a,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e;n(),null===(e=E.current)||void 0===e||e.click()};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"",children:Object(g.jsx)(h,{onUploadAccepted:function(e){y(e),_(!1),l(null)},children:function(e){var t=e.getRootProps,a=e.acceptedFile,r=(e.ProgressBar,e.getRemoveFileProps),o=Object(g.jsx)("div",{className:"absolute group-hover:flex hidden w-53.5 h-25  top-0 left-0 items-center justify-center before:w-full before:h-full before:left-0 before:bg-black before:opacity-70",children:Object(g.jsx)("div",Object(b.a)(Object(b.a)({ref:E,className:"absolute cursor-pointer "},r()),{},{children:Object(g.jsx)(Ne.a,{})}))});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"relative w-53.5 h-25 mb-2 cursor-pointer",children:Object(g.jsxs)("div",Object(b.a)(Object(b.a)({},t()),{},{children:[Object(g.jsx)("input",{className:"shadow hidden appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),Object(g.jsxs)("div",{className:"p-2 border border-dashed bg-gray-100 border-gray-300 w-53.5 h-25 flex items-center justify-center",children:[!a&&Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)(Ke.a,{}),Object(g.jsxs)(G,{children:["Drag the file or ",Object(g.jsx)("span",{className:"text-info ",children:"Browse"})]})]}),a&&Object(g.jsxs)("div",{className:"relative w-53.5 h-25 align-middle mb-6 group flex items-center justify-center",children:[a.name,o]},a.name)]})]}))}),Object(g.jsx)(Fe,{csvFileData:D,acceptedFile:a,onValidate:M,getRemoveFileProps:r,resetUploadedCsv:C,setCsvArray:l,setInvalidHeader:d,onCancel:n,setCsvErrors:i,setHasErrors:_,dataKeysMap:f,validateButtonRef:u}),Object(g.jsx)("div",{className:"pb-5",children:s&&(c?Object(g.jsxs)("label",{className:"font text-md text-red-800 ",children:[m," records needs correction. "]}):Object(g.jsx)("label",{className:"font text-md ",children:" All records are valid. "}))})]})}})})})};function Ve(e){var t=e.sampleData,n=(e.fileName,e.children),a=e.page,r=Object(We.a)(),c=r.CSVDownloader,_=r.Type;return Object(g.jsx)(c,{variant:"Link",type:_.Button,filename:"".concat(a,"-sample-file"),bom:!0,config:{delimiter:","},data:t,children:n})}var Ye=function(e){var t=e.headingChildren,n=e.textChildren,a=e.getIcon,r=e.onIconClick,c=e.headingStyle,_=void 0===c?"":c;return Object(g.jsxs)("div",{className:"flex items-center ".concat(r?"cursor-pointer":""),onClick:r,children:[Object(g.jsx)("div",{className:"flex shrink-0 mr-2",children:a()}),Object(g.jsxs)("div",{children:[Object(g.jsx)(H,{type:"h4",className:"leading-8 ".concat(_),children:t}),n&&Object(g.jsx)(G,{className:"text-sm font-light text-gray-500",children:n})]})]})},He=n(344),Ge=function(e){var t=e.page,n=e.setReload,r=Object(a.useState)(null),c=Object(o.a)(r,2),_=c[0],i=c[1],s=Object(a.useState)([]),l=Object(o.a)(s,2),u=l[0],d=l[1],m=Object(a.useState)(!1),b=Object(o.a)(m,2),O=b[0],f=b[1],h=Object(a.useState)([]),E=Object(o.a)(h,2),x=E[0],D=E[1],y=Object(a.useState)(null),M=Object(o.a)(y,2),C=M[0],P=M[1],I=Object(a.useState)(!1),A=Object(o.a)(I,2),k=(A[0],A[1]),T=Object(a.useRef)(null);Object(a.useEffect)((function(){w()}),[t]),Object(a.useEffect)((function(){f(!0)}),[u]);var w=function(){k(!1),i(null),d([]),f(!1),D([]),P(null)},R=function(){var e=Object(j.a)(p.a.mark((function e(a){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,"csvData"),r="receipts"==t||"payments"==t?v.c:v.d,e.next=4,r(a,t);case 4:c=e.sent,console.log(c,"res"),c.data.status?c.data.entity.csvErrorArray?d(c.data.entity.csvErrorArray):(d([]),n(!0),Object(Ie.i)("Succesfully Uploaded")):Object(Ie.k)("OOPS!! Something went wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0?D(n):R(t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=ze(t);return Object(g.jsxs)("div",{className:"scr",children:[Object(g.jsxs)(Ue,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:[Object(g.jsxs)("div",{className:"w-2/5 py-8",children:[Object(g.jsx)(Ye,{getIcon:function(){return Object(g.jsx)(He.a,{style:{fontSize:"450%"}})},headingChildren:"Bulk Upload",textChildren:"Upload the required file"}),Object(g.jsxs)(G,{className:"pl-14 pt-4",children:["To download a sample ",Object(g.jsx)("b",{children:t})," file"," ",Object(g.jsx)(Ve,{page:t,sampleData:[S],fileName:"sample-file",children:Object(g.jsx)("div",{variant:"Link",className:"text-primary-500 font-semibold text-sm mt-2",children:"Click here"})})]})]}),Object(g.jsx)("div",{className:"w-3/5 pl-25 py-8 mt-12",children:Object(g.jsxs)("div",{children:[Object(g.jsx)(X,{fontWeight:"font-normal",children:"Upload File"}),Object(g.jsx)(qe,{validateBulkCreation:N,handleBulkCreation:R,hasErrors:O,setHasErrors:f,csvErrors:u,setCsvErrors:d,csvArray:_,setCsvArray:i,onCancel:w,validateButtonRef:T,invalidHeader:x,setInvalidHeader:D,record:C,setRecord:P,dataKeysMap:S})]})})]}),O&&Object(g.jsx)(Ue,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:Object(g.jsx)("div",{className:"w-full",children:Object(g.jsx)(Le,{tableData:u,invalidHeader:x,setHasErrors:f,hasErrors:O,setRecord:P,record:C})})})]})},ze=function(e){return"sales"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"purchase"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"receipts"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","RECEIPT VIA":"via",AMOUNT:"amount","RECEIPT DATE":"receiptDate"}:"payments"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","PAID VIA":"via",AMOUNT:"amount","PAYMENT DATE":"receiptDate"}:void 0},Je=n(345),Qe=n(157),Xe=n(346),Ze=n(143),$e=n(202),et=f.a.Title,tt=function(e){var t=e.page,n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],_=r[1],i=Object(a.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(!1),b=Object(o.a)(m,2),j=b[0],O=b[1],p=Object(a.useState)(null),f=Object(o.a)(p,2),h=f[0],E=f[1];return Object(a.useEffect)((function(){u(!1),O(!1),_(!1),E(null)}),[t]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(g.jsx)(d.a.Item,{children:""})}),Object(g.jsxs)("div",{className:"relative flex",children:[Object(g.jsxs)($,{type:"secondaryBtn",variant:"secondaryBtn",btnClass:"text-sm font-normal ml-2 px-3",onClick:function(){return O(!j)},children:[j?Object(g.jsx)(Qe.a,{className:"mr-2"}):Object(g.jsx)(Je.a,{className:"mr-2"}),j?"Close Form":"Add ".concat(Object(Ie.e)(t))]}),Object(Ie.g)(t)&&Object(g.jsxs)($,{type:"primaryBtn",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 px-2",onClick:function(){return u(!l)},children:[l?Object(g.jsx)(Qe.a,{className:"mr-2"}):Object(g.jsx)(Xe.a,{className:"mr-2"}),l?"Close Upload":"Upload"]})]}),l&&Object(g.jsx)(Ge,{page:t,setReload:_}),j&&Object(g.jsxs)("div",{className:"site-layout-background p-5",id:"form-div",children:[Object(g.jsxs)(et,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:[h?"Edit":"Add"," ",Object(Ie.e)(t)]}),("customer"===t||"vendor"==t)&&Object(g.jsx)(Ze.a,{data:h,callback:function(){return _(!c)},setEditData:E,page:t}),("sales"===t||"purchase"==t)&&Object(g.jsx)($e.a,{data:h,callback:function(){return _(!c)},setEditData:E,page:t})]}),Object(g.jsx)("div",{className:"mt-5",children:Object(g.jsx)(Be,{page:t,reload:c,setEditData:function(e){E(e),O(!0),setTimeout((function(){return document.getElementById("form-div").scrollIntoView()}),2)},setReload:_})})]})},nt=(n(87),f.a.Title,l.a.Header),at=l.a.Content,rt=(l.a.Footer,l.a.Sider),ct=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];if(!Object(v.j)())return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(me,{})});return Object(g.jsxs)(l.a,{className:"h-screen",children:[Object(g.jsx)(rt,{collapsible:!0,collapsed:n,onCollapse:function(e){return r(e)},children:Object(g.jsx)(F,{collapsed:n})}),Object(g.jsxs)(l.a,{className:"site-layout",children:[Object(g.jsx)(nt,{className:"site-layout-background",style:{padding:0},children:Object(g.jsxs)(u.a,{mode:"horizontal",style:{float:"right",width:"auto"},children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(be.a,{})},"notification"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(je.a,{})},"mail"),Object(g.jsx)(u.a.SubMenu,{icon:Object(g.jsx)(Oe.a,{}),children:Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(pe.a,{}),onClick:function(){Object(v.q)(null),window.location.reload(!1)},children:"Sign Out"},"logout")},"profile")]})}),Object(g.jsx)(at,{style:{margin:"0 16px"},children:Object(g.jsx)("div",{style:{padding:10,height:"calc(100vh - 90px)",overflowY:"auto"},children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{exact:!0,path:"/",children:Object(g.jsx)(Ee,{})}),Object(g.jsx)(s.a,{exact:!0,path:"/sales-reports",children:Object(g.jsx)(I,{page:"sales"})}),Object(g.jsx)(s.a,{exact:!0,path:"/purchase-reports",children:Object(g.jsx)(I,{page:"purchase"})}),Object(g.jsx)(s.a,{exact:!0,path:"/sales",children:Object(g.jsx)(tt,{page:"sales"})}),Object(g.jsx)(s.a,{exact:!0,path:"/purchases",children:Object(g.jsx)(tt,{page:"purchase"})}),Object(g.jsx)(s.a,{exact:!0,path:"/receipts",children:Object(g.jsx)(tt,{page:"receipts"})}),Object(g.jsx)(s.a,{exact:!0,path:"/payments",children:Object(g.jsx)(tt,{page:"payments"})}),Object(g.jsx)(s.a,{exact:!0,path:"/customers",children:Object(g.jsx)(tt,{page:"customer"})}),Object(g.jsx)(s.a,{exact:!0,path:"/vendors",children:Object(g.jsx)(tt,{page:"vendor"})})]})})})]})]})};_.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(i.a,{children:Object(g.jsx)(ct,{})})}),document.getElementById("root"))},87:function(e,t,n){"use strict";t.a=[{label:"Customer Code",name:"code",type:"input",inputType:"text"},{label:"Customer Name",name:"name",type:"input",inputType:"text"},{label:"Mobile",name:"mobile",type:"input",inputType:"text"},{label:"Division",name:"companyId",type:"select",inputType:"text",list:"divisions"},{label:"GST Number",name:"gstNumber",type:"input",inputType:"text"}]}},[[322,1,2]]]);
//# sourceMappingURL=main.7d56308d.chunk.js.map