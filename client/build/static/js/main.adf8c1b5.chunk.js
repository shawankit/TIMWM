(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[0],{101:function(e,t,n){"use strict";var a=n(1),r=n(12),c=n(91),i=n(2),_=["label","lcol","icol","placeholder"];t.a=function(e){var t=e.label,n=e.lcol,o=e.icol,s=e.placeholder,l=Object(r.a)(e,_);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{span:n||4,className:"mb-3",children:Object(i.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(i.jsx)(c.a,{span:o||8,className:"mb-3",children:Object(i.jsx)("input",Object(a.a)(Object(a.a)({},l),{},{placeholder:s||t,className:"w-full py-2 px-2 mt-2 border-2"}))})]})}},142:function(e,t,n){"use strict";var a=n(7),r=n(5),c=n(4),i=n(1),_=n(12),o=n(0),s=n(171),l=n(87),u=n(324),d=n(37),m=n(323),b=n(22),p=n(2),j=["index"],O=["title","editable","children","dataIndex","record","handleSave","items","handleTaxInput"],f=function(e){e.index;var t=Object(_.a)(e,j);return Object(p.jsx)("tr",Object(i.a)({},t))},h=function(e){e.title;var t=e.editable,n=e.children,a=e.dataIndex,r=e.record,o=e.handleSave,u=e.items,d=e.handleTaxInput,m=Object(_.a)(e,O),b=function(e,t){if(r.taxRow)d(Object(i.a)(Object(i.a)({},r),{},{total:""==t?0:parseFloat(t)}));else{var n={};n="categoryName"===a?{categoryName:u[t].name,itemId:t,rate:null,itemCode:u[t].code}:Object(c.a)({},a,""==t?0:parseFloat(t)),o(Object(i.a)(Object(i.a)({},r),n))}},j=n;return(!("total"!=a||!t)||t&&!r.taxRow)&&(j="Total Amount"!=r.categoryName&&"Taxable Value"!=r.categoryName?Object(p.jsx)(p.Fragment,{children:"categoryName"!==a?Object(p.jsx)(s.a,{className:"w-full",onChange:function(e){return b(0,e.target.value)},value:r[a]}):Object(p.jsx)(l.a,{placeholder:"Select Items",showSearch:!0,optionFilterProp:"children",showArrow:!1,value:null===r||void 0===r?void 0:r.itemId,onChange:function(e){return b(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},className:"w-full",children:Object.values(u).map((function(e,t){return Object(p.jsx)(Option,{value:e.id,children:e.name},t)}))},"itemId")}):Object(p.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:n})),Object(p.jsx)("td",Object(i.a)(Object(i.a)({},m),{},{children:j}))};t.a=function(e){var t=e.setTransactions,n=e.transactions,c=e.items,_=e.notEditable,s=e.invoiceDetails,l=e.setParentTaxableRows,j=Object(o.useState)([]),O=Object(r.a)(j,2),x=O[0],v=O[1];Object(o.useEffect)((function(){v(n||[])}),[n]);var E=function(e,t){return Object(p.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})},D=[{title:"Item Name",dataIndex:"categoryName",width:"35%",editable:!_},{title:"Item Code",dataIndex:"itemCode",width:"15%"},{title:"Quantity",dataIndex:"quantity",width:"10%",editable:!_},{title:"Taxable Value",dataIndex:"total",width:"20%",render:E,editable:!_}];_||D.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,n){return!n.taxRow&&Object(p.jsx)(u.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var n=x.filter((function(t){return t.key!==e}));v(n),t(n)}(n.key)},children:Object(p.jsx)("a",{children:"Delete"})})}});var y=function(e){var n=Object(a.a)(x),r=n.findIndex((function(t){return e.key===t.key})),c=n[r];n.splice(r,1,Object(i.a)(Object(i.a)({},c),e)),t(n)},g=2,M={key:"taxRow"+g++,categoryName:"IGST",taxRow:!0,fieldName:"igst",total:s.igst||0},C={key:"taxRow"+g++,categoryName:"CGST",taxRow:!0,fieldName:"cgst",total:s.cgst||0},P={key:"taxRow"+g++,categoryName:"SGST",taxRow:!0,fieldName:"sgst",total:s.sgst||0},I={key:"taxRow"+g++,categoryName:"Cess",taxRow:!0,fieldName:"cess",total:s.cess||0},A={key:"taxRow"+g++,categoryName:"Round Off",taxRow:!0,fieldName:"roundOff",total:s.roundOff||0},k=Object(o.useState)([M,C,P,I,A]),T=Object(r.a)(k,2),w=T[0],R=T[1];Object(o.useEffect)((function(){R(Object(a.a)(w.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{total:s[e.fieldName]||0})}))))}),[s]);var N=function(e){var t=Object(a.a)(w),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(i.a)(Object(i.a)({},r),e)),R(t),l(t)},S={body:{row:f,cell:h}},L=D.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{onCell:function(t,n){var a={},r=["Total Amount","Taxable Value","IGST","CGST","SGST","Cess","Round Off"];return r.includes(t.categoryName)&&"categoryName"==e.dataIndex&&(a={colSpan:3}),!r.includes(t.categoryName)||"quantity"!=e.dataIndex&&"rate"!=e.dataIndex&&"itemCode"!=e.dataIndex||(a={colSpan:0}),e.editable?Object(i.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:y,items:c,handleTaxInput:N},a):a}})})),B=x.reduce((function(e,t){return e+t.total}),0),U=w.reduce((function(e,t){return e+parseFloat(t.total||0)}),0),K={key:"taxRow"+g++,categoryName:"Taxable Value",total:_?s.taxableAmount:B,render:E,taxRow:!0},W={key:"taxRow"+g++,categoryName:"Total Amount",taxRow:!0,total:_?s.totalValue:B+U};return Object(p.jsxs)("div",{children:[_?null:Object(p.jsx)(d.a,{onClick:function(){var e={key:Object(b.n)(),categoryName:"Select Item",rate:"0",quantity:"0",total:0};v([].concat(Object(a.a)(x),[e]))},type:"primary",style:{marginBottom:16},children:"Add a item"}),Object(p.jsx)(m.a,{components:S,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:[].concat(Object(a.a)(x),[K],Object(a.a)(w),[W]),columns:L,pagination:!1})]})}},143:function(e,t,n){"use strict";var a=n(17),r=n(10),c=n.n(r),i=n(16),_=[{label:"Customer Code",name:"code",type:"input",inputType:"text"},{label:"Customer Name",name:"name",type:"input",inputType:"text"},{label:"Mobile",name:"mobile",type:"input",inputType:"text"},{label:"Division",name:"companyId",type:"select",inputType:"text",list:"divisions",getData:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.t)();case 2:return n=e.sent,console.log(n),e.abrupt("return",null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{label:"GST Number",name:"gstNumber",type:"input",inputType:"text"}];t.a=_},145:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(120),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(101),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(40),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_common_SelectField__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(146),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(210),_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(211),_util_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(22),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__),CustomerForm=function CustomerForm(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,page=_ref.page,FieldData=Object(_util_util__WEBPACK_IMPORTED_MODULE_15__.e)(page,"form_data"),initialData=FieldData.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(initialData),_useState2=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],onChange=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t,n){var a,r,c,i,_,o,s;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,n),!t.filterDependentMaster){e.next=8;break}return r=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(t.filterDependentMaster,3),c=r[0],i=r[1],_=r[2],e.next=5,i(page,n);case 5:o=e.sent,setMasterData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},masterData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},c,o))),a=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},a),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},_,""));case 8:t.populateParentMaster&&(s=t.populateParentMaster(masterData,n),a=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},a),s)),setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),a));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),selectFieldList=FieldData.filter((function(e){return"select"==e.type})),initialMasterData=selectFieldList.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.list,[]))}),{}),_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(initialMasterData),_useState4=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),masterData=_useState4[0],setMasterData=_useState4[1],fetchCompanies=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_api__WEBPACK_IMPORTED_MODULE_10__.t)();case 2:n=e.sent,setDivisions(null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n,a;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=0;case 2:if(!(n<selectFieldList.length)){e.next=11;break}return a=selectFieldList[n],e.next=6,a.getData(page);case 6:t[a.list]=e.sent;case 8:n++,e.next=2;break;case 11:setMasterData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},masterData),t)),setFormData(data);case 13:case"end":return e.stop()}}),e)}))),[data]);var onSubmit=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var n,a,r,c,i;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{type:page}),console.log("finalData",n),!data){e.next=10;break}return e.next=5,Object(_util_util__WEBPACK_IMPORTED_MODULE_15__.m)(page)(data.id,n);case 5:r=e.sent,console.log(r),1==(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated ".concat(page," details"),"success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=15;break;case 10:return e.next=12,Object(_util_util__WEBPACK_IMPORTED_MODULE_15__.a)(page)(n);case 12:i=e.sent,console.log(i),1==(null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully added ".concat(page," details"),"success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 15:reset(),callback();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData),setEditData(null)};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:FieldData.map((function(field){var _eval;return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:"vendor"===page?field.label.replace("Customer","Vendor"):field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_12__.a,{label:field.label,option:null===(_eval=eval(masterData[field.list]))||void 0===_eval?void 0:_eval.map((function(e){return{value:e.value,text:e.label}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:"",showArrow:!1,onChange:function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",onSelectChange(field,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},field.name)}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__.a,{}),children:data?"Edit":"Add"})]})})]})})};__webpack_exports__.a=CustomerForm},146:function(e,t,n){"use strict";var a=n(1),r=n(12),c=n(87),i=n(91),_=n(2),o=["label","lcol","icol","option","selected"],s=c.a.Option;t.a=function(e){var t=e.label,n=e.lcol,l=e.icol,u=e.option,d=(e.selected,Object(r.a)(e,o));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(i.a,{span:n||4,className:"mb-3",children:Object(_.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(_.jsx)(i.a,{span:l||8,className:"mb-3",children:Object(_.jsx)("div",{className:"mt-5",children:Object(_.jsx)(c.a,Object(a.a)(Object(a.a)({className:"w-full",placeholder:t},d),{},{children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(_.jsx)(s,{value:e.value,children:e.text},t)}))}))})})]})}},16:function(e,t,n){"use strict";n.d(t,"s",(function(){return i})),n.d(t,"A",(function(){return _})),n.d(t,"z",(function(){return o})),n.d(t,"G",(function(){return m})),n.d(t,"H",(function(){return b})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return j})),n.d(t,"q",(function(){return O})),n.d(t,"w",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"D",(function(){return x})),n.d(t,"n",(function(){return v})),n.d(t,"y",(function(){return E})),n.d(t,"v",(function(){return D})),n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return g})),n.d(t,"i",(function(){return M})),n.d(t,"F",(function(){return C})),n.d(t,"t",(function(){return P})),n.d(t,"e",(function(){return I})),n.d(t,"B",(function(){return A})),n.d(t,"l",(function(){return k})),n.d(t,"u",(function(){return T})),n.d(t,"f",(function(){return w})),n.d(t,"C",(function(){return R})),n.d(t,"m",(function(){return N})),n.d(t,"x",(function(){return S})),n.d(t,"h",(function(){return L})),n.d(t,"E",(function(){return B})),n.d(t,"o",(function(){return U})),n.d(t,"c",(function(){return K})),n.d(t,"a",(function(){return W})),n.d(t,"d",(function(){return F})),n.d(t,"b",(function(){return V}));var a=n(194),r=n.n(a),c=new(n(207).a),i=function(){return c.get("AUTH")},_=function(e){return c.set("AUTH",JSON.stringify(e),{path:"/"}),e},o=function(){c.remove("AUTH",{path:"/"})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="".concat(e);t&&Object.keys(t).forEach((function(e){return a=a.replace(":".concat(e),t[e])}));var r={};if(n){Object.keys(n).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(r[e]=n[e])}));var c=new URLSearchParams(r);a+="?".concat(c.toString())}return a},l="http://".concat(window.location.hostname,":8000"),u=r.a.create({baseURL:l}),d=function(){return{"content-type":"application/json","x-access-token":i().token}},m=function(e){return u.post("/auth/mobile/sendOTP",{mobileNumber:e})},b=function(e,t){return u.post("/auth/mobile/user",{mobileNumber:e,otp:t})},p=function(e,t){return u.post("/sales",{sales:e,type:t},{headers:d()})},j=function(e,t){return u.post("/bulk/receipts",{receipts:e,type:t},{headers:d()})},O=function(e,t,n,a,r){return u.get(s("/invoices",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:d()})},f=function(e){return u.get("/invoices/".concat(e),{headers:d()})},h=function(e){return u.post("/invoices",e,{headers:d()})},x=function(e,t){return u.put("/invoices/".concat(e),t,{headers:d()})},v=function(e){return u.delete("/invoices/".concat(e),{headers:d()})},E=function(e){return u.get("/reports?type=".concat(e),{headers:d()})},D=function(e,t,n,a){return u.get(s("/fund-reports",{},{reportType:e,date:t,month:n,year:a}),{headers:d()})},y=function(e,t,n,a,r){return u.get(s("/receipts",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:d()})},g=function(e){return u.delete("/receipts/".concat(e),{headers:d()})},M=function(e){return u.post("/receipts",e,{headers:d()})},C=function(e,t){return u.put("/receipts/".concat(e),t,{headers:d()})},P=function(e,t,n){return u.get(s("/companies",{},{search:e,offset:t,limit:n}),{headers:d()})},I=function(e){return u.post("/companies",e,{headers:d()})},A=function(e,t){return u.put("/companies/".concat(e),t,{headers:d()})},k=function(e){return u.delete("/companies/".concat(e),{headers:d()})},T=function(e,t,n,a,r){return u.get(s("/customers",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:d()})},w=function(e){return u.post("/customers",e,{headers:d()})},R=function(e,t){return u.put("/customers/".concat(e),t,{headers:d()})},N=function(e){return u.delete("/customers/".concat(e),{headers:d()})},S=function(e,t,n){return u.get(s("/items",{},{search:e,offset:t,limit:n}),{headers:d()})},L=function(e){return u.post("/items",e,{headers:d()})},B=function(e,t){return u.put("/items/".concat(e),t,{headers:d()})},U=function(e){return u.delete("/items/".concat(e),{headers:d()})},K=function(e){return function(t,n,a){return u.get(s("/".concat(e),{},{search:t,offset:n,limit:a}),{headers:d()})}},W=function(e){return function(t){return u.post("/".concat(e),t,{headers:d()})}},F=function(e){return function(t,n){return u.put("/".concat(e,"/").concat(t),n,{headers:d()})}},V=function(e){return function(t){return u.delete("/".concat(e,"/").concat(t),{headers:d()})}}},167:function(e,t,n){"use strict";t.a=[{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"date"},{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Taxable Amount",name:"taxableAmount",inputType:"number",list:"customerType"},{label:"Total Amount",name:"totalValue",inputType:"number",list:"customerType"}]},170:function(e,t,n){"use strict";t.a=[{label:"Invoice Number",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"date"},{label:"Customer",name:"customerId",type:"select",inputType:"text",list:"customers"},{label:"Division - Company",name:"companyId",type:"select",inputType:"text",list:"divisions"}]},174:function(e,t,n){},202:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(120),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(101),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(40),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_common_SelectField__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(146),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(210),_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(173),_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(211),_common_EditableTable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(142),moment__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(33),moment__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_17__),_util_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(22),_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(170),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__),InvoiceForm=function InvoiceForm(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,page=_ref.page,initialData=_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__.a.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},initialData),{},{invoiceDate:moment__WEBPACK_IMPORTED_MODULE_17___default()().format("YYYY-MM-DD"),transactions:[],labourCharges:0,claimAmount:0,taxableAmount:0,igst:0,cgst:0,sgst:0,cess:0,roundOff:0,tcs:0,totalValue:0})),_useState2=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState4=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState6=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),divisions=_useState6[0],setDivisions=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({}),_useState8=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),items=_useState8[0],setItems=_useState8[1],fetchData=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n,a,r,c,i,_;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="sales"==page||"receipts"==page?"customer":"vendor",e.next=3,Object(_api__WEBPACK_IMPORTED_MODULE_10__.u)(r);case 3:return c=e.sent,setCustomers(null===(t=c.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.code," - ").concat(e.name),companyId:e.companyId}}))),e.next=7,Object(_api__WEBPACK_IMPORTED_MODULE_10__.t)();case 7:return i=e.sent,setDivisions(null===(n=i.data.entity)||void 0===n?void 0:n.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}}))),e.next=11,Object(_api__WEBPACK_IMPORTED_MODULE_10__.x)();case 11:_=e.sent,setItems(null===(a=_.data.entity)||void 0===a?void 0:a.rows.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.id,t))}),{}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetchData();case 2:data&&(t=data.transactions.map((function(e,t){return{id:e.id,key:t,itemId:e.item.id,itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:e.total}})),setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},data),{},{invoiceDate:moment__WEBPACK_IMPORTED_MODULE_17___default()(data.invoiceDate,"DD-MM-YYYY").format("YYYY-MM-DD"),transactions:t})));case 3:case"end":return e.stop()}}),e)}))),[data]);var onChange=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(e,t){if("customerId"==e){var n=customers.find((function(e){return e.value==t}));formData.companyId=n?n.companyId:null}setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e,t)))},onSubmit=function(){var e=Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var n,a,r,c,i,_;return _home_ankit_Ankit_fm_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(formData.transactions&&0!=(null===(n=formData.transactions)||void 0===n?void 0:n.length)){e.next=3;break}return Object(_util_util__WEBPACK_IMPORTED_MODULE_18__.l)("Please insert atleast one item"),e.abrupt("return");case 3:if(""!=formData.customerId){e.next=6;break}return Object(_util_util__WEBPACK_IMPORTED_MODULE_18__.l)("Please select customer"),e.abrupt("return");case 6:if(formData.taxableAmount=formData.transactions.reduce((function(e,t){return e+t.total}),0),a=["igst","cgst","sgst","cess","roundOff","tcs"],formData.totalValue=formData.taxableAmount+a.reduce((function(e,t){return e+(formData[t]?formData[t]:0)}),0),formData.type=page,!data){e.next=19;break}return e.next=14,Object(_api__WEBPACK_IMPORTED_MODULE_10__.D)(data.id,formData);case 14:c=e.sent,console.log(c),1==(null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.status)?(sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated invoice details","success"),reset(),callback()):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=24;break;case 19:return e.next=21,Object(_api__WEBPACK_IMPORTED_MODULE_10__.g)(formData);case 21:_=e.sent,console.log(_),1==(null===_||void 0===_||null===(i=_.data)||void 0===i?void 0:i.status)?(sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully generated invoice details","success"),reset(),callback()):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData),setEditData(null)},setTransactions=function(e){setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{transactions:e}))},setTaxableRows=function(e){var t=e.reduce((function(e,t){return Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.fieldName,t.total))}),{});setFormData(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_fm_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),t))};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:_data_InvoiceFormData__WEBPACK_IMPORTED_MODULE_19__.a.map((function(field){return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:"vendor"===page?field.label.replace("Customer","Vendor"):field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_12__.a,{label:field.label,option:eval(field.list).map((function(e){return{value:e.value,text:e.label}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:"",showArrow:!1,onChange:function(e){return onSelectChange(field.name,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},field.name)}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_common_EditableTable__WEBPACK_IMPORTED_MODULE_16__.a,{setTransactions:setTransactions,transactions:formData&&formData.transactions,items:items,notEditable:!1,invoiceDetails:formData,setParentTaxableRows:setTaxableRows})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right mt-5",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:data?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__.a,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__.a,{}),children:data?"Update Invoice":"Generate Invoice"})]})})]})})};__webpack_exports__.a=InvoiceForm},218:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"l",(function(){return y})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return M})),n.d(t,"n",(function(){return C})),n.d(t,"d",(function(){return P})),n.d(t,"g",(function(){return I})),n.d(t,"f",(function(){return A})),n.d(t,"i",(function(){return k})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return w})),n.d(t,"h",(function(){return R})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return S})),n.d(t,"m",(function(){return L}));var a=n(1),r=n(5),c=n(33),i=n.n(c),_=n(40),o=n.n(_),s=n(16),l=[{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Receipt Date",name:"receiptDate",type:"input",inputType:"text"},{label:"Nature",name:"nature",type:"input",inputType:"text"},{label:"Receipt VIA",name:"via",inputType:"text",list:"customerType"},{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Amount",name:"amount",inputType:"number",list:"customerType"}],u=n(167),d=n(143),m=[{label:"Name",name:"name",type:"input",inputType:"text"},{label:"Code",name:"code",type:"input",inputType:"text"},{label:"UOM",name:"uom",type:"input",inputType:"text"}],b=[{label:"Company Name",name:"name",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"}],p=[{label:"Name",name:"name",type:"input",inputType:"text"}],j=n(17),O=n(10),f=n.n(O),h=[{label:"Ledger Code",name:"code",type:"input",inputType:"text"},{label:"Ledger Name",name:"name",type:"input",inputType:"text"},{label:"Group",name:"groupId",type:"select",inputType:"text",list:"groups",getData:function(){var e=Object(j.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.c)("groups")();case 2:return n=e.sent,e.abrupt("return",null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.name)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{label:"Balance As On",name:"balanceDate",type:"input",inputType:"date"},{label:"Balance",name:"balance",type:"input",inputType:"number"}],x=h,v=[{label:"Date",name:"dated",type:"input",inputType:"date"},{label:"Description",name:"description",type:"input",inputType:"text"}],E=[{label:"Date",name:"receiptDate",type:"input",inputType:"date"},{label:"Division",name:"companyId",type:"select",inputType:"text",list:"divisions",getData:function(){var e=Object(j.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.t)();case 2:return n=e.sent,console.log(n),e.abrupt("return",null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," (").concat(e.name,")")}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterDependentMaster:["customers",function(){var e=Object(j.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={companyIds:[n]},e.next=3,Object(s.u)("receipts"===t?"customer":"vendor","",0,void 0,JSON.stringify(r));case 3:return c=e.sent,console.log(c),e.abrupt("return",null===(a=c.data.entity)||void 0===a?void 0:a.rows.map((function(e){return{value:e.id,label:"".concat(e.name," (").concat(e.code,")"),companyId:e.companyId}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),"customerId"]},{label:"Customer",name:"customerId",type:"select",inputType:"text",list:"customers",getData:function(){var e=Object(j.a)(f.a.mark((function e(t){var n,a,r,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",e.next=3,Object(s.u)("receipts"===t?"customer":"vendor",a,0);case 3:return r=e.sent,e.abrupt("return",null===(n=r.data.entity)||void 0===n?void 0:n.rows.map((function(e){return{value:e.id,label:"".concat(e.name," (").concat(e.code,")"),companyId:e.companyId}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),filterDependentMaster:["invoices",function(){var e=Object(j.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={customerIds:[n]},e.next=3,Object(s.q)("receipts"===t?"sales":"purchase","",0,void 0,JSON.stringify(r));case 3:return c=e.sent,console.log(c),e.abrupt("return",null===(a=c.data.entity)||void 0===a?void 0:a.rows.map((function(e){return{value:e.id,label:e.invoiceNumber,companyId:e.companyId,customerId:e.customerId}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),"invoiceId"],populateParentMaster:function(e,t){var n=e.customers.find((function(e){return e.value===t}));return{companyId:null===n||void 0===n?void 0:n.companyId}}},{label:"Nature",name:"nature",type:"select",inputType:"text",list:"natures",getData:function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["advance","adjust"].map((function(e){return{value:e,label:e[0].toUpperCase()+e.slice(1)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),populateParentMaster:function(e,t){return"advance"===t?{invoiceId:""}:{}}},{label:"Invoice Number",name:"invoiceId",type:"select",inputType:"text",list:"invoices",getData:function(){var e=Object(j.a)(f.a.mark((function e(t){var n,a,r,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",e.next=3,Object(s.q)("receipts"===t?"sales":"purchase",a,0);case 3:return r=e.sent,e.abrupt("return",null===(n=r.data.entity)||void 0===n?void 0:n.rows.map((function(e){return{value:e.id,label:e.invoiceNumber,companyId:e.companyId,customerId:e.customerId}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),populateParentMaster:function(e,t){var n=e.invoices.find((function(e){return e.value===t}));return{companyId:null===n||void 0===n?void 0:n.companyId,customerId:null===n||void 0===n?void 0:n.customerId}}},{label:"Amount",name:"amount",type:"input",inputType:"number"},{label:"VIA",name:"via",type:"input",inputType:"text"}],D=E;function y(e){o()({text:e,icon:"error",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-primary",closeModal:!0}}})}function g(e){o()({text:e,icon:"info",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-info",closeModal:!0}}})}function M(e,t,n){o()({text:e,icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-danger",closeModal:!0}}}).then((function(e){e?t():n()}))}function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var P=function(e,t){var n=Object(r.a)(t,3),a=n[0],c=n[1],_=n[2],o=i()(e);return o.set("hour",a),o.set("minute",c),o.set("second",_),o.toDate()},I=function(e,t){return"purchase"!=t&&"payments"!=t||"customerName"!=e.name&&"customerCode"!=e.name?"payments"!=t||"receiptDate"!=e.name&&"via"!=e.name?"vendor"!=t||"name"!=e.name&&"code"!=e.name?e.label:e.label.replace("Customer","Vendor"):e.label.replace("Receipt","Payment"):e.label.replace("Customer","Vendor")},A=function(e){return"sales"===e?"Sale Invoices":"purchase"===e?"Purchase Invoices":"receipts"===e?"Receipts":"payments"===e?"Payments":"customer"===e?"Customers":"vendor"===e?"Vendors":"company"===e?"Divisions":"item"===e?"Items":"groups"===e?"Groups":"ledgers"===e?"Ledgers":"journals"===e?"Journals":void 0},k=function(e,t){var n,r,c;return["sales","purchase","receipts","payments"].includes(e)?Object(a.a)(Object(a.a)({},t),{},{invoiceNumber:"receipts"==e||"payments"==e?null===(n=t.invoice)||void 0===n?void 0:n.invoiceNumber:t.invoiceNumber,customerName:null===(r=t.customer)||void 0===r?void 0:r.name,customerCode:null===(c=t.customer)||void 0===c?void 0:c.code,companyName:t.company.name,division:t.company.division}):"journals"===e?Object(a.a)(Object(a.a)({},t),{},{ledgerNames:t.journalLedgers.map((function(e){return e.ledger.name})).toString()}):Object(a.a)({},t)},T=function(e){return"receipts"==e||"payments"==e?s.r:"purchase"==e||"sales"==e?s.q:"customer"==e||"vendor"==e?s.u:"company"==e?function(e,t,n,a,r){return Object(s.t)(t,n,a)}:"item"==e?function(e,t,n,a,r){return Object(s.x)(t,n,a)}:function(e,t,n,a,r){return Object(s.c)(e)(t,n,a)}},w=function(e,t){return"receipts"==e||"payments"==e?"form_data"==t?D:l:"purchase"==e||"sales"==e?u.a:"customer"==e||"vendor"==e?d.a:"company"==e?b:"item"==e?m:"groups"==e?p:"ledgers"==e?x:"journals"==e?v:void 0},R=function(e){return"receipts"==e||"payments"==e||("purchase"==e||"sales"==e)},N=function(e){return"receipts"==e||"payments"==e?s.p:"purchase"==e||"sales"==e?s.n:"customer"==e||"vendor"==e?s.m:"company"==e?s.l:"item"==e?s.o:Object(s.b)(e)},S=function(e){return"customer"==e||"vendor"==e?s.f:"receipts"==e||"payments"==e?s.i:"company"==e?s.e:"item"==e?s.h:Object(s.a)(e)},L=function(e){return"customer"==e||"vendor"==e?s.C:"receipts"==e||"payments"==e?s.F:"company"==e?s.B:"item"==e?s.E:Object(s.d)(e)}},322:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),i=n.n(c),_=n(42),o=(n(174),n(5)),s=n(38),l=(n(175),n(218),n(326)),u=n(72),d=n(331),m=n(7),b=n(1),p=n(17),j=n(10),O=n.n(j),f=(n(121),n(328)),h=n(120),x=n(91),v=n(323),E=n(16),D=(n(167),n(33)),y=n.n(D),g=n(2),M=f.a.Title,C=function(e){var t=e.page,n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=Object(a.useState)(null),c=Object(o.a)(r,2),i=c[0],_=c[1],s=Object(a.useState)(null),l=Object(o.a)(s,2),u=l[0],d=l[1],j=function(){var e=Object(p.a)(O.a.mark((function e(){var a,r,c,i,o,s,l,u,m,p,j,f,h,x,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.y)(t,"");case 2:for(r=e.sent,console.log("response",r),c=null===(a=r.data)||void 0===a?void 0:a.entity,i=P(2023),o={},s={},l=0;l<c.length;l++)u=c[l],m="".concat(n[u.month-1].slice(0,3),"-").concat(u.year.toString().slice(-2)),o[u.division]||(o[u.division]={}),o[u.division][m]=u.taxable_amount,s[u.name]||(s[u.name]={}),s[u.name][m]||(s[u.name][m]=0),s[u.name][m]+=u.taxable_amount;for(f in p=[],j=function(e){var t=o[e],n={};i.forEach((function(e){n[e]=t[e]?t[e]:0})),p.push(Object(b.a)({division:e},n))},o)j(f);for(v in _(p),h=[],x=function(e){var t=s[e],n={};i.forEach((function(e){n[e]=t[e]?t[e]:0})),h.push(Object(b.a)({company:e},n))},s)x(v);d(h);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){j()}),[t]);var D=P(2023).map((function(e){return{label:e,name:e,render:function(e,t){return Object(g.jsx)("div",{children:e.toLocaleString("en-IN")})}}})),y=function(e){return e.map((function(e){return{title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px",render:e.render}}))},C=function(e,t){return Object(g.jsx)("div",{children:e})},I=y([{label:"Division",name:"division",render:C}].concat(Object(m.a)(D))),A=y([{label:"Company",name:"company",render:C}].concat(Object(m.a)(D)));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(M,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Division"}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(v.a,{dataSource:i,columns:I,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(M,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Company"}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(v.a,{dataSource:u,columns:A,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},P=function(e){for(var t=["April","May","June","July","August","September","October","November","December","January","February","March"],n=[],a=new Date,r=a.getMonth(),c=a.getFullYear(),i=0;i<t.length;i++){var _=t[i],o=i<9?e-1:e;n.push("".concat(_.slice(0,3),"-").concat(o.toString().slice(-2)))}return c===e&&r<3&&(n=n.slice(0,12-(3-r))),c===e-1&&r>=3&&(n=n.slice(0,r-3)),n},I=function(e){var t=e.page;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(g.jsxs)(d.a.Item,{children:["sales"==t?"Sales":"Purchase"," Report"]})}),Object(g.jsx)(C,{page:t})]})},A=n(37),k=n(332),T=n(333),w=n(334),R=n(335),N=n(336),S=n(337),L=n(338),B=n(339),U=n(340),K=n(341),W=n(342),F=n(343),V=n(344),q=function(e){e.collapsed;var t=Object(a.useState)(!0),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(void 0),s=Object(o.a)(i,2),l=s[0],d=s[1];Object(a.useEffect)((function(){var e=function(){return d(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){c(!(l<=800))}),[l]);var m="/"===window.location.pathname?["fund-reports"]:[window.location.pathname.replace("/","")];return Object(g.jsxs)("div",{className:"nav-container  h-screen",children:[Object(g.jsxs)("div",{className:"logo-container",children:[Object(g.jsx)(f.a.Title,{level:2,className:"logo",children:Object(g.jsx)(_.b,{to:"/",children:"TIMWM"})}),Object(g.jsx)(A.a,{className:"menu-control-container",onClick:function(){return c(!r)},children:Object(g.jsx)(k.a,{})})]}),r&&Object(g.jsxs)(u.a,{theme:"dark",mode:"inline",defaultOpenKeys:["reports","master-data"],defaultSelectedKeys:m,subMenuOpenDelay:.2,children:[Object(g.jsxs)(u.a.SubMenu,{title:"Reports",icon:Object(g.jsx)(T.a,{}),children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(w.a,{}),children:Object(g.jsx)(_.b,{to:"/",children:"Fund Reports"})},"fund-reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(w.a,{}),children:Object(g.jsx)(_.b,{to:"/sales-reports",children:"Sales Report"})},"sales-reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(R.a,{}),children:Object(g.jsx)(_.b,{to:"/purchase-reports",children:"Purchase Report"})},"purchase-reports")]},"reports"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(N.a,{}),children:Object(g.jsx)(_.b,{to:"/sales",children:"Sales"})},"sales"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(S.a,{}),children:Object(g.jsx)(_.b,{to:"/purchases",children:"Purchases"})},"purchases"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(L.a,{}),children:Object(g.jsx)(_.b,{to:"/receipts",children:"Receipts"})},"receipts"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(B.a,{}),children:Object(g.jsx)(_.b,{to:"/payments",children:"Payments"})},"payments"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(B.a,{}),children:Object(g.jsx)(_.b,{to:"/journals",children:"Journals"})},"journals"),Object(g.jsxs)(u.a.SubMenu,{title:"Master Data",icon:Object(g.jsx)(U.a,{}),children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(K.a,{}),children:Object(g.jsx)(_.b,{to:"/customers",children:"Customers"})},"customers"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(W.a,{}),children:Object(g.jsx)(_.b,{to:"/vendors",children:"Vendors"})},"vendors"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(F.a,{}),children:Object(g.jsx)(_.b,{to:"/divisions",children:"Divisions"})},"divisions"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(V.a,{}),children:Object(g.jsx)(_.b,{to:"/items",children:"Items"})},"items"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(V.a,{}),children:Object(g.jsx)(_.b,{to:"/groups",children:"Groups"})},"groups"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(V.a,{}),children:Object(g.jsx)(_.b,{to:"/ledgers",children:"Ledgers"})},"ledgers")]},"master-data")]})]})},Y=n(200),G=n(12),H=["children","type","className"],z=function(e){var t=e.children,n=e.type,a=void 0===n?"h1":n,r=e.className,c=void 0===r?"":r,i=Object(G.a)(e,H),_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},o=_[a]?_[a]:"h1";return Object(g.jsx)(o,Object(b.a)(Object(b.a)({className:"".concat(c)},i),{},{children:t}))},J=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,r=e.whiteSpace,c=void 0===r?"normal":r,i=e.onClick;return Object(g.jsx)("p",{className:"".concat(n),style:{whiteSpace:c},onClick:i,children:a})},Q=n.p+"static/media/cryptocurrency.1548aced.png",X=n.p+"static/media/login-bg.a6a7c455.jpg",Z=function(e){var t=e.loginContentHeading,n=e.loginContentDesc;return Object(g.jsxs)("div",{className:"md:min-h-screen relative p-6 py-8 md:py-16 md:px-9 overflow-hidden bg-gradient-secondary md:bg-transparent",children:[Object(g.jsxs)("div",{className:"relative z-10 max-w-md",children:[Object(g.jsx)("img",{src:Q,width:"170",height:"34",alt:"logo"}),Object(g.jsx)(z,{type:"h3",className:"text-2xl md:text-3xl md:mt-24 mt-5 mb-4 text-white",children:t}),Object(g.jsx)(J,{className:"text-white",children:n})]}),Object(g.jsx)("div",{className:"hidden md:block min-h-screen absolute w-full h-full top-0 left-0 z-0 login-bg",children:Object(g.jsx)("img",{src:X,layout:"fixed",objectFit:"cover",width:"1024",height:"1024",alt:"login bg"})})]})},$=function(e){var t=e.labelFor,n=void 0===t?"":t,a=e.variant,r=void 0===a?"medium":a,c=e.textColor,i=void 0===c?"text-gray-900":c,_=e.fontWeight,o=void 0===_?"font-bold":_,s=e.className,l=void 0===s?"block mb-2":s,u=e.children,d=e.labelDisable,m=void 0!==d&&d;return Object(g.jsx)("label",{htmlFor:"".concat(n),variant:{small:"small",medium:"medium",large:"large"}[r],className:"".concat({small:"text-sm",medium:"text-base font-bold",large:"text-lg"}[r]," ").concat(i," ").concat(o,"  ").concat(l," ").concat(m&&"opacity-60 pointer-events-none"),children:u})},ee=function(e){var t=e.disabled,n=e.error,a=(e.isRequired,e.register,e.id),r=e.name,c=e.type,i=e.maxLength,_=void 0===i?256:i,o=e.placeholder,s=e.variant,l=void 0===s?"outlineBottom":s,u=e.bg,d=void 0===u?"bg-lightGrey":u,m=e.fontSize,b=void 0===m?"text-base":m,p=(e.borderColor,e.borderRadius),j=void 0===p?"rounded":p,O=e.className,f=void 0===O?"":O,h=(e.onClick,e.value,e.defaultValue),x=e.onChangeValue,v=void 0===x?function(){}:x,E=e.inputLength;e.getValues;return Object(g.jsxs)("div",{className:"w-full mb-6",children:[Object(g.jsx)("input",{id:a,type:c,name:r,placeholder:o,variant:{normal:"normal",outline:"outline",outlineBottom:"outlineBottom",error:"error"}[l],className:"".concat({normal:"border-0",outline:"border-gray-200",outlineBottom:"border-b-gray-400",error:"border-error border-b-error"}[l]," w-full border text-gray-900 h-12 px-4 outline-none placeholder:text-grey-400 ").concat(d," ").concat(j," ").concat(b," ").concat(f," ").concat(t&&"opacity-60 pointer-events-none"," ").concat(n?" border border-error border-b-error":""),disabled:void 0!==t&&t,maxLength:_,onChange:function(e){v(e)},defaultValue:h}),n&&Object(g.jsx)("div",{className:"text-sm text-error pt-1",children:0!=n.length&&n.message}),E&&Object(g.jsxs)(J,{className:"text-xs text-gray-400 absolute bottom-2 right-2",children:[inputValue.length,"/",E]})]})},te=function(e){var t=e.type,n=void 0===t?"":t,a=e.children,r=e.variant,c=e.fontWeight,i=void 0===c?"font-medium":c,_=e.padding,o=void 0===_?"py-2 px-3":_,s=e.btnClass,l=void 0===s?"":s,u=e.imgClassName,d=void 0===u?"":u,m=e.imgSrc,b=e.imgWidth,p=e.imgHeight,j=e.imgAlt,O=void 0===j?"":j,f=e.onClick,h=void 0===f?function(){}:f,x=e.disabled,v=e.form,E=e.buttonRef;return Object(g.jsxs)("button",{type:n,variant:{primaryBtn:"primaryBtn",outlineBtn:"outlineBtn",normalBtn:"normalBtn",secondaryBtn:"secondaryBtn"}[r],className:"".concat({primaryBtn:"flex items-center justify-center bg-yellow-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",secondaryBtn:"flex items-center justify-center bg-blue-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",outlineBtn:"flex items-center justify-center bg-transparent border border-gray-200 rounded text-gray-500 text-base drop-shadow-btn disabled:bg-primary-100 disabled:text-primary-300",normalBtn:"flex items-center justify-center text-base"}[r]," ").concat(i," ").concat(o," ").concat(l," ").concat(m&&"pl-4 bg-red"," "),onClick:h,disabled:x,form:v,ref:E,children:[m?Object(g.jsx)("span",{className:"mx-2 flex items-center flex-shrink-0 ".concat(d),children:Object(g.jsx)("img",{src:m,width:b,height:p,alt:O})}):"",a]})},ne=function(e){var t=e.loginDetails,n=e.onSubmit,r=e.apierror,c=Object(a.useState)(10!=t.mobileNumber.length),i=Object(o.a)(c,2),_=(i[0],i[1]),s=Object(a.useState)(r),l=Object(o.a)(s,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){d(r)}),[r]),console.log("error",u),Object(g.jsx)("div",{className:"md:min-h-screen flex items-center px-6 py-14 bg-white lg:pl-20 lg:pr-32",children:Object(g.jsxs)("div",{className:"w-full max-w-md",children:[Object(g.jsx)(z,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:"Login"}),Object(g.jsx)(J,{className:"mb-6",children:"Enter your details to get sign in to your account"}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target[0].value;console.log(t.length,"mobileNumber"),10==t.length?n({mobileNumber:t}):d("Please enter valid mobile number")},children:[Object(g.jsx)($,{textColor:"text-gray-700",children:"Mobile Number"}),Object(g.jsx)("div",{className:"mt-2 flex",children:Object(g.jsx)(ee,{id:"mobileNumber",name:"mobileNumber",type:"number",className:"ml-1 rounded-none mb-0",placeholder:"Mobile Number",maxLength:10,isRequired:!0,onChangeValue:function(e){10!=e.target.value.toString().length?(_(!0),d("")):_(!1)},variant:"outlineBottom"})}),u&&0!=u.length&&Object(g.jsx)("div",{className:"text-sm text-red-700 -mt-5 mb-1",children:0!=u.length&&u}),Object(g.jsx)(J,{className:"mb-16 md:mb-10 text-sm text-gray-500",children:"Proceed To Enter PIN"}),Object(g.jsx)(te,{type:"submit",variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",children:"Proceed"})]})]})})},ae=n(14),re=n(15),ce=n(18),ie=n(19),_e=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"],oe=function(e){return"object"===typeof e},se=function(e){Object(ce.a)(n,e);var t=Object(ie.a)(n);function n(e){var a;return Object(ae.a)(this,n),(a=t.call(this,e)).getClasses=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!oe(e)&&!1!==e})).join(" ")},a.getType=function(){var e=a.props,t=e.isInputSecure,n=e.isInputNum;return t?"password":n?"tel":"text"},a.input=r.a.createRef(),a}return Object(re.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,n=e.shouldAutoFocus,a=this.input.current;a&&t&&n&&a.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,n=this.input.current;e.focus!==t&&n&&t&&(n.focus(),n.select())}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.separator,a=e.isLastChild,r=e.inputStyle,c=e.focus,i=e.isDisabled,_=e.hasErrored,o=e.errorStyle,s=e.focusStyle,l=e.disabledStyle,u=(e.shouldAutoFocus,e.isInputNum),d=e.index,m=e.value,p=e.className,j=(e.isInputSecure,Object(G.a)(e,_e));return Object(g.jsxs)("div",{className:p,style:{display:"flex",alignItems:"center"},children:[Object(g.jsx)("input",Object(b.a)({"aria-label":"".concat(0===d?"Please enter verification code. ":"").concat(u?"Digit":"Character"," ").concat(d+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},oe(r)&&r,c&&oe(s)&&s,i&&oe(l)&&l,_&&oe(o)&&o),placeholder:t,className:this.getClasses(r,c&&s,i&&l,_&&o),type:this.getType(),maxLength:"1",ref:this.input,disabled:i,value:m||""},j)),!a&&n]})}}]),n}(a.PureComponent),le=function(e){Object(ce.a)(n,e);var t=Object(ie.a)(n);function n(){var e;Object(ae.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeInput:0},e.getOtpValue=function(){return e.props.value?e.props.value.toString().split(""):[]},e.getPlaceholderValue=function(){var t=e.props,n=t.placeholder,a=t.numInputs;if("string"===typeof n){if(n.length===a)return n;n.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},e.handleOtpChange=function(t){(0,e.props.onChange)(t.join(""))},e.isInputValueValid=function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"===typeof t)&&1===t.trim().length},e.focusInput=function(t){var n=e.props.numInputs,a=Math.max(Math.min(n-1,t),0);e.setState({activeInput:a})},e.focusNextInput=function(){var t=e.state.activeInput;e.focusInput(t+1)},e.focusPrevInput=function(){var t=e.state.activeInput;e.focusInput(t-1)},e.changeCodeAtFocus=function(t){var n=e.state.activeInput,a=e.getOtpValue();a[n]=t[0],e.handleOtpChange(a)},e.handleOnPaste=function(t){t.preventDefault();var n=e.state.activeInput,a=e.props,r=a.numInputs;if(!a.isDisabled){for(var c=e.getOtpValue(),i=n,_=t.clipboardData.getData("text/plain").slice(0,r-n).split(""),o=0;o<r;++o)o>=n&&_.length>0&&(c[o]=_.shift(),i++);e.setState({activeInput:i},(function(){e.focusInput(i),e.handleOtpChange(c)}))}},e.handleOnChange=function(t){var n=t.target.value;e.isInputValueValid(n)&&e.changeCodeAtFocus(n)},e.handleOnKeyDown=function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32!==t.keyCode&&" "!==t.key&&"Spacebar"!==t.key&&"Space"!==t.key||t.preventDefault()},e.handleOnInput=function(t){if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var n=t.nativeEvent;null===n.data&&"deleteContentBackward"===n.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}},e.renderInputs=function(){for(var t=e.state.activeInput,n=e.props,a=n.numInputs,r=n.inputStyle,c=n.focusStyle,i=n.separator,_=n.isDisabled,o=n.disabledStyle,s=n.hasErrored,l=n.errorStyle,u=n.shouldAutoFocus,d=n.isInputNum,m=n.isInputSecure,b=n.className,p=[],j=e.getOtpValue(),O=e.getPlaceholderValue(),f=e.props["data-cy"],h=e.props["data-testid"],x=function(n){p.push(Object(g.jsx)(se,{placeholder:O&&O[n],index:n,focus:t===n,value:j&&j[n],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:n}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:i,inputStyle:r,focusStyle:c,isLastChild:n===a-1,isDisabled:_,disabledStyle:o,hasErrored:s,errorStyle:l,shouldAutoFocus:u,isInputNum:d,isInputSecure:m,className:b,"data-cy":f&&"".concat(f,"-").concat(n),"data-testid":h&&"".concat(h,"-").concat(n)},n))},v=0;v<a;v++)x(v);return p},e}return Object(re.a)(n,[{key:"render",value:function(){var e=this.props.containerStyle;return Object(g.jsx)("div",{style:Object.assign({display:"flex"},oe(e)&&e),className:oe(e)?"":e,children:this.renderInputs()})}}]),n}(a.Component);le.defaultProps={numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1};var ue=le,de=function(e){var t=e.onChange,n=e.otpValue,a=e.length,r=e.errorMessage;return Object(g.jsxs)("div",{className:"otp",children:[Object(g.jsx)(ue,{isInputNum:!0,value:n,onChange:function(e){t(e)},numInputs:a,hasErrored:(null===r||void 0===r?void 0:r.length)>0,placeholder:!1,containerStyle:{fontSize:"16px",color:"black"},inputStyle:{width:42,height:48,border:"1px solid #E5E5EB",marginRight:16,borderRadius:"7px",fontWeight:400,fontSize:"18px",lineHeight:"28px"},focusStyle:{outline:"none",border:"1px solid #9C9CAF",color:"#14142B"},errorStyle:{border:"1px solid #E64C4C",color:"#E64C4C"},shouldAutoFocus:!0}),r&&Object(g.jsx)(J,{className:"text-xs font-light text-error mt-1",children:r})]})},me=n(173),be=function(e){var t=e.handleLogin,n=e.loginDetails,r=e.editMobile,c=e.resendOtp,i=e.error,_=Object(a.useState)(""),s=Object(o.a)(_,2),l=s[0],u=s[1],d=Object(a.useState)(30),m=Object(o.a)(d,2),b=m[0],p=m[1];Object(a.useCallback)((function(){return p((function(e){return e-1}))}),[]);return Object(g.jsx)("div",{className:"md:min-h-screen bg-white flex items-center px-6 py-14 lg:pl-20 lg:pr-30",children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(l)},children:[Object(g.jsxs)(z,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:["Enter Your PIN "," ",Object(g.jsx)("span",{className:"font-bold",children:"".concat(n.mobileNumber)}),Object(g.jsx)("span",{className:"ml-1",children:Object(g.jsx)(me.a,{onClick:r})})]}),Object(g.jsx)(de,{onChange:u,otpValue:l,length:4,errorMessage:i}),b>0&&Object(g.jsx)(J,{className:"my-8 md:my-11 text-sm text-gray-600 font-light"}),0==b&&Object(g.jsx)("div",{onClick:function(){b||p(30),c()},children:Object(g.jsx)(J,{className:"text-primary-900 my-8 md:my-11 cursor-pointer",children:"Send the code again"})}),Object(g.jsx)(te,{variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",disabled:4!=l.length,type:"submit",children:"Submit"})]})})},pe=function(e){Object(Y.a)(e);var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({step:1,mobileNumber:""}),_=Object(o.a)(i,2),s=_[0],l=_[1],u=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.G)(t.mobileNumber);case 2:(n=e.sent).data.status?(l({step:2,mobileNumber:t.mobileNumber}),c([])):c(n.data.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!=t.length){e.next=6;break}return e.next=3,Object(E.H)(s.mobileNumber,t,s.countryCode);case 3:n=e.sent,console.log(n),n.data.status?(Object(E.A)({id:n.data.entity.id,token:n.data.entity.token}),window.location.reload(!1)):c(n.data.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.G)(s.mobileNumber);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){c([]),l((function(e){return Object(b.a)(Object(b.a)({},e),{},{step:1})}))};return Object(g.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap",children:[Object(g.jsx)("div",{className:"w-full md:w-55/100 shrink-0",children:Object(g.jsx)(Z,{})}),Object(g.jsx)("div",{className:"w-full md:w-45/100",children:function(){switch(s.step){case 1:return Object(g.jsx)(ne,{onSubmit:u,loginDetails:s,apierror:r,defaultValues:{mobileNumber:s.mobileNumber}});case 2:return Object(g.jsx)(be,{handleLogin:d,loginDetails:s,editMobile:j,resendOtp:m,error:r})}}()})]})},je=n(350),Oe=n(351),fe=n(352),he=n(353),xe=[{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Total Collection",name:"toatalCollection",inputType:"number",list:"customerType"},{label:"Total Payment",name:"toatlPayment",inputType:"number",list:"customerType"},{label:"Fund Available",name:"fundAvailable",inputType:"number",list:"customerType"}],ve=f.a.Title,Ee=function(e){e.page;var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),_=Object(o.a)(i,2),s=_[0],l=_[1],u=Object(a.useState)(y()().format("YYYY-MM-DD")),d=Object(o.a)(u,2),m=d[0],j=d[1],D=Object(a.useState)(y()().format("YYYY-MM")),M=Object(o.a)(D,2),C=M[0],P=M[1],I=function(e,t){for(var n={},a=0;a<e.length;a++){var r=e[a];n[r.company_id]||(n[r.company_id]={id:r.company_id,companyName:r.name,division:r.division,fundAvailable:0});var c=n[r.company_id];"receipts"==r.type&&(c.toatalCollection="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year),"payments"==r.type&&(c.toatlPayment="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year)}return Object.values(n)},A=function(){var e=Object(p.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.v)(t,m,C.split("-")[1],C.split("-")[0]);case 2:a=e.sent,console.log(a),r=null===(n=a.data)||void 0===n?void 0:n.entity,"date"==t?c(Object.values(I(r,t))):l(Object.values(I(r,t)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){A("date")}),[m]),Object(a.useEffect)((function(){A("month")}),[C]);var k=xe.map((function(e){return Object(b.a)({title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"},function(e){return"number"===e.inputType?{render:function(e,t){return Object(g.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}}(e))}));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(ve,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["As on ",Object(g.jsx)("input",{type:"date",onChange:function(e){return j(e.target.value)},value:m})]}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(v.a,{dataSource:r,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(ve,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Month Report ",Object(g.jsx)("input",{type:"month",onChange:function(e){return P(e.target.value)},value:C})]}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(v.a,{dataSource:s,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},De=n(4),ye=n(171),ge=n(329),Me=n(142),Ce=f.a.Title,Pe=function(e){var t,n=e.visible,r=e.setVisible,c=e.invoiceId,i=Object(a.useState)({transactions:[]}),_=Object(o.a)(i,2),s=_[0],l=_[1],u=Object(a.useState)({}),d=Object(o.a)(u,2),m=(d[0],d[1],function(){var e=Object(p.a)(O.a.mark((function e(t){var n,a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.w)(t);case 2:r=e.sent,console.log(r),c=null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity.transactions.map((function(e){e.rate,e.quantity;return{itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:e.total}})),l(Object(b.a)(Object(b.a)({},null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity),{},{transactions:c}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(a.useEffect)(Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("calling",c),!c){e.next=4;break}return e.next=4,m(c);case 4:case"end":return e.stop()}}),e)}))),[c]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(ge.a,{title:"Invoice Details",visible:n,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return r(!1)},footer:[],children:Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsxs)(h.a,{children:[Object(g.jsx)(x.a,{span:18,children:Object(g.jsxs)(Ce,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Customer Name : ",null===s||void 0===s||null===(t=s.customer)||void 0===t?void 0:t.name]})}),Object(g.jsx)(x.a,{span:6,children:Object(g.jsxs)(Ce,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Dated : ",y()(null===s||void 0===s?void 0:s.invoiceDate).format("DD-MM-YYYY")]})}),Object(g.jsx)(x.a,{span:12,children:Object(g.jsxs)(Ce,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Invoice Number : ",null===s||void 0===s?void 0:s.invoiceNumber]})})]}),Object(g.jsx)(h.a,{children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(Me.a,{customerData:s&&s.customerId&&(null===s||void 0===s?void 0:s.customer),transactions:s&&(null===s||void 0===s?void 0:s.transactions),milk:{},notEditable:!0,invoiceDetails:s})})})]})})})},Ie=n(327),Ae=n(87),ke=n(22),Te=function(e){var t=null,n=null;return e.length>0&&(t=Object(ke.d)(e[0],[0,0,0]),n=Object(ke.d)(e[1],[23,59,59])),{fromDate:t,toDate:n}},we=Ie.a.RangePicker,Re=function(e){var t,n=e.visible,r=e.onOk,c=e.onCancel,i=e.page,_=e.filters,s=Object(a.useState)(null!==(t=_.dateRange)&&void 0!==t&&t.fromDate?[y()(_.dateRange.fromDate),y()(_.dateRange.toDate)]:[]),l=Object(o.a)(s,2),u=l[0],d=l[1],m=Object(a.useState)(_.companyIds?_.companyIds:[]),b=Object(o.a)(m,2),j=b[0],f=b[1],h=Object(a.useState)(_.customerIds?_.customerIds:[]),x=Object(o.a)(h,2),v=x[0],D=x[1],M=function(){r({dateRange:Te(u),companyIds:j,customerIds:v})},C=Object(a.useState)([]),P=Object(o.a)(C,2),I=P[0],k=P[1],T=Object(a.useState)([]),w=Object(o.a)(T,2),R=w[0],N=w[1],S=function(e){return e.map((function(e,t){return Object(g.jsx)(Option,{value:e.value,children:e.label},t)}))},L=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.t)();case 2:n=e.sent,k(null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="sales"==i||"receipts"==i?"customer":"vendor",e.next=3,Object(E.u)(n);case 3:a=e.sent,N(null===(t=a.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.name)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){n&&(L(),B())}),[n]);return Object(g.jsxs)(ge.a,{title:"Filter",visible:n,onOk:M,onCancel:c,footer:[Object(g.jsx)(A.a,{onClick:function(){return d([]),f([]),void D([])},children:"Clear Filter"},"cancel"),Object(g.jsx)(A.a,{type:"primary",onClick:function(){return M()},children:"Apply Filter"},"save")],children:[Object(g.jsxs)("label",{children:["receipts"==i?"Receipt":"payments"==i?"Payment":"Invoice"," Date Range"]}),Object(g.jsx)(we,{style:{width:"100%"},dateRender:function(e){var t={};return 1===e.date()&&(t.border="1px solid #1890ff",t.borderRadius="50%"),Object(g.jsx)("div",{className:"ant-picker-cell-inner",style:t,children:e.date()})},onChange:function(e){return d(e)},value:u}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{children:"Division"}),Object(g.jsx)(Ae.a,{placeholder:"Divisions",allowClear:!0,style:{width:"100%"},value:j,onChange:f,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:S(I)}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("label",{children:"sales"==i||"receipts"==i?"Customers":"Vendors"}),Object(g.jsx)(Ae.a,{placeholder:"Customers",value:v,allowClear:!0,style:{width:"100%"},onChange:D,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:S(R)})]})},Ne=n(209),Se=function(e){var t=e.filters,n=e.onRemoveFilter,a=(e.page,!1);Object.keys(t).length>0&&(a=!0);var r={dateRange:{label:"Date Range",checkFunction:function(e){var t;return null===(t=e.dateRange)||void 0===t?void 0:t.fromDate}},companyIds:{label:"Divisions",checkFunction:function(e){var t;return(null===(t=e.companyIds)||void 0===t?void 0:t.length)>0}},customerIds:{label:"Customers",checkFunction:function(e){var t;return(null===(t=e.customerIds)||void 0===t?void 0:t.length)>0}}};return Object(g.jsx)(g.Fragment,{children:a&&Object(g.jsx)("div",{className:"mt-5",children:Object.keys(t).filter((function(e){return r[e].checkFunction(t)})).map((function(e){return Object(g.jsx)(Ne.a,{color:"processing",closable:!0,onClose:function(){return function(e){n(e)}(e)},children:r[e].label})}))})})},Le=n(345),Be=f.a.Title,Ue=function(e){var t=e.page,n=e.reload,r=e.setEditData,c=e.setReload,i=Object(a.useState)(null),_=Object(o.a)(i,2),s=_[0],l=_[1],u=Object(a.useState)(!1),d=Object(o.a)(u,2),m=d[0],j=d[1],E=Object(a.useState)(null),D=Object(o.a)(E,2),M=D[0],C=D[1],P=Object(a.useState)(1),I=Object(o.a)(P,2),k=I[0],T=I[1],w=Object(a.useState)(20),R=Object(o.a)(w,2),N=R[0],S=R[1],L=Object(a.useState)(0),B=Object(o.a)(L,2),U=B[0],K=B[1],W=Object(a.useState)(""),F=Object(o.a)(W,2),V=F[0],q=F[1],Y=Object(a.useState)({}),G=Object(o.a)(Y,2),H=G[0],z=G[1],J=Object(a.useState)(!1),Q=Object(o.a)(J,2),X=Q[0],Z=Q[1],$=function(){var e=Object(p.a)(O.a.mark((function e(){var n,a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(ke.c)(t),e.next=3,r(t,V,(k-1)*N,N,JSON.stringify(H));case 3:c=e.sent,console.log("response",c),l(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.entity.rows.map((function(e){return Object(ke.i)(t,e)}))),K(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.entity.count);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){$()}),[t,k,N,n,V,H]);var ee=function(){var e=Object(p.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(ke.k)("Are you sure you want to delete ?",Object(p.a)(O.a.mark((function e(){var r,i,_;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(ke.b)(t),e.next=3,i(a.id);case 3:null!==(_=e.sent)&&void 0!==_&&null!==(r=_.data)&&void 0!==r&&r.status?Object(ke.j)("Succesfully Deleted"):(console.log("err",_),Object(ke.l)("OOPS!! Something went wrong")),c(!n);case 6:case"end":return e.stop()}}),e)}))),(function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return{render:function(n,a){if("invoiceNumber"==e.name){var r,c="receipts"==t||"payments"==t?null===(r=a.invoice)||void 0===r?void 0:r.id:a.id;return Object(g.jsx)("div",{children:Object(g.jsx)("a",{onClick:function(){return function(e){C(e),j(!0)}(c)},className:"underline text-blue-900",children:n})})}return"number"===e.inputType?Object(g.jsx)("div",{children:n?n.toLocaleString("en-IN"):n}):"date"===e.inputType?Object(g.jsx)("div",{children:n?y()(n).format("DD-MM-YYYY"):null}):"companyId"===e.name?"".concat(null===a||void 0===a||null===(i=a.company)||void 0===i?void 0:i.division," - ").concat(null===a||void 0===a||null===(_=a.company)||void 0===_?void 0:_.name):"groupId"===e.name?"".concat(null===a||void 0===a||null===(o=a.group)||void 0===o?void 0:o.name):n;var i,_,o}}},ne=Object(ke.e)(t).map((function(e){return Object(b.a)({title:Object(g.jsx)(f.a.Text,{ellipsis:!0,title:e.label,children:Object(ke.g)(e,t)}),dataIndex:e.name,key:e.name,width:"150px"},te(e,t))}));ne.push({title:"Action",key:"operation",width:"100px",render:function(e){return Object(g.jsxs)("div",{className:"float-right",children:[Object(g.jsx)(A.a,{type:"primary",onClick:function(){return function(e){r(Object(b.a)({},e))}(e)},title:"Edit",children:Object(g.jsx)(me.a,{})},"edit"+e.id),Object(g.jsx)(A.a,{type:"secondary",onClick:function(){return ee(e)},className:"ml-2",title:"Delete",children:Object(g.jsx)(Le.a,{})},"delete"+e.id)]})}});for(var ae=[10,20,50,100],re=[];ae.length>0&&ae[0]<U;)re.push(ae[0]+""),ae.shift();U>10&&re.push(U+"");return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(g.jsx)(Be,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:Object(ke.f)(t)}),Object(g.jsx)("div",{className:"mb-2",children:Object(g.jsxs)(h.a,{className:"w-full",children:[Object(g.jsx)(x.a,{span:12,children:Object(g.jsx)(ye.a,{placeholder:"Search...",value:V,onChange:function(e){return q(e.target.value)}})}),Object(g.jsx)(x.a,{span:3,className:"ml-5",children:Object(g.jsx)(A.a,{onClick:function(){return Z(!X)},children:"Filter"})}),Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(Se,{filters:H,onRemoveFilter:function(e){z(Object(b.a)(Object(b.a)({},H),{},Object(De.a)({},e,null)))}})})]})}),Object(g.jsx)(h.a,{className:"w-full",children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(v.a,{dataSource:s,columns:ne,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:re,current:k,pageSize:N,onChange:function(e){T(e)},onShowSizeChange:function(e,t){S(t),T(1)},total:U,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(g.jsx)(Pe,{visible:m,setVisible:j,invoiceId:M}),X&&Object(g.jsx)(Re,{visible:X,onCancel:function(){return Z(!1)},onOk:function(e){return z(e),void Z(!1)},page:t,filters:H})]})})},Ke=function(e){var t=e.tableData,n=e.invalidHeader,r=e.setHasErrors,c=e.setRecord,i=e.record,_=[{title:"ROW INDEX",dataIndex:"index",key:"index",width:"150px",render:function(e){return Object(g.jsx)("div",{className:"flex flex-col",children:Object(g.jsx)("label",{className:"font-semibold",children:e+2},e+2)},e+2)}},{title:"REASON",dataIndex:"reason",key:"reason",render:function(e,t){var n=e.map((function(e,t){return Object(g.jsx)("li",{children:e},t)}));return Object(g.jsx)("ul",{children:n},t.index+2)}}];return Object(a.useEffect)((function(){!function(){var e=0;c(e),t.map((function(t){t.reason.length&&(e+=1)})),c(e),e||n.length||r(!1)}()}),[i]),Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"flex-col pb-5",children:[Object(g.jsx)("label",{className:"font text-md",children:"The following data is invalid. Please correct them and upload again."}),Object(g.jsx)("ul",{className:"pl-2 text-red-800",children:n.length?n.map((function(e,t){return Object(g.jsxs)("li",{children:["Invalid Header : ",e.invalidColumn]},t)})):""}),Object(g.jsx)("label",{className:"font text-md",children:"Correct the errors and upload again."})]}),Object(g.jsx)(v.a,{dataSource:t,columns:_,bordered:!0,pagination:{}})]})},We=function(e){var t=e.cardClass,n=void 0===t?"":t,a=e.cardWidth,r=void 0===a?"":a,c=e.cardBg,i=void 0===c?"bg-white":c,_=e.cardBorder,o=void 0===_?"border":_,s=e.cardBorderColor,l=void 0===s?"border-gray-200":s,u=e.cardRadius,d=void 0===u?"rounded-2xl":u,m=e.cardPadding,b=void 0===m?"":m,p=e.cardShadow,j=void 0===p?"":p,O=e.children,f=e.cardHeight,h=void 0===f?"":f,x=e.onClick;return Object(g.jsx)("div",{className:"".concat(r," ").concat(h," ").concat(i," ").concat(o," ").concat(l," ").concat(d," ").concat(b," ").concat(j," ").concat(n," "),onClick:x,children:O})},Fe=n(346),Ve=n(100),qe=function(e){var t=e.acceptedFile,n=e.onValidate,a=e.resetUploadedCsv,r=e.setCsvArray,c=e.onCancel,i=e.setCsvErrors,_=e.setHasErrors,o=e.dataKeysMap,s=(e.validateButtonRef,Object(Ve.c)().readString),l=o,u=function(e){if(0===e.length||e.length>0&&0===Object.keys(e[0]).length)return alert("Error!! Empty Csv file upload!"),null;var t=[],n=[];return Object.keys(e[0]).forEach((function(e){l[e]||t.push({invalidColumn:e})})),t.length?console.log("invalidHeaders",t):(n=function(e,t){return t.map((function(t){return Object.keys(t).reduce((function(n,a){return Object(b.a)(Object(b.a)({},n),Object(De.a)({},e[a]||a,t[a]))}),{})}))}(l,e),r(n)),{newCsv:n,invalidHeaders:t}},d=function(){r(null),i([]),_(!1),function(e){if(null===t)return alert("Error !! Empty Csv file upload!"),a(),[];e()}((function(){console.log("acceptedFile",t),s(t,{worker:!0,header:!0,skipEmptyLines:!0,complete:function(e){var t=u(e.data);if(console.log("results.data",e.data),t){var a=Object(b.a)({},t),r=a.newCsv,i=a.invalidHeaders;n({newCsv:r,invalidHeaders:i})}else c()}})}))};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"flex justify-end items-center mt-5",children:[Object(g.jsx)(te,{type:"button",variant:"outlineBtn",btnClass:"text-sm font-normal py-3 px-6",onClick:function(){return c()},children:"Cancel"}),Object(g.jsx)(te,{type:"submit",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 py-3 px-8",onClick:function(){return d()},children:"Save"})]})})},Ye=function(e){var t=e.validateBulkCreation,n=e.onCancel,c=e.hasErrors,i=e.setHasErrors,_=(e.csvErrors,e.setCsvErrors),s=e.csvArray,l=e.setCsvArray,u=e.validateButtonRef,d=(e.invalidHeader,e.setInvalidHeader),m=e.record,j=e.setRecord,f=e.dataKeysMap,h=Object(Ve.b)().CSVReader,x=r.a.useRef(),v=Object(a.useState)(null),E=Object(o.a)(v,2),D=E[0],y=E[1],M=function(){var e=Object(p.a)(O.a.mark((function e(n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.newCsv,r=n.invalidHeaders,j(!1),a||C(),t(a,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e;n(),null===(e=x.current)||void 0===e||e.click()};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"",children:Object(g.jsx)(h,{onUploadAccepted:function(e){y(e),i(!1),l(null)},children:function(e){var t=e.getRootProps,a=e.acceptedFile,r=(e.ProgressBar,e.getRemoveFileProps),o=Object(g.jsx)("div",{className:"absolute group-hover:flex hidden w-53.5 h-25  top-0 left-0 items-center justify-center before:w-full before:h-full before:left-0 before:bg-black before:opacity-70",children:Object(g.jsx)("div",Object(b.a)(Object(b.a)({ref:x,className:"absolute cursor-pointer "},r()),{},{children:Object(g.jsx)(Le.a,{})}))});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"relative w-53.5 h-25 mb-2 cursor-pointer",children:Object(g.jsxs)("div",Object(b.a)(Object(b.a)({},t()),{},{children:[Object(g.jsx)("input",{className:"shadow hidden appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),Object(g.jsxs)("div",{className:"p-2 border border-dashed bg-gray-100 border-gray-300 w-53.5 h-25 flex items-center justify-center",children:[!a&&Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)(Fe.a,{}),Object(g.jsxs)(J,{children:["Drag the file or ",Object(g.jsx)("span",{className:"text-info ",children:"Browse"})]})]}),a&&Object(g.jsxs)("div",{className:"relative w-53.5 h-25 align-middle mb-6 group flex items-center justify-center",children:[a.name,o]},a.name)]})]}))}),Object(g.jsx)(qe,{csvFileData:D,acceptedFile:a,onValidate:M,getRemoveFileProps:r,resetUploadedCsv:C,setCsvArray:l,setInvalidHeader:d,onCancel:n,setCsvErrors:_,setHasErrors:i,dataKeysMap:f,validateButtonRef:u}),Object(g.jsx)("div",{className:"pb-5",children:s&&(c?Object(g.jsxs)("label",{className:"font text-md text-red-800 ",children:[m," records needs correction. "]}):Object(g.jsx)("label",{className:"font text-md ",children:" All records are valid. "}))})]})}})})})};function Ge(e){var t=e.sampleData,n=(e.fileName,e.children),a=e.page,r=Object(Ve.a)(),c=r.CSVDownloader,i=r.Type;return Object(g.jsx)(c,{variant:"Link",type:i.Button,filename:"".concat(a,"-sample-file"),bom:!0,config:{delimiter:","},data:t,children:n})}var He=function(e){var t=e.headingChildren,n=e.textChildren,a=e.getIcon,r=e.onIconClick,c=e.headingStyle,i=void 0===c?"":c;return Object(g.jsxs)("div",{className:"flex items-center ".concat(r?"cursor-pointer":""),onClick:r,children:[Object(g.jsx)("div",{className:"flex shrink-0 mr-2",children:a()}),Object(g.jsxs)("div",{children:[Object(g.jsx)(z,{type:"h4",className:"leading-8 ".concat(i),children:t}),n&&Object(g.jsx)(J,{className:"text-sm font-light text-gray-500",children:n})]})]})},ze=n(347),Je=function(e){var t=e.page,n=e.setReload,r=Object(a.useState)(null),c=Object(o.a)(r,2),i=c[0],_=c[1],s=Object(a.useState)([]),l=Object(o.a)(s,2),u=l[0],d=l[1],m=Object(a.useState)(!1),b=Object(o.a)(m,2),j=b[0],f=b[1],h=Object(a.useState)([]),x=Object(o.a)(h,2),v=x[0],D=x[1],y=Object(a.useState)(null),M=Object(o.a)(y,2),C=M[0],P=M[1],I=Object(a.useState)(!1),A=Object(o.a)(I,2),k=(A[0],A[1]),T=Object(a.useRef)(null);Object(a.useEffect)((function(){w()}),[t]),Object(a.useEffect)((function(){f(!0)}),[u]);var w=function(){k(!1),_(null),d([]),f(!1),D([]),P(null)},R=function(){var e=Object(p.a)(O.a.mark((function e(a){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,"csvData"),r="receipts"==t||"payments"==t?E.j:E.k,e.next=4,r(a,t);case 4:c=e.sent,console.log(c,"res"),c.data.status?c.data.entity.csvErrorArray?d(c.data.entity.csvErrorArray):(d([]),n(!0),Object(ke.j)("Succesfully Uploaded")):Object(ke.l)("OOPS!! Something went wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0?D(n):R(t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=Qe(t);return Object(g.jsxs)("div",{className:"scr",children:[Object(g.jsxs)(We,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:[Object(g.jsxs)("div",{className:"w-2/5 py-8",children:[Object(g.jsx)(He,{getIcon:function(){return Object(g.jsx)(ze.a,{style:{fontSize:"450%"}})},headingChildren:"Bulk Upload",textChildren:"Upload the required file"}),Object(g.jsxs)(J,{className:"pl-14 pt-4",children:["To download a sample ",Object(g.jsx)("b",{children:t})," file"," ",Object(g.jsx)(Ge,{page:t,sampleData:[S],fileName:"sample-file",children:Object(g.jsx)("div",{variant:"Link",className:"text-primary-500 font-semibold text-sm mt-2",children:"Click here"})})]})]}),Object(g.jsx)("div",{className:"w-3/5 pl-25 py-8 mt-12",children:Object(g.jsxs)("div",{children:[Object(g.jsx)($,{fontWeight:"font-normal",children:"Upload File"}),Object(g.jsx)(Ye,{validateBulkCreation:N,handleBulkCreation:R,hasErrors:j,setHasErrors:f,csvErrors:u,setCsvErrors:d,csvArray:i,setCsvArray:_,onCancel:w,validateButtonRef:T,invalidHeader:v,setInvalidHeader:D,record:C,setRecord:P,dataKeysMap:S})]})})]}),j&&Object(g.jsx)(We,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:Object(g.jsx)("div",{className:"w-full",children:Object(g.jsx)(Ke,{tableData:u,invalidHeader:v,setHasErrors:f,hasErrors:j,setRecord:P,record:C})})})]})},Qe=function(e){return"sales"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"itemValue","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"purchase"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"itemValue","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"receipts"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","RECEIPT VIA":"via",AMOUNT:"amount","RECEIPT DATE":"receiptDate"}:"payments"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","PAID VIA":"via",AMOUNT:"amount","PAYMENT DATE":"receiptDate"}:"journals"==e?{DATE:"dated",LEDGER:"ledgerName",DR:"dr",CR:"cr",DESCRIPTION:"description"}:void 0},Xe=n(348),Ze=n(157),$e=n(349),et=n(145),tt=n(202),nt=n(40),at=n.n(nt),rt=n(210),ct=n(211),it=n(324),_t=n(330),ot=["index"],st=["title","editable","children","dataIndex","record","handleSave","ledgers"],lt=function(e){e.index;var t=Object(G.a)(e,ot);return Object(g.jsx)("tr",Object(b.a)({},t))},ut=function(e){e.title;var t=e.editable,n=e.children,a=e.dataIndex,r=e.record,c=e.handleSave,i=e.ledgers,_=Object(G.a)(e,st),o=function(e,t){var n={};if("name"===a)n={name:i[t].name,ledgerId:t,rate:null,ledgerCode:i[t].code};else{var _="cr"===a?{dr:""}:{cr:""};n=Object(b.a)(Object(De.a)({},a,t),_)}c(Object(b.a)(Object(b.a)({},r),n))},s=n;return t&&(s="Total Amount"!=r.name?Object(g.jsx)(g.Fragment,{children:"name"!==a?Object(g.jsx)(ye.a,{className:"w-full",type:"number",onChange:function(e){return o(0,e.target.value)},value:r[a]}):Object(g.jsx)(Ae.a,{placeholder:"Select Items",showSearch:!0,optionFilterProp:"children",showArrow:!1,value:null===r||void 0===r?void 0:r.ledgerId,onChange:function(e){return o(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},className:"w-full",children:Object.values(i).map((function(e,t){return Object(g.jsx)(Option,{value:e.id,children:e.name},t)}))},"ledgerId")}):Object(g.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:n})),Object(g.jsx)("td",Object(b.a)(Object(b.a)({},_),{},{children:s}))},dt=function(e){var t=e.columns,n=e.setDataSource,a=e.dataSource,r=e.notEditable,c=e.ledgers;!r&&t.length<=3&&t.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,t){return!t.taxRow&&Object(g.jsx)(it.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var t=a.filter((function(t){return t.key!==e}));n(t)}(t.key)},children:Object(g.jsx)("a",{children:"Delete"})})}});var i=function(e){var t=Object(m.a)(a),r=t.findIndex((function(t){return e.key===t.key})),c=t[r];t.splice(r,1,Object(b.a)(Object(b.a)({},c),e)),n(t)},_={body:{row:lt,cell:ut}},o=t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{onCell:function(t,n){var a={};return e.editable?Object(b.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:i,ledgers:c},a):a}})}));return Object(g.jsxs)("div",{children:[r?null:Object(g.jsx)(A.a,{onClick:function(){var e=Object(b.a)({key:Object(ke.n)()},t.reduce((function(e,t){return Object(b.a)(Object(b.a)({},_t.a),{},Object(De.a)({},t.dataIndex,""))}),{}));n([].concat(Object(m.a)(a),[e]))},type:"primary",style:{marginBottom:16},children:"Add a Ledger"}),Object(g.jsx)(v.a,{components:_,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:Object(m.a)(a),columns:o,pagination:!1})]})},mt=[{label:"Date",name:"dated",type:"input",inputType:"date"},{label:"Description",name:"description",type:"input",inputType:"text"}],bt=n(101),pt=function(e){var t=e.data,n=e.callback,r=e.setEditData,c=e.page,i={dated:y()().format("YYYY-MM-DD"),description:"",ledgers:[]},_=Object(a.useState)(i),s=Object(o.a)(_,2),l=s[0],u=s[1],d=Object(a.useState)([]),m=Object(o.a)(d,2),j=m[0],f=m[1],v=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.c)("ledgers")("ledgers");case 2:n=e.sent,f(null===(t=n.data.entity)||void 0===t?void 0:t.rows.reduce((function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(De.a)({},t.id,t))}),{}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){u(Object(b.a)(Object(b.a)({},l),{},Object(De.a)({},e.target.name,e.target.value)))};Object(a.useEffect)(Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:console.log(t),u(Object(b.a)(Object(b.a)({},t),{},{ledgers:t.journalLedgers.map((function(e){return{id:Object(ke.n)(),key:Object(ke.n)(),ledgerId:e.ledger.id,name:e.ledger.name,dr:"debit"===e.type?e.amount:"",cr:"credit"===e.type?e.amount:""}}))}));case 4:case"end":return e.stop()}}),e)}))),[t]);var D=function(){var e=Object(p.a)(O.a.mark((function e(a){var r,i,_,o,s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r={dated:l.dated,description:l.description,jounalLedgers:l.ledgers}).jounalLedgers=r.jounalLedgers.filter((function(e){return e.ledgerId})),r.jounalLedgers=r.jounalLedgers.map((function(e){return{type:e.dr?"debit":"credit",amount:e.dr?e.dr:""!=e.cr?e.cr:0,ledgerId:e.ledgerId}})),i=r.jounalLedgers.reduce((function(e,t){return"debit"==t.type&&(e.sumDr+=isNaN(parseFloat(t.amount))?0:parseFloat(t.amount)),"credit"==t.type&&(e.sumCr+=isNaN(parseFloat(t.amount))?0:parseFloat(t.amount)),e}),{sumDr:0,sumCr:0}),0!=r.jounalLedgers.length){e.next=7;break}return Object(ke.l)("Please insert atleast one ledger"),e.abrupt("return");case 7:if(""!=l.dated){e.next=10;break}return Object(ke.l)("Please select date"),e.abrupt("return");case 10:if(i.sumCr===i.sumDr){e.next=13;break}return Object(ke.l)("Sum of Dr columm and Cr Column is not equal."),e.abrupt("return");case 13:if(!t){e.next=21;break}return e.next=16,Object(ke.m)(c)(t.id,r);case 16:o=e.sent,console.log(o),1==(null===o||void 0===o||null===(_=o.data)||void 0===_?void 0:_.status)?at()("Succesfully updated ".concat(c," details"),"success"):at()("OOPS Something Went wrong","error"),e.next=26;break;case 21:return e.next=23,Object(ke.a)(c)(r);case 23:u=e.sent,console.log(u),1==(null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.status)?at()("Succesfully added ".concat(c," details"),"success"):at()("OOPS Something Went wrong","error");case 26:M(),n();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){u(i),r(null)};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(h.a,{children:mt.map((function(e,t){return Object(g.jsx)(bt.a,{label:e.label,type:e.inputType,name:e.name,onChange:E,value:l?l[e.name]:"",lcol:0==t?2:3,icol:0==t?4:15},e.name)}))}),Object(g.jsx)(h.a,{children:Object(g.jsx)(x.a,{span:24,children:Object(g.jsx)(dt,{columns:[{title:"Ledger Name",dataIndex:"name",width:"40%",editable:!0},{title:"Dr",dataIndex:"dr",width:"30%",editable:!0},{title:"Cr",dataIndex:"cr",width:"30%",editable:!0}],setDataSource:function(e){return u(Object(b.a)(Object(b.a)({},l),{},{ledgers:e}))},dataSource:l&&l.ledgers||[],ledgers:j,notEditable:!1})})}),Object(g.jsx)(h.a,{children:Object(g.jsxs)(x.a,{span:24,className:"text-right",children:[Object(g.jsx)(A.a,{onClick:function(){return M()},className:"mr-4",icon:Object(g.jsx)(rt.a,{}),children:"Reset"}),Object(g.jsx)(A.a,{type:"primary",onClick:function(){return D()},icon:Object(g.jsx)(ct.a,{}),children:t?"Edit":"Add"})]})})]})})},jt=f.a.Title,Ot=function(e){var t=e.page,n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],i=r[1],_=Object(a.useState)(!1),s=Object(o.a)(_,2),l=s[0],u=s[1],m=Object(a.useState)(!1),b=Object(o.a)(m,2),p=b[0],j=b[1],O=Object(a.useState)(null),f=Object(o.a)(O,2),h=f[0],x=f[1];Object(a.useEffect)((function(){u(!1),j(!1),i(!1),x(null)}),[t]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(g.jsx)(d.a.Item,{children:""})}),Object(g.jsxs)("div",{className:"relative flex",children:[Object(g.jsxs)(te,{type:"secondaryBtn",variant:"secondaryBtn",btnClass:"text-sm font-normal ml-2 px-3",onClick:function(){return j(!p)},children:[p?Object(g.jsx)(Ze.a,{className:"mr-2"}):Object(g.jsx)(Xe.a,{className:"mr-2"}),p?"Close Form":"Add ".concat(Object(ke.f)(t))]}),Object(ke.h)(t)&&Object(g.jsxs)(te,{type:"primaryBtn",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 px-2",onClick:function(){return u(!l)},children:[l?Object(g.jsx)(Ze.a,{className:"mr-2"}):Object(g.jsx)($e.a,{className:"mr-2"}),l?"Close Upload":"Upload"]})]}),l&&Object(g.jsx)(Je,{page:t,setReload:i}),p&&Object(g.jsxs)("div",{className:"site-layout-background p-5",id:"form-div",children:[Object(g.jsxs)(jt,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:[h?"Edit":"Add"," ",Object(ke.f)(t)]}),["customer","vendor","company","item","groups","ledgers","receipts","payments"].includes(t)&&Object(g.jsx)(et.a,{data:h,callback:function(){return i(!c)},setEditData:x,page:t}),("sales"===t||"purchase"==t)&&Object(g.jsx)(tt.a,{data:h,callback:function(){return i(!c)},setEditData:x,page:t}),"journals"===t&&Object(g.jsx)(pt,{data:h,callback:function(){return i(!c)},setEditData:x,page:t})]}),Object(g.jsx)("div",{className:"mt-5",children:Object(g.jsx)(Ue,{page:t,reload:c,setEditData:function(e){x(e),j(!0),setTimeout((function(){return document.getElementById("form-div").scrollIntoView()}),2)},setReload:i})})]})},ft=(n(143),f.a.Title,l.a.Header),ht=l.a.Content,xt=(l.a.Footer,l.a.Sider),vt=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];if(!Object(E.s)())return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(pe,{})});return Object(g.jsxs)(l.a,{className:"h-screen",children:[Object(g.jsx)(xt,{collapsible:!0,collapsed:n,onCollapse:function(e){return r(e)},children:Object(g.jsx)(q,{collapsed:n})}),Object(g.jsxs)(l.a,{className:"site-layout",children:[Object(g.jsx)(ft,{className:"site-layout-background",style:{padding:0},children:Object(g.jsxs)(u.a,{mode:"horizontal",style:{float:"right",width:"auto"},children:[Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(je.a,{})},"notification"),Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(Oe.a,{})},"mail"),Object(g.jsx)(u.a.SubMenu,{icon:Object(g.jsx)(fe.a,{}),children:Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(he.a,{}),onClick:function(){Object(E.z)(null),window.location.reload(!1)},children:"Sign Out"},"logout")},"profile")]})}),Object(g.jsx)(ht,{style:{margin:"0 16px"},children:Object(g.jsx)("div",{style:{padding:10,height:"calc(100vh - 90px)",overflowY:"auto"},children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{exact:!0,path:"/",children:Object(g.jsx)(Ee,{})}),Object(g.jsx)(s.a,{exact:!0,path:"/sales-reports",children:Object(g.jsx)(I,{page:"sales"})}),Object(g.jsx)(s.a,{exact:!0,path:"/purchase-reports",children:Object(g.jsx)(I,{page:"purchase"})}),Object(g.jsx)(s.a,{exact:!0,path:"/sales",children:Object(g.jsx)(Ot,{page:"sales"})}),Object(g.jsx)(s.a,{exact:!0,path:"/purchases",children:Object(g.jsx)(Ot,{page:"purchase"})}),Object(g.jsx)(s.a,{exact:!0,path:"/receipts",children:Object(g.jsx)(Ot,{page:"receipts"})}),Object(g.jsx)(s.a,{exact:!0,path:"/payments",children:Object(g.jsx)(Ot,{page:"payments"})}),Object(g.jsx)(s.a,{exact:!0,path:"/journals",children:Object(g.jsx)(Ot,{page:"journals"})}),Object(g.jsx)(s.a,{exact:!0,path:"/customers",children:Object(g.jsx)(Ot,{page:"customer"})}),Object(g.jsx)(s.a,{exact:!0,path:"/vendors",children:Object(g.jsx)(Ot,{page:"vendor"})}),Object(g.jsx)(s.a,{exact:!0,path:"/divisions",children:Object(g.jsx)(Ot,{page:"company"})}),Object(g.jsx)(s.a,{exact:!0,path:"/items",children:Object(g.jsx)(Ot,{page:"item"})}),Object(g.jsx)(s.a,{exact:!0,path:"/ledgers",children:Object(g.jsx)(Ot,{page:"ledgers"})}),Object(g.jsx)(s.a,{exact:!0,path:"/groups",children:Object(g.jsx)(Ot,{page:"groups"})})]})})})]})]})};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(_.a,{children:Object(g.jsx)(vt,{})})}),document.getElementById("root"))}},[[322,1,2]]]);
//# sourceMappingURL=main.adf8c1b5.chunk.js.map