(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[0],{163:function(e,t,n){},206:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),i=n.n(c),o=n(61),s=(n(163),n(4)),l=n(37),u=(n(164),n(206),n(314)),d=n(69),b=n(320),m=n(7),j=n(2),p=n(31),h=n(20),f=n.n(h),O=(n(152),n(317)),v=n(312),x=n(313),y=n(315),g=n(183),N=n.n(g),C=new(n(196).a),S=function(){return C.get("AUTH")},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="".concat(e);t&&Object.keys(t).forEach((function(e){return a=a.replace(":".concat(e),t[e])}));var r={};if(n){Object.keys(n).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(r[e]=n[e])}));var c=new URLSearchParams(r);a+="?".concat(c.toString())}return a},I="http://".concat(window.location.hostname,":8000"),k=N.a.create({baseURL:I}),E=function(){return{"content-type":"application/json","x-access-token":S().token}},D=function(e){return k.post("/auth/mobile/sendOTP",{mobileNumber:e})},T=function(e,t){return k.post("/auth/mobile/user",{mobileNumber:e,otp:t})},A=function(e,t){return k.post("/sales",{sales:e,type:t},{headers:E()})},R=function(e,t){return k.post("/receipts",{receipts:e,type:t},{headers:E()})},M=function(e,t,n,a,r){return k.get(w("/invoices",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:E()})},F=function(e){return k.get("/invoices/".concat(e),{headers:E()})},V=function(e,t,n,a){return k.get(w("/fund-reports",{},{reportType:e,date:t,month:n,year:a}),{headers:E()})},B=function(e,t,n,a,r){return k.get(w("/receipts",{},{type:e,search:t,offset:n,limit:a,filters:r}),{headers:E()})},L=[{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"text"},{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Taxable Amount",name:"taxableAmount",inputType:"number",list:"customerType"},{label:"Total Amount",name:"totalValue",inputType:"number",list:"customerType"}],P=n(36),U=n.n(P),Y=n(5),H=O.a.Title,_=function(e){var t=e.page,n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=Object(a.useState)(null),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(null),u=Object(s.a)(l,2),d=u[0],b=u[1],h=function(){var e=Object(p.a)(f.a.mark((function e(){var a,r,c,i,s,l,u,d,m,p,h,O,v,x,y;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f=t,k.get("/reports?type=".concat(f),{headers:E()});case 2:for(r=e.sent,console.log("response",r),c=null===(a=r.data)||void 0===a?void 0:a.entity,i=q(2023),s={},l={},u=0;u<c.length;u++)d=c[u],m="".concat(n[d.month-1].slice(0,3),"-").concat(d.year.toString().slice(-2)),s[d.division]||(s[d.division]={}),s[d.division][m]=d.taxable_amount,l[d.name]||(l[d.name]={}),l[d.name][m]||(l[d.name][m]=0),l[d.name][m]+=d.taxable_amount;for(O in p=[],h=function(e){var t=s[e],n={};i.forEach((function(e){n[e]=t[e]?t[e]:0})),p.push(Object(j.a)({division:e},n))},s)h(O);for(y in o(p),v=[],x=function(e){var t=l[e],n={};i.forEach((function(e){n[e]=t[e]?t[e]:0})),v.push(Object(j.a)({company:e},n))},l)x(y);b(v);case 17:case"end":return e.stop()}var f}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){h()}),[t]);var g=q(2023).map((function(e){return{label:e,name:e,render:function(e,t){return Object(Y.jsx)("div",{children:e.toLocaleString("en-IN")})}}})),N=function(e){return e.map((function(e){return{title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px",render:e.render}}))},C=function(e,t){return Object(Y.jsx)("div",{children:e})},S=N([{label:"Division",name:"division",render:C}].concat(Object(m.a)(g))),w=N([{label:"Company",name:"company",render:C}].concat(Object(m.a)(g)));return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(H,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Division"}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:i,columns:S,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(H,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Company"}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:d,columns:w,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},q=function(e){for(var t=["April","May","June","July","August","September","October","November","December","January","February","March"],n=[],a=new Date,r=a.getMonth(),c=a.getFullYear(),i=0;i<t.length;i++){var o=t[i],s=i<9?e-1:e;n.push("".concat(o.slice(0,3),"-").concat(s.toString().slice(-2)))}return c===e&&r<3&&(n=n.slice(0,12-(3-r))),c===e-1&&r>=3&&(n=n.slice(0,r-3)),n},G=function(e){var t=e.page;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(b.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(Y.jsxs)(b.a.Item,{children:["sales"==t?"Sales":"Purchase"," Report"]})}),Object(Y.jsx)(_,{page:t})]})},z=n(42),K=n(322),W=n(323),J=n(324),Q=n(325),X=n(326),Z=n(327),$=n(328),ee=n(329),te=function(e){e.collapsed;var t=Object(a.useState)(!0),n=Object(s.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(void 0),l=Object(s.a)(i,2),u=l[0],b=l[1];Object(a.useEffect)((function(){var e=function(){return b(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){c(!(u<=800))}),[u]);var m="/"===window.location.pathname?["fund-reports"]:[window.location.pathname.replace("/","")];return Object(Y.jsxs)("div",{className:"nav-container  h-screen",children:[Object(Y.jsxs)("div",{className:"logo-container",children:[Object(Y.jsx)(O.a.Title,{level:2,className:"logo",children:Object(Y.jsx)(o.b,{to:"/",children:"TIMWM"})}),Object(Y.jsx)(z.a,{className:"menu-control-container",onClick:function(){return c(!r)},children:Object(Y.jsx)(K.a,{})})]}),r&&Object(Y.jsxs)(d.a,{theme:"dark",mode:"inline",defaultOpenKeys:["reports"],defaultSelectedKeys:m,subMenuOpenDelay:.2,children:[Object(Y.jsxs)(d.a.SubMenu,{title:"Reports",icon:Object(Y.jsx)(W.a,{}),children:[Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(J.a,{}),children:Object(Y.jsx)(o.b,{to:"/",children:"Fund Reports"})},"fund-reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(J.a,{}),children:Object(Y.jsx)(o.b,{to:"/sales-reports",children:"Sales Report"})},"sales-reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Q.a,{}),children:Object(Y.jsx)(o.b,{to:"/purchase-reports",children:"Purchase Report"})},"purchase-reports")]},"reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(X.a,{}),children:Object(Y.jsx)(o.b,{to:"/sales",children:"Sales"})},"sales"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Z.a,{}),children:Object(Y.jsx)(o.b,{to:"/purchases",children:"Purchases"})},"purchases"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)($.a,{}),children:Object(Y.jsx)(o.b,{to:"/receipts",children:"Receipts"})},"receipts"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(ee.a,{}),children:Object(Y.jsx)(o.b,{to:"/payments",children:"Payments"})},"payments")]})]})},ne=n(189),ae=n(11),re=["children","type","className"],ce=function(e){var t=e.children,n=e.type,a=void 0===n?"h1":n,r=e.className,c=void 0===r?"":r,i=Object(ae.a)(e,re),o={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},s=o[a]?o[a]:"h1";return Object(Y.jsx)(s,Object(j.a)(Object(j.a)({className:"".concat(c)},i),{},{children:t}))},ie=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,r=e.whiteSpace,c=void 0===r?"normal":r,i=e.onClick;return Object(Y.jsx)("p",{className:"".concat(n),style:{whiteSpace:c},onClick:i,children:a})},oe=n.p+"static/media/cryptocurrency.1548aced.png",se=n.p+"static/media/login-bg.a6a7c455.jpg",le=function(e){var t=e.loginContentHeading,n=e.loginContentDesc;return Object(Y.jsxs)("div",{className:"md:min-h-screen relative p-6 py-8 md:py-16 md:px-9 overflow-hidden bg-gradient-secondary md:bg-transparent",children:[Object(Y.jsxs)("div",{className:"relative z-10 max-w-md",children:[Object(Y.jsx)("img",{src:oe,width:"170",height:"34",alt:"logo"}),Object(Y.jsx)(ce,{type:"h3",className:"text-2xl md:text-3xl md:mt-24 mt-5 mb-4 text-white",children:t}),Object(Y.jsx)(ie,{className:"text-white",children:n})]}),Object(Y.jsx)("div",{className:"hidden md:block min-h-screen absolute w-full h-full top-0 left-0 z-0 login-bg",children:Object(Y.jsx)("img",{src:se,layout:"fixed",objectFit:"cover",width:"1024",height:"1024",alt:"login bg"})})]})},ue=function(e){var t=e.labelFor,n=void 0===t?"":t,a=e.variant,r=void 0===a?"medium":a,c=e.textColor,i=void 0===c?"text-gray-900":c,o=e.fontWeight,s=void 0===o?"font-bold":o,l=e.className,u=void 0===l?"block mb-2":l,d=e.children,b=e.labelDisable,m=void 0!==b&&b;return Object(Y.jsx)("label",{htmlFor:"".concat(n),variant:{small:"small",medium:"medium",large:"large"}[r],className:"".concat({small:"text-sm",medium:"text-base font-bold",large:"text-lg"}[r]," ").concat(i," ").concat(s,"  ").concat(u," ").concat(m&&"opacity-60 pointer-events-none"),children:d})},de=function(e){var t=e.disabled,n=e.error,a=(e.isRequired,e.register,e.id),r=e.name,c=e.type,i=e.maxLength,o=void 0===i?256:i,s=e.placeholder,l=e.variant,u=void 0===l?"outlineBottom":l,d=e.bg,b=void 0===d?"bg-lightGrey":d,m=e.fontSize,j=void 0===m?"text-base":m,p=(e.borderColor,e.borderRadius),h=void 0===p?"rounded":p,f=e.className,O=void 0===f?"":f,v=(e.onClick,e.value,e.defaultValue),x=e.onChangeValue,y=void 0===x?function(){}:x,g=e.inputLength;e.getValues;return Object(Y.jsxs)("div",{className:"w-full mb-6",children:[Object(Y.jsx)("input",{id:a,type:c,name:r,placeholder:s,variant:{normal:"normal",outline:"outline",outlineBottom:"outlineBottom",error:"error"}[u],className:"".concat({normal:"border-0",outline:"border-gray-200",outlineBottom:"border-b-gray-400",error:"border-error border-b-error"}[u]," w-full border text-gray-900 h-12 px-4 outline-none placeholder:text-grey-400 ").concat(b," ").concat(h," ").concat(j," ").concat(O," ").concat(t&&"opacity-60 pointer-events-none"," ").concat(n?" border border-error border-b-error":""),disabled:void 0!==t&&t,maxLength:o,onChange:function(e){y(e)},defaultValue:v}),n&&Object(Y.jsx)("div",{className:"text-sm text-error pt-1",children:0!=n.length&&n.message}),g&&Object(Y.jsxs)(ie,{className:"text-xs text-gray-400 absolute bottom-2 right-2",children:[inputValue.length,"/",g]})]})},be=function(e){var t=e.type,n=void 0===t?"":t,a=e.children,r=e.variant,c=e.fontWeight,i=void 0===c?"font-medium":c,o=e.padding,s=void 0===o?"py-3 px-6":o,l=e.btnClass,u=void 0===l?"":l,d=e.imgClassName,b=void 0===d?"":d,m=e.imgSrc,j=e.imgWidth,p=e.imgHeight,h=e.imgAlt,f=void 0===h?"":h,O=e.onClick,v=void 0===O?function(){}:O,x=e.disabled,y=e.form,g=e.buttonRef;return Object(Y.jsxs)("button",{type:n,variant:{primaryBtn:"primaryBtn",outlineBtn:"outlineBtn",normalBtn:"normalBtn"}[r],className:"".concat({primaryBtn:"flex items-center justify-center bg-yellow-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",outlineBtn:"flex items-center justify-center bg-transparent border border-gray-200 rounded text-gray-500 text-base drop-shadow-btn disabled:bg-primary-100 disabled:text-primary-300",normalBtn:"flex items-center justify-center text-base"}[r]," ").concat(i," ").concat(s," ").concat(u," ").concat(m&&"pl-4"),onClick:v,disabled:x,form:y,ref:g,children:[m?Object(Y.jsx)("span",{className:"mx-2 flex items-center flex-shrink-0 ".concat(b),children:Object(Y.jsx)("img",{src:m,width:j,height:p,alt:f})}):"",a]})},me=function(e){var t=e.loginDetails,n=e.onSubmit,r=e.apierror,c=Object(a.useState)(10!=t.mobileNumber.length),i=Object(s.a)(c,2),o=(i[0],i[1]),l=Object(a.useState)(r),u=Object(s.a)(l,2),d=u[0],b=u[1];return Object(a.useEffect)((function(){b(r)}),[r]),console.log("error",d),Object(Y.jsx)("div",{className:"md:min-h-screen flex items-center px-6 py-14 bg-white lg:pl-20 lg:pr-32",children:Object(Y.jsxs)("div",{className:"w-full max-w-md",children:[Object(Y.jsx)(ce,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:"Login"}),Object(Y.jsx)(ie,{className:"mb-6",children:"Enter your details to get sign in to your account"}),Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target[0].value;console.log(t.length,"mobileNumber"),10==t.length?n({mobileNumber:t}):b("Please enter valid mobile number")},children:[Object(Y.jsx)(ue,{textColor:"text-gray-700",children:"Mobile Number"}),Object(Y.jsx)("div",{className:"mt-2 flex",children:Object(Y.jsx)(de,{id:"mobileNumber",name:"mobileNumber",type:"number",className:"ml-1 rounded-none mb-0",placeholder:"Mobile Number",maxLength:10,isRequired:!0,onChangeValue:function(e){10!=e.target.value.toString().length?(o(!0),b("")):o(!1)},variant:"outlineBottom"})}),d&&0!=d.length&&Object(Y.jsx)("div",{className:"text-sm text-red-700 -mt-5 mb-1",children:0!=d.length&&d}),Object(Y.jsx)(ie,{className:"mb-16 md:mb-10 text-sm text-gray-500",children:"Proceed To Enter PIN"}),Object(Y.jsx)(be,{type:"submit",variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",children:"Proceed"})]})]})})},je=n(13),pe=n(14),he=n(15),fe=n(16),Oe=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"],ve=function(e){return"object"===typeof e},xe=function(e){Object(he.a)(n,e);var t=Object(fe.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).getClasses=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!ve(e)&&!1!==e})).join(" ")},a.getType=function(){var e=a.props,t=e.isInputSecure,n=e.isInputNum;return t?"password":n?"tel":"text"},a.input=r.a.createRef(),a}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,n=e.shouldAutoFocus,a=this.input.current;a&&t&&n&&a.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,n=this.input.current;e.focus!==t&&n&&t&&(n.focus(),n.select())}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.separator,a=e.isLastChild,r=e.inputStyle,c=e.focus,i=e.isDisabled,o=e.hasErrored,s=e.errorStyle,l=e.focusStyle,u=e.disabledStyle,d=(e.shouldAutoFocus,e.isInputNum),b=e.index,m=e.value,p=e.className,h=(e.isInputSecure,Object(ae.a)(e,Oe));return Object(Y.jsxs)("div",{className:p,style:{display:"flex",alignItems:"center"},children:[Object(Y.jsx)("input",Object(j.a)({"aria-label":"".concat(0===b?"Please enter verification code. ":"").concat(d?"Digit":"Character"," ").concat(b+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},ve(r)&&r,c&&ve(l)&&l,i&&ve(u)&&u,o&&ve(s)&&s),placeholder:t,className:this.getClasses(r,c&&l,i&&u,o&&s),type:this.getType(),maxLength:"1",ref:this.input,disabled:i,value:m||""},h)),!a&&n]})}}]),n}(a.PureComponent),ye=function(e){Object(he.a)(n,e);var t=Object(fe.a)(n);function n(){var e;Object(je.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeInput:0},e.getOtpValue=function(){return e.props.value?e.props.value.toString().split(""):[]},e.getPlaceholderValue=function(){var t=e.props,n=t.placeholder,a=t.numInputs;if("string"===typeof n){if(n.length===a)return n;n.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},e.handleOtpChange=function(t){(0,e.props.onChange)(t.join(""))},e.isInputValueValid=function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"===typeof t)&&1===t.trim().length},e.focusInput=function(t){var n=e.props.numInputs,a=Math.max(Math.min(n-1,t),0);e.setState({activeInput:a})},e.focusNextInput=function(){var t=e.state.activeInput;e.focusInput(t+1)},e.focusPrevInput=function(){var t=e.state.activeInput;e.focusInput(t-1)},e.changeCodeAtFocus=function(t){var n=e.state.activeInput,a=e.getOtpValue();a[n]=t[0],e.handleOtpChange(a)},e.handleOnPaste=function(t){t.preventDefault();var n=e.state.activeInput,a=e.props,r=a.numInputs;if(!a.isDisabled){for(var c=e.getOtpValue(),i=n,o=t.clipboardData.getData("text/plain").slice(0,r-n).split(""),s=0;s<r;++s)s>=n&&o.length>0&&(c[s]=o.shift(),i++);e.setState({activeInput:i},(function(){e.focusInput(i),e.handleOtpChange(c)}))}},e.handleOnChange=function(t){var n=t.target.value;e.isInputValueValid(n)&&e.changeCodeAtFocus(n)},e.handleOnKeyDown=function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32!==t.keyCode&&" "!==t.key&&"Spacebar"!==t.key&&"Space"!==t.key||t.preventDefault()},e.handleOnInput=function(t){if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var n=t.nativeEvent;null===n.data&&"deleteContentBackward"===n.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}},e.renderInputs=function(){for(var t=e.state.activeInput,n=e.props,a=n.numInputs,r=n.inputStyle,c=n.focusStyle,i=n.separator,o=n.isDisabled,s=n.disabledStyle,l=n.hasErrored,u=n.errorStyle,d=n.shouldAutoFocus,b=n.isInputNum,m=n.isInputSecure,j=n.className,p=[],h=e.getOtpValue(),f=e.getPlaceholderValue(),O=e.props["data-cy"],v=e.props["data-testid"],x=function(n){p.push(Object(Y.jsx)(xe,{placeholder:f&&f[n],index:n,focus:t===n,value:h&&h[n],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:n}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:i,inputStyle:r,focusStyle:c,isLastChild:n===a-1,isDisabled:o,disabledStyle:s,hasErrored:l,errorStyle:u,shouldAutoFocus:d,isInputNum:b,isInputSecure:m,className:j,"data-cy":O&&"".concat(O,"-").concat(n),"data-testid":v&&"".concat(v,"-").concat(n)},n))},y=0;y<a;y++)x(y);return p},e}return Object(pe.a)(n,[{key:"render",value:function(){var e=this.props.containerStyle;return Object(Y.jsx)("div",{style:Object.assign({display:"flex"},ve(e)&&e),className:ve(e)?"":e,children:this.renderInputs()})}}]),n}(a.Component);ye.defaultProps={numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1};var ge=ye,Ne=function(e){var t=e.onChange,n=e.otpValue,a=e.length,r=e.errorMessage;return Object(Y.jsxs)("div",{className:"otp",children:[Object(Y.jsx)(ge,{isInputNum:!0,value:n,onChange:function(e){t(e)},numInputs:a,hasErrored:(null===r||void 0===r?void 0:r.length)>0,placeholder:!1,containerStyle:{fontSize:"16px",color:"black"},inputStyle:{width:42,height:48,border:"1px solid #E5E5EB",marginRight:16,borderRadius:"7px",fontWeight:400,fontSize:"18px",lineHeight:"28px"},focusStyle:{outline:"none",border:"1px solid #9C9CAF",color:"#14142B"},errorStyle:{border:"1px solid #E64C4C",color:"#E64C4C"},shouldAutoFocus:!0}),r&&Object(Y.jsx)(ie,{className:"text-xs font-light text-error mt-1",children:r})]})},Ce=n(199),Se=function(e){var t=e.handleLogin,n=e.loginDetails,r=e.editMobile,c=e.resendOtp,i=e.error,o=Object(a.useState)(""),l=Object(s.a)(o,2),u=l[0],d=l[1],b=Object(a.useState)(30),m=Object(s.a)(b,2),j=m[0],p=m[1];Object(a.useCallback)((function(){return p((function(e){return e-1}))}),[]);return Object(Y.jsx)("div",{className:"md:min-h-screen bg-white flex items-center px-6 py-14 lg:pl-20 lg:pr-30",children:Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(u)},children:[Object(Y.jsxs)(ce,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:["Enter Your PIN "," ",Object(Y.jsx)("span",{className:"font-bold",children:"".concat(n.mobileNumber)}),Object(Y.jsx)("span",{className:"ml-1",children:Object(Y.jsx)(Ce.a,{onClick:r})})]}),Object(Y.jsx)(Ne,{onChange:d,otpValue:u,length:4,errorMessage:i}),j>0&&Object(Y.jsx)(ie,{className:"my-8 md:my-11 text-sm text-gray-600 font-light"}),0==j&&Object(Y.jsx)("div",{onClick:function(){j||p(30),c()},children:Object(Y.jsx)(ie,{className:"text-primary-900 my-8 md:my-11 cursor-pointer",children:"Send the code again"})}),Object(Y.jsx)(be,{variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",disabled:4!=u.length,type:"submit",children:"Submit"})]})})},we=function(e){Object(ne.a)(e);var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({step:1,mobileNumber:""}),o=Object(s.a)(i,2),l=o[0],u=o[1],d=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t.mobileNumber);case 2:(n=e.sent).data.status?(u({step:2,mobileNumber:t.mobileNumber}),c([])):c(n.data.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!=t.length){e.next=6;break}return e.next=3,T(l.mobileNumber,t,l.countryCode);case 3:n=e.sent,console.log(n),n.data.status?(a={id:n.data.entity.id,token:n.data.entity.token},C.set("AUTH",JSON.stringify(a),{path:"/"}),window.location.reload(!1)):c(n.data.message);case 6:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(l.mobileNumber);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){c([]),u((function(e){return Object(j.a)(Object(j.a)({},e),{},{step:1})}))};return Object(Y.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap",children:[Object(Y.jsx)("div",{className:"w-full md:w-55/100 shrink-0",children:Object(Y.jsx)(le,{})}),Object(Y.jsx)("div",{className:"w-full md:w-45/100",children:function(){switch(l.step){case 1:return Object(Y.jsx)(me,{onSubmit:d,loginDetails:l,apierror:r,defaultValues:{mobileNumber:l.mobileNumber}});case 2:return Object(Y.jsx)(Se,{handleLogin:b,loginDetails:l,editMobile:h,resendOtp:m,error:r})}}()})]})},Ie=n(333),ke=n(334),Ee=n(335),De=n(336),Te=function(e){var t=e.tableData,n=e.invalidHeader,r=e.setHasErrors,c=e.setRecord,i=e.record,o=[{title:"ROW INDEX",dataIndex:"index",key:"index",width:"150px",render:function(e){return Object(Y.jsx)("div",{className:"flex flex-col",children:Object(Y.jsx)("label",{className:"font-semibold",children:e+2},e+2)},e+2)}},{title:"REASON",dataIndex:"reason",key:"reason",render:function(e,t){var n=e.map((function(e,t){return Object(Y.jsx)("li",{children:e},t)}));return Object(Y.jsx)("ul",{children:n},t.index+2)}}];return Object(a.useEffect)((function(){!function(){var e=0;c(e),t.map((function(t){t.reason.length&&(e+=1)})),c(e),e||n.length||r(!1)}()}),[i]),Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"flex-col pb-5",children:[Object(Y.jsx)("label",{className:"font text-md",children:"The following data is invalid. Please correct them and upload again."}),Object(Y.jsx)("ul",{className:"pl-2 text-red-800",children:n.length?n.map((function(e,t){return Object(Y.jsxs)("li",{children:["Invalid Header : ",e.invalidColumn]},t)})):""}),Object(Y.jsx)("label",{className:"font text-md",children:"Correct the errors and upload again."})]}),Object(Y.jsx)(y.a,{dataSource:t,columns:o,bordered:!0,pagination:{}})]})},Ae=function(e){var t=e.cardClass,n=void 0===t?"":t,a=e.cardWidth,r=void 0===a?"":a,c=e.cardBg,i=void 0===c?"bg-white":c,o=e.cardBorder,s=void 0===o?"border":o,l=e.cardBorderColor,u=void 0===l?"border-gray-200":l,d=e.cardRadius,b=void 0===d?"rounded-2xl":d,m=e.cardPadding,j=void 0===m?"":m,p=e.cardShadow,h=void 0===p?"":p,f=e.children,O=e.cardHeight,v=void 0===O?"":O,x=e.onClick;return Object(Y.jsx)("div",{className:"".concat(r," ").concat(v," ").concat(i," ").concat(s," ").concat(u," ").concat(b," ").concat(j," ").concat(h," ").concat(n," "),onClick:x,children:f})},Re=n(330),Me=n(331),Fe=n(93),Ve=n(3),Be=function(e){var t=e.acceptedFile,n=e.onValidate,a=e.resetUploadedCsv,r=e.setCsvArray,c=e.onCancel,i=e.setCsvErrors,o=e.setHasErrors,s=e.dataKeysMap,l=(e.validateButtonRef,Object(Fe.c)().readString),u=s,d=function(e){if(0===e.length||e.length>0&&0===Object.keys(e[0]).length)return alert("Error!! Empty Csv file upload!"),null;var t=[],n=[];return Object.keys(e[0]).forEach((function(e){u[e]||t.push({invalidColumn:e})})),t.length?console.log("invalidHeaders",t):(n=function(e,t){return t.map((function(t){return Object.keys(t).reduce((function(n,a){return Object(j.a)(Object(j.a)({},n),Object(Ve.a)({},e[a]||a,t[a]))}),{})}))}(u,e),r(n)),{newCsv:n,invalidHeaders:t}},b=function(){r(null),i([]),o(!1),function(e){if(null===t)return alert("Error !! Empty Csv file upload!"),a(),[];e()}((function(){console.log("acceptedFile",t),l(t,{worker:!0,header:!0,skipEmptyLines:!0,complete:function(e){var t=d(e.data);if(console.log("results.data",e.data),t){var a=Object(j.a)({},t),r=a.newCsv,i=a.invalidHeaders;n({newCsv:r,invalidHeaders:i})}else c()}})}))};return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsxs)("div",{className:"flex justify-end items-center mt-5",children:[Object(Y.jsx)(be,{type:"button",variant:"outlineBtn",btnClass:"text-sm font-normal py-3 px-6",onClick:function(){return c()},children:"Cancel"}),Object(Y.jsx)(be,{type:"submit",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 py-3 px-8",onClick:function(){return b()},children:"Save"})]})})},Le=function(e){var t=e.validateBulkCreation,n=e.onCancel,c=e.hasErrors,i=e.setHasErrors,o=(e.csvErrors,e.setCsvErrors),l=e.csvArray,u=e.setCsvArray,d=e.validateButtonRef,b=(e.invalidHeader,e.setInvalidHeader),m=e.record,h=e.setRecord,O=e.dataKeysMap,v=Object(Fe.b)().CSVReader,x=r.a.useRef(),y=Object(a.useState)(null),g=Object(s.a)(y,2),N=g[0],C=g[1],S=function(){var e=Object(p.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.newCsv,r=n.invalidHeaders,h(!1),a||w(),t(a,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e;n(),null===(e=x.current)||void 0===e||e.click()};return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)("div",{className:"",children:Object(Y.jsx)(v,{onUploadAccepted:function(e){C(e),i(!1),u(null)},children:function(e){var t=e.getRootProps,a=e.acceptedFile,r=(e.ProgressBar,e.getRemoveFileProps),s=Object(Y.jsx)("div",{className:"absolute group-hover:flex hidden w-53.5 h-25  top-0 left-0 items-center justify-center before:w-full before:h-full before:left-0 before:bg-black before:opacity-70",children:Object(Y.jsx)("div",Object(j.a)(Object(j.a)({ref:x,className:"absolute cursor-pointer "},r()),{},{children:Object(Y.jsx)(Re.a,{})}))});return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"relative w-53.5 h-25 mb-2 cursor-pointer",children:Object(Y.jsxs)("div",Object(j.a)(Object(j.a)({},t()),{},{children:[Object(Y.jsx)("input",{className:"shadow hidden appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),Object(Y.jsxs)("div",{className:"p-2 border border-dashed bg-gray-100 border-gray-300 w-53.5 h-25 flex items-center justify-center",children:[!a&&Object(Y.jsxs)("div",{className:"text-center",children:[Object(Y.jsx)(Me.a,{}),Object(Y.jsxs)(ie,{children:["Drag the file or ",Object(Y.jsx)("span",{className:"text-info ",children:"Browse"})]})]}),a&&Object(Y.jsxs)("div",{className:"relative w-53.5 h-25 align-middle mb-6 group flex items-center justify-center",children:[a.name,s]},a.name)]})]}))}),Object(Y.jsx)(Be,{csvFileData:N,acceptedFile:a,onValidate:S,getRemoveFileProps:r,resetUploadedCsv:w,setCsvArray:u,setInvalidHeader:b,onCancel:n,setCsvErrors:o,setHasErrors:i,dataKeysMap:O,validateButtonRef:d}),Object(Y.jsx)("div",{className:"pb-5",children:l&&(c?Object(Y.jsxs)("label",{className:"font text-md text-red-800 ",children:[m," records needs correction. "]}):Object(Y.jsx)("label",{className:"font text-md ",children:" All records are valid. "}))})]})}})})})};function Pe(e){var t=e.sampleData,n=(e.fileName,e.children),a=e.page,r=Object(Fe.a)(),c=r.CSVDownloader,i=r.Type;return Object(Y.jsx)(c,{variant:"Link",type:i.Button,filename:"".concat(a,"-sample-file"),bom:!0,config:{delimiter:","},data:t,children:n})}var Ue=function(e){var t=e.headingChildren,n=e.textChildren,a=e.getIcon,r=e.onIconClick,c=e.headingStyle,i=void 0===c?"":c;return Object(Y.jsxs)("div",{className:"flex items-center ".concat(r?"cursor-pointer":""),onClick:r,children:[Object(Y.jsx)("div",{className:"flex shrink-0 mr-2",children:a()}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(ce,{type:"h4",className:"leading-8 ".concat(i),children:t}),n&&Object(Y.jsx)(ie,{className:"text-sm font-light text-gray-500",children:n})]})]})},Ye=n(332),He=n(191),_e=n(319),qe=n(318),Ge=n(115),ze=n(321),Ke=["index"],We=["title","editable","children","dataIndex","record","handleSave","customerData","milk"],Je=r.a.createContext(null),Qe=function(e){e.index;var t=Object(ae.a)(e,Ke),n=qe.a.useForm(),a=Object(s.a)(n,1)[0];return Object(Y.jsx)(qe.a,{form:a,component:!1,children:Object(Y.jsx)(Je.Provider,{value:a,children:Object(Y.jsx)("tr",Object(j.a)({},t))})})},Xe=function(e){var t=e.title,n=e.editable,r=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,l=e.customerData,u=e.milk,d=Object(ae.a)(e,We),b=Object(a.useState)(!1),m=Object(s.a)(b,2),p=m[0],h=(m[1],Object(a.useRef)(null));Object(a.useContext)(Je);Object(a.useEffect)((function(){p&&h.current.focus()}),[p]);var f=function(e,t){var n={};if("categoryName"===c){var a="special"==l.type?u[t].normal.gstRate:u[t].gstRate;n={categoryName:u[t].name,categoryId:t,rate:u[t].rate,gstRate:a},void 0!=i.quantity&&(n.total=Math.round(parseFloat(n.rate)*parseFloat(i.quantity)*10)/10,n.totalWithTax=Math.round(10*(n.total+n.total*n.gstRate/100))/10)}"quantity"==c&&void 0!=i.rate&&((n={quantity:t}).total=Math.round(parseFloat(i.rate)*parseFloat(t)*10)/10,n.totalWithTax=Math.round(10*(n.total+n.total*i.gstRate/100))/10),o(Object(j.a)(Object(j.a)({},i),n))},O=r;return n&&(O="Total Amount"!=i.categoryName?Object(Y.jsx)(qe.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:"categoryName"!==c?Object(Y.jsx)(He.a,{onChange:function(e){return f(0,e.target.value)}}):Object(Y.jsx)(Ge.a,{label:"Customer",editable:!0,showSearch:!0,optionFilterProp:"children",showArrow:!1,onChange:function(e){return f(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:Object.values(u).map((function(e,t){return Object(Y.jsx)(Option,{value:e.id,children:e.name},t)}))},"customerId")}):Object(Y.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:r})),Object(Y.jsx)("td",Object(j.a)(Object(j.a)({},d),{},{children:O}))},Ze=function(e){var t=e.setTransactions,n=e.customerData,r=e.transactions,c=e.milk,i=e.notEditable,o=e.invoiceDetails,l=Object(a.useState)([]),u=Object(s.a)(l,2),d=u[0],b=u[1],p=Object(a.useState)(0),h=Object(s.a)(p,2),f=h[0],O=h[1];Object(a.useEffect)((function(){b(r)}),[r]);var v=function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})},x=[{title:"Item Name",dataIndex:"categoryName",width:"35%",editable:!i},{title:"Item Code",dataIndex:"itemCode",width:"15%",editable:!i},{title:"Rate",dataIndex:"rate",width:"10%",render:v},{title:"Quantity",dataIndex:"quantity",width:"10%",editable:!i},{title:"Total",dataIndex:"total",width:"20%",render:v}];i||x.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,t){return"Total Amount"!==t.categoryName&&d.length>=1?Object(Y.jsx)(ze.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var t=d.filter((function(t){return t.key!==e}));b(t)}(t.key)},children:Object(Y.jsx)("a",{children:"Delete"})}):null}});var g=function(e){var n=Object(m.a)(d),a=n.findIndex((function(t){return e.key===t.key})),r=n[a];n.splice(a,1,Object(j.a)(Object(j.a)({},r),e)),b(n),t(n)},N={body:{row:Qe,cell:Xe}},C=x.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{onCell:function(t,a){var r={},i=["Total Amount","Taxable Value","IGST","CGST"];return i.includes(t.categoryName)&&"categoryName"==e.dataIndex&&(r={colSpan:4}),!i.includes(t.categoryName)||"quantity"!=e.dataIndex&&"rate"!=e.dataIndex&&"itemCode"!=e.dataIndex||(r={colSpan:0}),e.editable?Object(j.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:g,customerData:n,milk:c},r):r}})})),S=2,w={key:f+S++,categoryName:"Taxable Value",total:o.taxableAmount,render:v},I={key:f+S++,categoryName:"IGST",total:o.igst},k={key:f+S++,categoryName:"CGST",total:o.cgst},E={key:f+S++,categoryName:"SGST",total:o.sgst},D={key:f+S++,categoryName:"Cess",total:o.cess},T={key:f+S++,categoryName:"Round Off",total:o.roundOff},A={key:f+S++,categoryName:"Total Amount",total:o.totalValue};return Object(Y.jsxs)("div",{children:[i?null:Object(Y.jsx)(z.a,{onClick:function(){var e={key:f,categoryName:"Select Item",rate:"0",quantity:"0",total:0,gstRate:0,totalWithTax:0};b([].concat(Object(m.a)(d),[e])),O(f+1)},type:"primary",style:{marginBottom:16},children:"Add a item"}),Object(Y.jsx)(y.a,{components:N,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:[].concat(Object(m.a)(d),[w,I,k,E,D,T,A]),columns:C,pagination:!1})]})},$e=O.a.Title,et=function(e){var t,n=e.visible,r=e.setVisible,c=e.invoiceId,i=Object(a.useState)({transactions:[]}),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)({}),b=Object(s.a)(d,2),m=(b[0],b[1],function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:r=e.sent,console.log(r),c=null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity.transactions.map((function(e){e.rate,e.quantity;return{itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:e.rate*e.quantity}})),u(Object(j.a)(Object(j.a)({},null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity),{},{transactions:c}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(a.useEffect)(Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("calling",c),!c){e.next=4;break}return e.next=4,m(c);case 4:case"end":return e.stop()}}),e)}))),[c]),Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(_e.a,{title:"Invoice Details",visible:n,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return r(!1)},footer:[],children:Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(v.a,{children:[Object(Y.jsx)(x.a,{span:18,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Customer Name : ",null===l||void 0===l||null===(t=l.customer)||void 0===t?void 0:t.name]})}),Object(Y.jsx)(x.a,{span:6,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Dated : ",U()(null===l||void 0===l?void 0:l.invoiceDate).format("DD-MM-YYYY")]})}),Object(Y.jsx)(x.a,{span:12,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Invoice Number : ",null===l||void 0===l?void 0:l.invoiceNumber]})})]}),Object(Y.jsx)(v.a,{children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(Ze,{customerData:l&&l.customerId&&(null===l||void 0===l?void 0:l.customer),transactions:l&&(null===l||void 0===l?void 0:l.transactions),milk:{},notEditable:!0,invoiceDetails:l})})})]})})})},tt=[{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Receipt Date",name:"receiptDate",type:"input",inputType:"text"},{label:"Nature",name:"nature",type:"input",inputType:"text"},{label:"Receipt VIA",name:"via",inputType:"text",list:"customerType"},{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Amount",name:"amount",inputType:"number",list:"customerType"}],nt=n(316);n(114);var at=function(e,t){var n=Object(s.a)(t,3),a=n[0],r=n[1],c=n[2],i=U()(e);return i.set("hour",a),i.set("minute",r),i.set("second",c),i.toDate()},rt=function(e){var t=null,n=null;return e.length>0&&(t=at(e[0],[0,0,0]),n=at(e[1],[23,59,59])),{fromDate:t,toDate:n}},ct=nt.a.RangePicker,it=function(e){var t,n=e.visible,r=e.onOk,c=e.onCancel,i=e.page,o=e.filters,l=Object(a.useState)(null!==(t=o.dateRange)&&void 0!==t&&t.fromDate?[U()(o.dateRange.fromDate),U()(o.dateRange.toDate)]:[]),u=Object(s.a)(l,2),d=u[0],b=u[1],m=Object(a.useState)(o.companyIds?o.companyIds:[]),j=Object(s.a)(m,2),h=j[0],O=j[1],v=Object(a.useState)(o.customerIds?o.customerIds:[]),x=Object(s.a)(v,2),y=x[0],g=x[1],N=function(){r({dateRange:rt(d),companyIds:h,customerIds:y})},C=Object(a.useState)([]),S=Object(s.a)(C,2),I=S[0],D=S[1],T=Object(a.useState)([]),A=Object(s.a)(T,2),R=A[0],M=A[1],F=function(e){return e.map((function(e,t){return Object(Y.jsx)(Option,{value:e.value,children:e.label},t)}))},V=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=void 0,r=void 0,c=void 0,k.get(w("/companies",{},{search:a,offset:r,limit:c}),{headers:E()});case 2:n=e.sent,D(null===(t=n.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.division," - ").concat(e.name)}})));case 4:case"end":return e.stop()}var a,r,c}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="sales"==i||"receipts"==i?"customer":"vendor",e.next=3,r=n,c=void 0,o=void 0,s=void 0,k.get(w("/customers",{},{type:r,search:c,offset:o,limit:s}),{headers:E()});case 3:a=e.sent,M(null===(t=a.data.entity)||void 0===t?void 0:t.rows.map((function(e){return{value:e.id,label:"".concat(e.name)}})));case 5:case"end":return e.stop()}var r,c,o,s}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){n&&(V(),B())}),[n]);return Object(Y.jsxs)(_e.a,{title:"Filter",visible:n,onOk:N,onCancel:c,footer:[Object(Y.jsx)(z.a,{onClick:function(){return b([]),O([]),void g([])},children:"Clear Filter"},"cancel"),Object(Y.jsx)(z.a,{type:"primary",onClick:function(){return N()},children:"Apply Filter"},"save")],children:[Object(Y.jsxs)("label",{children:["receipts"==i?"Receipt":"payments"==i?"Payment":"Invoice"," Date Range"]}),Object(Y.jsx)(ct,{style:{width:"100%"},dateRender:function(e){var t={};return 1===e.date()&&(t.border="1px solid #1890ff",t.borderRadius="50%"),Object(Y.jsx)("div",{className:"ant-picker-cell-inner",style:t,children:e.date()})},onChange:function(e){return b(e)},value:d}),Object(Y.jsx)("br",{}),Object(Y.jsx)("br",{}),Object(Y.jsx)("label",{children:"Division"}),Object(Y.jsx)(Ge.a,{placeholder:"Divisions",allowClear:!0,style:{width:"100%"},value:h,onChange:O,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:F(I)}),Object(Y.jsx)("br",{}),Object(Y.jsx)("br",{}),Object(Y.jsx)("label",{children:"sales"==i||"receipts"==i?"Customers":"Vendors"}),Object(Y.jsx)(Ge.a,{placeholder:"Customers",value:y,allowClear:!0,style:{width:"100%"},onChange:g,mode:"multiple",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:F(R)})]})},ot=n(198),st=function(e){var t=e.filters,n=e.onRemoveFilter,a=(e.page,!1);Object.keys(t).length>0&&(a=!0);var r={dateRange:{label:"Date Range",checkFunction:function(e){var t;return null===(t=e.dateRange)||void 0===t?void 0:t.fromDate}},companyIds:{label:"Divisions",checkFunction:function(e){var t;return(null===(t=e.companyIds)||void 0===t?void 0:t.length)>0}},customerIds:{label:"Customers",checkFunction:function(e){var t;return(null===(t=e.customerIds)||void 0===t?void 0:t.length)>0}}};return Object(Y.jsx)(Y.Fragment,{children:a&&Object(Y.jsx)("div",{className:"mt-5",children:Object.keys(t).filter((function(e){return r[e].checkFunction(t)})).map((function(e){return Object(Y.jsx)(ot.a,{color:"processing",closable:!0,onClose:function(){return function(e){n(e)}(e)},children:r[e].label})}))})})},lt=O.a.Title,ut=function(e){var t=e.page,n=e.reload,r=Object(a.useState)(null),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(s.a)(l,2),d=u[0],b=u[1],m=Object(a.useState)(null),h=Object(s.a)(m,2),g=h[0],N=h[1],C=Object(a.useState)(1),S=Object(s.a)(C,2),w=S[0],I=S[1],k=Object(a.useState)(10),E=Object(s.a)(k,2),D=E[0],T=E[1],A=Object(a.useState)(0),R=Object(s.a)(A,2),F=R[0],V=R[1],P=Object(a.useState)(""),H=Object(s.a)(P,2),_=H[0],q=H[1],G=Object(a.useState)({}),K=Object(s.a)(G,2),W=K[0],J=K[1],Q=Object(a.useState)(!1),X=Object(s.a)(Q,2),Z=X[0],$=X[1],ee=function(){var e=Object(p.a)(f.a.mark((function e(){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="receipts"==t||"payments"==t?B:M,e.next=3,r(t,_,(w-1)*D,D,JSON.stringify(W));case 3:c=e.sent,o(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.entity.rows.map((function(e){var n,a,r;return Object(j.a)(Object(j.a)({},e),{},{invoiceNumber:"receipts"==t||"payments"==t?null===(n=e.invoice)||void 0===n?void 0:n.invoiceNumber:e.invoiceNumber,customerName:null===(a=e.customer)||void 0===a?void 0:a.name,customerCode:null===(r=e.customer)||void 0===r?void 0:r.code,invoiceDate:e.invoiceDate?U()(e.invoiceDate).format("DD-MM-YYYY"):null,companyName:e.company.name,division:e.company.division,receiptDate:e.receiptDate?U()(e.receiptDate).format("DD-MM-YYYY"):null})}))),V(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.entity.count);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ee()}),[t,w,D,n,_,W]);for(var te=function(e){return"invoiceNumber"==e.name?{render:function(e,n){var a,r="receipts"==t||"payments"==t?null===(a=n.invoice)||void 0===a?void 0:a.id:n.id;return Object(Y.jsx)("div",{children:Object(Y.jsx)("a",{onClick:function(){return function(e){N(e),b(!0)}(r)},className:"underline text-blue-900",children:e})})}}:"number"===e.inputType?{render:function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}},ne=function(e){return"purchase"!=t&&"payments"!=t||"customerName"!=e.name&&"customerCode"!=e.name?"payments"!=t||"receiptDate"!=e.name&&"via"!=e.name?e.label:e.label.replace("Receipt","Payment"):e.label.replace("Customer","Vendor")},ae=("receipts"==t||"payments"==t?tt:L).map((function(e){return Object(j.a)({title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:ne(e)}),dataIndex:e.name,key:e.name,width:"150px"},te(e))})),re=[10,20,50,100],ce=[];re.length>0&&re[0]<F;)ce.push(re[0]+""),re.shift();F>10&&ce.push(F+"");return Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(lt,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"sales"===t?"Sale Invoices":"purchases"===t?"Purchase Invoices":"receipts"===t?"Receipts":"payments"===t?"Payments":void 0}),Object(Y.jsx)("div",{className:"mb-2",children:Object(Y.jsxs)(v.a,{className:"w-full",children:[Object(Y.jsx)(x.a,{span:12,children:Object(Y.jsx)(He.a,{placeholder:"Search...",value:_,onChange:function(e){return q(e.target.value)}})}),Object(Y.jsx)(x.a,{span:3,className:"ml-5",children:Object(Y.jsx)(z.a,{onClick:function(){return $(!Z)},children:"Filter"})}),Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(st,{filters:W,onRemoveFilter:function(e){J(Object(j.a)(Object(j.a)({},W),{},Object(Ve.a)({},e,null)))}})})]})}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:i,columns:ae,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:ce,ocurrent:w,pageSize:D,onChange:function(e){I(e)},onShowSizeChange:function(e,t){T(t),I(1)},total:F,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(Y.jsx)(et,{visible:d,setVisible:b,invoiceId:g}),Z&&Object(Y.jsx)(it,{visible:Z,onCancel:function(){return $(!1)},onOk:function(e){return J(e),void $(!1)},page:t,filters:W})]})})},dt=function(e){var t=e.page,n=Object(a.useState)(null),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(s.a)(o,2),u=l[0],d=l[1],m=Object(a.useState)(!1),j=Object(s.a)(m,2),h=j[0],O=j[1],v=Object(a.useState)([]),x=Object(s.a)(v,2),y=x[0],g=x[1],N=Object(a.useState)(null),C=Object(s.a)(N,2),S=C[0],w=C[1],I=Object(a.useState)(!1),k=Object(s.a)(I,2),E=k[0],D=k[1],T=Object(a.useState)(!1),M=Object(s.a)(T,2),F=(M[0],M[1]),V=Object(a.useRef)(null);Object(a.useEffect)((function(){B()}),[t]),Object(a.useEffect)((function(){O(!0)}),[u]);var B=function(){F(!1),i(null),d([]),O(!1),g([]),w(null)},L=function(){var e=Object(p.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,"csvData"),a="receipts"==t||"payments"==t?R:A,e.next=4,a(n,t);case 4:r=e.sent,console.log(r,"res"),r.data.status&&(r.data.entity.csvErrorArray?d(r.data.entity.csvErrorArray):(d([]),D(!0)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0?g(n):L(t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=bt(t);return Object(Y.jsxs)("div",{className:"scr",children:[Object(Y.jsx)(b.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(Y.jsx)(b.a.Item,{children:t.toUpperCase()})}),Object(Y.jsxs)(Ae,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:[Object(Y.jsxs)("div",{className:"w-2/5 py-8",children:[Object(Y.jsx)(Ue,{getIcon:function(){return Object(Y.jsx)(Ye.a,{style:{fontSize:"450%"}})},headingChildren:"Bulk Upload",textChildren:"Upload the required file"}),Object(Y.jsxs)(ie,{className:"pl-14 pt-4",children:["To download a sample ",Object(Y.jsx)("b",{children:t})," file"," ",Object(Y.jsx)(Pe,{page:t,sampleData:[U],fileName:"sample-file",children:Object(Y.jsx)("div",{variant:"Link",className:"text-primary-500 font-semibold text-sm mt-2",children:"Click here"})})]})]}),Object(Y.jsx)("div",{className:"w-3/5 pl-25 py-8 mt-12",children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)(ue,{fontWeight:"font-normal",children:"Upload File"}),Object(Y.jsx)(Le,{validateBulkCreation:P,handleBulkCreation:L,hasErrors:h,setHasErrors:O,csvErrors:u,setCsvErrors:d,csvArray:c,setCsvArray:i,onCancel:B,validateButtonRef:V,invalidHeader:y,setInvalidHeader:g,record:S,setRecord:w,dataKeysMap:U})]})})]}),h&&Object(Y.jsx)(Ae,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:Object(Y.jsx)("div",{className:"w-full",children:Object(Y.jsx)(Te,{tableData:u,invalidHeader:y,setHasErrors:O,hasErrors:h,setRecord:w,record:S})})}),Object(Y.jsx)(ut,{page:t,reload:E})]})},bt=function(e){return"sales"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"purchase"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"receipts"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","RECEIPT VIA":"via",AMOUNT:"amount","RECEIPT DATE":"receiptDate"}:"payments"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","PAID VIA":"via",AMOUNT:"amount","PAYMENT DATE":"receiptDate"}:void 0},mt=[{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Total Collection",name:"toatalCollection",inputType:"number",list:"customerType"},{label:"Total Payment",name:"toatlPayment",inputType:"number",list:"customerType"},{label:"Fund Available",name:"fundAvailable",inputType:"number",list:"customerType"}],jt=O.a.Title,pt=function(e){e.page;var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(U()().format("YYYY-MM-DD")),b=Object(s.a)(d,2),m=b[0],h=b[1],g=Object(a.useState)(U()().format("YYYY-MM")),N=Object(s.a)(g,2),C=N[0],S=N[1],w=function(e,t){for(var n={},a=0;a<e.length;a++){var r=e[a];n[r.company_id]||(n[r.company_id]={id:r.company_id,companyName:r.name,division:r.division,fundAvailable:0});var c=n[r.company_id];"receipts"==r.type&&(c.toatalCollection="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year),"payments"==r.type&&(c.toatlPayment="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year)}return Object.values(n)},I=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,m,C.split("-")[1],C.split("-")[0]);case 2:a=e.sent,console.log(a),r=null===(n=a.data)||void 0===n?void 0:n.entity,"date"==t?c(Object.values(w(r,t))):u(Object.values(w(r,t)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){I("date")}),[m]),Object(a.useEffect)((function(){I("month")}),[C]);var k=mt.map((function(e){return Object(j.a)({title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"},function(e){return"number"===e.inputType?{render:function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}}(e))}));return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(jt,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["As on ",Object(Y.jsx)("input",{type:"date",onChange:function(e){return h(e.target.value)},value:m})]}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:r,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(jt,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Month Report ",Object(Y.jsx)("input",{type:"month",onChange:function(e){return S(e.target.value)},value:C})]}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:l,columns:k,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},ht=u.a.Header,ft=u.a.Content,Ot=(u.a.Footer,u.a.Sider),vt=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];if(!S())return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(we,{})});return Object(Y.jsxs)(u.a,{className:"h-screen",children:[Object(Y.jsx)(Ot,{collapsible:!0,collapsed:n,onCollapse:function(e){return r(e)},children:Object(Y.jsx)(te,{collapsed:n})}),Object(Y.jsxs)(u.a,{className:"site-layout",children:[Object(Y.jsx)(ht,{className:"site-layout-background",style:{padding:0},children:Object(Y.jsxs)(d.a,{mode:"horizontal",style:{float:"right",width:"auto"},children:[Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Ie.a,{})},"notification"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(ke.a,{})},"mail"),Object(Y.jsx)(d.a.SubMenu,{icon:Object(Y.jsx)(Ee.a,{}),children:Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(De.a,{}),onClick:function(){C.remove("AUTH",{path:"/"}),window.location.reload(!1)},children:"Sign Out"},"logout")},"profile")]})}),Object(Y.jsx)(ft,{style:{margin:"0 16px"},children:Object(Y.jsx)("div",{style:{padding:10,height:"calc(100vh - 90px)",overflowY:"auto"},children:Object(Y.jsxs)(l.c,{children:[Object(Y.jsx)(l.a,{exact:!0,path:"/",children:Object(Y.jsx)(pt,{})}),Object(Y.jsx)(l.a,{exact:!0,path:"/sales-reports",children:Object(Y.jsx)(G,{page:"sales"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/purchase-reports",children:Object(Y.jsx)(G,{page:"purchase"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/sales",children:Object(Y.jsx)(dt,{page:"sales"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/purchases",children:Object(Y.jsx)(dt,{page:"purchase"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/receipts",children:Object(Y.jsx)(dt,{page:"receipts"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/payments",children:Object(Y.jsx)(dt,{page:"payments"})})]})})})]})]})};i.a.render(Object(Y.jsx)(r.a.StrictMode,{children:Object(Y.jsx)(o.a,{children:Object(Y.jsx)(vt,{})})}),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.bc78ceb6.chunk.js.map