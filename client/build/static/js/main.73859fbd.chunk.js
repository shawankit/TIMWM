(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[0],{154:function(e,t,a){},194:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),i=a.n(c),o=a(57),s=(a(154),a(5)),l=a(34),u=(a(155),a(194),a(300)),d=a(66),b=a(305),m=a(7),p=a(1),j=a(30),h=a(20),f=a.n(h),O=(a(143),a(302)),v=a(298),x=a(299),y=a(301),g=a(174),N=a.n(g),C=new(a(185).a),S=function(){return C.get("AUTH")},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="".concat(e);t&&Object.keys(t).forEach((function(e){return n=n.replace(":".concat(e),t[e])}));var r={};if(a){Object.keys(a).forEach((function(e){void 0!==a[e]&&null!==a[e]&&(r[e]=a[e])}));var c=new URLSearchParams(r);n+="?".concat(c.toString())}return n},w="http://".concat(window.location.hostname,":8000"),E=N.a.create({baseURL:w}),T=function(){return{"content-type":"application/json","x-access-token":S().token}},k=function(e){return E.post("/auth/mobile/sendOTP",{mobileNumber:e})},D=function(e,t){return E.post("/auth/mobile/user",{mobileNumber:e,otp:t})},A=function(e,t){return E.post("/sales",{sales:e,type:t},{headers:T()})},M=function(e,t){return E.post("/receipts",{receipts:e,type:t},{headers:T()})},R=function(e,t,a,n){return E.get(I("/invoices",{},{type:e,search:t,offset:a,limit:n}),{headers:T()})},V=function(e){return E.get("/invoices/".concat(e),{headers:T()})},B=function(e,t,a,n){return E.get(I("/fund-reports",{},{reportType:e,date:t,month:a,year:n}),{headers:T()})},F=function(e,t,a,n){return E.get(I("/receipts",{},{type:e,search:t,offset:a,limit:n}),{headers:T()})},P=[{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Invoice Date",name:"invoiceDate",type:"input",inputType:"text"},{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Taxable Amount",name:"taxableAmount",inputType:"number",list:"customerType"},{label:"Total Amount",name:"totalValue",inputType:"number",list:"customerType"}],U=a(61),L=a.n(U),Y=a(4),H=O.a.Title,_=function(e){var t=e.page,a=["January","February","March","April","May","June","July","August","September","October","November","December"],r=Object(n.useState)(null),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),d=u[0],b=u[1],h=function(){var e=Object(j.a)(f.a.mark((function e(){var n,r,c,i,s,l,u,d,m,j,h,O,v,x,y;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f=t,E.get("/reports?type=".concat(f),{headers:T()});case 2:for(r=e.sent,console.log("response",r),c=null===(n=r.data)||void 0===n?void 0:n.entity,i=q(2023),s={},l={},u=0;u<c.length;u++)d=c[u],m="".concat(a[d.month-1].slice(0,3),"-").concat(d.year.toString().slice(-2)),s[d.division]||(s[d.division]={}),s[d.division][m]=d.taxable_amount,l[d.name]||(l[d.name]={}),l[d.name][m]||(l[d.name][m]=0),l[d.name][m]+=d.taxable_amount;for(O in j=[],h=function(e){var t=s[e],a={};i.forEach((function(e){a[e]=t[e]?t[e]:0})),j.push(Object(p.a)({division:e},a))},s)h(O);for(y in o(j),v=[],x=function(e){var t=l[e],a={};i.forEach((function(e){a[e]=t[e]?t[e]:0})),v.push(Object(p.a)({company:e},a))},l)x(y);b(v);case 17:case"end":return e.stop()}var f}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h()}),[t]);var g=q(2023).map((function(e){return{label:e,name:e,render:function(e,t){return Object(Y.jsx)("div",{children:e.toLocaleString("en-IN")})}}})),N=function(e){return e.map((function(e){return{title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px",render:e.render}}))},C=function(e,t){return Object(Y.jsx)("div",{children:e})},S=N([{label:"Division",name:"division",render:C}].concat(Object(m.a)(g))),I=N([{label:"Company",name:"company",render:C}].concat(Object(m.a)(g)));return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(H,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Division"}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:i,columns:S,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(H,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Reports By Company"}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:d,columns:I,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},q=function(e){for(var t=["April","May","June","July","August","September","October","November","December","January","February","March"],a=[],n=new Date,r=n.getMonth(),c=n.getFullYear(),i=0;i<t.length;i++){var o=t[i],s=i<9?e-1:e;a.push("".concat(o.slice(0,3),"-").concat(s.toString().slice(-2)))}return c===e&&r<3&&(a=a.slice(0,12-(3-r))),c===e-1&&r>=3&&(a=a.slice(0,r-3)),a},G=function(e){var t=e.page;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(b.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(Y.jsxs)(b.a.Item,{children:["sales"==t?"Sales":"Purchase"," Report"]})}),Object(Y.jsx)(_,{page:t})]})},z=a(45),K=a(307),W=a(308),J=a(309),Q=a(310),X=a(311),Z=a(312),$=a(313),ee=a(314),te=function(e){e.collapsed;var t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(void 0),l=Object(s.a)(i,2),u=l[0],b=l[1];Object(n.useEffect)((function(){var e=function(){return b(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){c(!(u<=800))}),[u]);var m="/"===window.location.pathname?["fund-reports"]:[window.location.pathname.replace("/","")];return Object(Y.jsxs)("div",{className:"nav-container  h-screen",children:[Object(Y.jsxs)("div",{className:"logo-container",children:[Object(Y.jsx)(O.a.Title,{level:2,className:"logo",children:Object(Y.jsx)(o.b,{to:"/",children:"TIMWM"})}),Object(Y.jsx)(z.a,{className:"menu-control-container",onClick:function(){return c(!r)},children:Object(Y.jsx)(K.a,{})})]}),r&&Object(Y.jsxs)(d.a,{theme:"dark",mode:"inline",defaultOpenKeys:["reports"],defaultSelectedKeys:m,subMenuOpenDelay:.2,children:[Object(Y.jsxs)(d.a.SubMenu,{title:"Reports",icon:Object(Y.jsx)(W.a,{}),children:[Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(J.a,{}),children:Object(Y.jsx)(o.b,{to:"/",children:"Fund Reports"})},"fund-reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(J.a,{}),children:Object(Y.jsx)(o.b,{to:"/sales-reports",children:"Sales Report"})},"sales-reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Q.a,{}),children:Object(Y.jsx)(o.b,{to:"/purchase-reports",children:"Purchase Report"})},"purchase-reports")]},"reports"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(X.a,{}),children:Object(Y.jsx)(o.b,{to:"/sales",children:"Sales"})},"sales"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Z.a,{}),children:Object(Y.jsx)(o.b,{to:"/purchases",children:"Purchases"})},"purchases"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)($.a,{}),children:Object(Y.jsx)(o.b,{to:"/receipts",children:"Receipts"})},"receipts"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(ee.a,{}),children:Object(Y.jsx)(o.b,{to:"/payments",children:"Payments"})},"payments")]})]})},ae=a(180),ne=a(10),re=["children","type","className"],ce=function(e){var t=e.children,a=e.type,n=void 0===a?"h1":a,r=e.className,c=void 0===r?"":r,i=Object(ne.a)(e,re),o={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},s=o[n]?o[n]:"h1";return Object(Y.jsx)(s,Object(p.a)(Object(p.a)({className:"".concat(c)},i),{},{children:t}))},ie=function(e){var t=e.className,a=void 0===t?"":t,n=e.children,r=e.whiteSpace,c=void 0===r?"normal":r,i=e.onClick;return Object(Y.jsx)("p",{className:"".concat(a),style:{whiteSpace:c},onClick:i,children:n})},oe=a.p+"static/media/cryptocurrency.1548aced.png",se=a.p+"static/media/login-bg.a6a7c455.jpg",le=function(e){var t=e.loginContentHeading,a=e.loginContentDesc;return Object(Y.jsxs)("div",{className:"md:min-h-screen relative p-6 py-8 md:py-16 md:px-9 overflow-hidden bg-gradient-secondary md:bg-transparent",children:[Object(Y.jsxs)("div",{className:"relative z-10 max-w-md",children:[Object(Y.jsx)("img",{src:oe,width:"170",height:"34",alt:"logo"}),Object(Y.jsx)(ce,{type:"h3",className:"text-2xl md:text-3xl md:mt-24 mt-5 mb-4 text-white",children:t}),Object(Y.jsx)(ie,{className:"text-white",children:a})]}),Object(Y.jsx)("div",{className:"hidden md:block min-h-screen absolute w-full h-full top-0 left-0 z-0 login-bg",children:Object(Y.jsx)("img",{src:se,layout:"fixed",objectFit:"cover",width:"1024",height:"1024",alt:"login bg"})})]})},ue=function(e){var t=e.labelFor,a=void 0===t?"":t,n=e.variant,r=void 0===n?"medium":n,c=e.textColor,i=void 0===c?"text-gray-900":c,o=e.fontWeight,s=void 0===o?"font-bold":o,l=e.className,u=void 0===l?"block mb-2":l,d=e.children,b=e.labelDisable,m=void 0!==b&&b;return Object(Y.jsx)("label",{htmlFor:"".concat(a),variant:{small:"small",medium:"medium",large:"large"}[r],className:"".concat({small:"text-sm",medium:"text-base font-bold",large:"text-lg"}[r]," ").concat(i," ").concat(s,"  ").concat(u," ").concat(m&&"opacity-60 pointer-events-none"),children:d})},de=function(e){var t=e.disabled,a=e.error,n=(e.isRequired,e.register,e.id),r=e.name,c=e.type,i=e.maxLength,o=void 0===i?256:i,s=e.placeholder,l=e.variant,u=void 0===l?"outlineBottom":l,d=e.bg,b=void 0===d?"bg-lightGrey":d,m=e.fontSize,p=void 0===m?"text-base":m,j=(e.borderColor,e.borderRadius),h=void 0===j?"rounded":j,f=e.className,O=void 0===f?"":f,v=(e.onClick,e.value,e.defaultValue),x=e.onChangeValue,y=void 0===x?function(){}:x,g=e.inputLength;e.getValues;return Object(Y.jsxs)("div",{className:"w-full mb-6",children:[Object(Y.jsx)("input",{id:n,type:c,name:r,placeholder:s,variant:{normal:"normal",outline:"outline",outlineBottom:"outlineBottom",error:"error"}[u],className:"".concat({normal:"border-0",outline:"border-gray-200",outlineBottom:"border-b-gray-400",error:"border-error border-b-error"}[u]," w-full border text-gray-900 h-12 px-4 outline-none placeholder:text-grey-400 ").concat(b," ").concat(h," ").concat(p," ").concat(O," ").concat(t&&"opacity-60 pointer-events-none"," ").concat(a?" border border-error border-b-error":""),disabled:void 0!==t&&t,maxLength:o,onChange:function(e){y(e)},defaultValue:v}),a&&Object(Y.jsx)("div",{className:"text-sm text-error pt-1",children:0!=a.length&&a.message}),g&&Object(Y.jsxs)(ie,{className:"text-xs text-gray-400 absolute bottom-2 right-2",children:[inputValue.length,"/",g]})]})},be=function(e){var t=e.type,a=void 0===t?"":t,n=e.children,r=e.variant,c=e.fontWeight,i=void 0===c?"font-medium":c,o=e.padding,s=void 0===o?"py-3 px-6":o,l=e.btnClass,u=void 0===l?"":l,d=e.imgClassName,b=void 0===d?"":d,m=e.imgSrc,p=e.imgWidth,j=e.imgHeight,h=e.imgAlt,f=void 0===h?"":h,O=e.onClick,v=void 0===O?function(){}:O,x=e.disabled,y=e.form,g=e.buttonRef;return Object(Y.jsxs)("button",{type:a,variant:{primaryBtn:"primaryBtn",outlineBtn:"outlineBtn",normalBtn:"normalBtn"}[r],className:"".concat({primaryBtn:"flex items-center justify-center bg-yellow-500 rounded text-white text-base disabled:bg-primary-100 disabled:text-primary-300",outlineBtn:"flex items-center justify-center bg-transparent border border-gray-200 rounded text-gray-500 text-base drop-shadow-btn disabled:bg-primary-100 disabled:text-primary-300",normalBtn:"flex items-center justify-center text-base"}[r]," ").concat(i," ").concat(s," ").concat(u," ").concat(m&&"pl-4"),onClick:v,disabled:x,form:y,ref:g,children:[m?Object(Y.jsx)("span",{className:"mx-2 flex items-center flex-shrink-0 ".concat(b),children:Object(Y.jsx)("img",{src:m,width:p,height:j,alt:f})}):"",n]})},me=function(e){var t=e.loginDetails,a=e.onSubmit,r=e.apierror,c=Object(n.useState)(10!=t.mobileNumber.length),i=Object(s.a)(c,2),o=(i[0],i[1]),l=Object(n.useState)(r),u=Object(s.a)(l,2),d=u[0],b=u[1];return Object(n.useEffect)((function(){b(r)}),[r]),console.log("error",d),Object(Y.jsx)("div",{className:"md:min-h-screen flex items-center px-6 py-14 bg-white lg:pl-20 lg:pr-32",children:Object(Y.jsxs)("div",{className:"w-full max-w-md",children:[Object(Y.jsx)(ce,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:"Login"}),Object(Y.jsx)(ie,{className:"mb-6",children:"Enter your details to get sign in to your account"}),Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target[0].value;console.log(t.length,"mobileNumber"),10==t.length?a({mobileNumber:t}):b("Please enter valid mobile number")},children:[Object(Y.jsx)(ue,{textColor:"text-gray-700",children:"Mobile Number"}),Object(Y.jsx)("div",{className:"mt-2 flex",children:Object(Y.jsx)(de,{id:"mobileNumber",name:"mobileNumber",type:"number",className:"ml-1 rounded-none mb-0",placeholder:"Mobile Number",maxLength:10,isRequired:!0,onChangeValue:function(e){10!=e.target.value.toString().length?(o(!0),b("")):o(!1)},variant:"outlineBottom"})}),d&&0!=d.length&&Object(Y.jsx)("div",{className:"text-sm text-red-700 -mt-5 mb-1",children:0!=d.length&&d}),Object(Y.jsx)(ie,{className:"mb-16 md:mb-10 text-sm text-gray-500",children:"Proceed To Enter PIN"}),Object(Y.jsx)(be,{type:"submit",variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",children:"Proceed"})]})]})})},pe=a(13),je=a(14),he=a(17),fe=a(18),Oe=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"],ve=function(e){return"object"===typeof e},xe=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(e){var n;return Object(pe.a)(this,a),(n=t.call(this,e)).getClasses=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return!ve(e)&&!1!==e})).join(" ")},n.getType=function(){var e=n.props,t=e.isInputSecure,a=e.isInputNum;return t?"password":a?"tel":"text"},n.input=r.a.createRef(),n}return Object(je.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,a=e.shouldAutoFocus,n=this.input.current;n&&t&&a&&n.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,a=this.input.current;e.focus!==t&&a&&t&&(a.focus(),a.select())}},{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.separator,n=e.isLastChild,r=e.inputStyle,c=e.focus,i=e.isDisabled,o=e.hasErrored,s=e.errorStyle,l=e.focusStyle,u=e.disabledStyle,d=(e.shouldAutoFocus,e.isInputNum),b=e.index,m=e.value,j=e.className,h=(e.isInputSecure,Object(ne.a)(e,Oe));return Object(Y.jsxs)("div",{className:j,style:{display:"flex",alignItems:"center"},children:[Object(Y.jsx)("input",Object(p.a)({"aria-label":"".concat(0===b?"Please enter verification code. ":"").concat(d?"Digit":"Character"," ").concat(b+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},ve(r)&&r,c&&ve(l)&&l,i&&ve(u)&&u,o&&ve(s)&&s),placeholder:t,className:this.getClasses(r,c&&l,i&&u,o&&s),type:this.getType(),maxLength:"1",ref:this.input,disabled:i,value:m||""},h)),!n&&a]})}}]),a}(n.PureComponent),ye=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeInput:0},e.getOtpValue=function(){return e.props.value?e.props.value.toString().split(""):[]},e.getPlaceholderValue=function(){var t=e.props,a=t.placeholder,n=t.numInputs;if("string"===typeof a){if(a.length===n)return a;a.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},e.handleOtpChange=function(t){(0,e.props.onChange)(t.join(""))},e.isInputValueValid=function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"===typeof t)&&1===t.trim().length},e.focusInput=function(t){var a=e.props.numInputs,n=Math.max(Math.min(a-1,t),0);e.setState({activeInput:n})},e.focusNextInput=function(){var t=e.state.activeInput;e.focusInput(t+1)},e.focusPrevInput=function(){var t=e.state.activeInput;e.focusInput(t-1)},e.changeCodeAtFocus=function(t){var a=e.state.activeInput,n=e.getOtpValue();n[a]=t[0],e.handleOtpChange(n)},e.handleOnPaste=function(t){t.preventDefault();var a=e.state.activeInput,n=e.props,r=n.numInputs;if(!n.isDisabled){for(var c=e.getOtpValue(),i=a,o=t.clipboardData.getData("text/plain").slice(0,r-a).split(""),s=0;s<r;++s)s>=a&&o.length>0&&(c[s]=o.shift(),i++);e.setState({activeInput:i},(function(){e.focusInput(i),e.handleOtpChange(c)}))}},e.handleOnChange=function(t){var a=t.target.value;e.isInputValueValid(a)&&e.changeCodeAtFocus(a)},e.handleOnKeyDown=function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32!==t.keyCode&&" "!==t.key&&"Spacebar"!==t.key&&"Space"!==t.key||t.preventDefault()},e.handleOnInput=function(t){if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var a=t.nativeEvent;null===a.data&&"deleteContentBackward"===a.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}},e.renderInputs=function(){for(var t=e.state.activeInput,a=e.props,n=a.numInputs,r=a.inputStyle,c=a.focusStyle,i=a.separator,o=a.isDisabled,s=a.disabledStyle,l=a.hasErrored,u=a.errorStyle,d=a.shouldAutoFocus,b=a.isInputNum,m=a.isInputSecure,p=a.className,j=[],h=e.getOtpValue(),f=e.getPlaceholderValue(),O=e.props["data-cy"],v=e.props["data-testid"],x=function(a){j.push(Object(Y.jsx)(xe,{placeholder:f&&f[a],index:a,focus:t===a,value:h&&h[a],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:a}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:i,inputStyle:r,focusStyle:c,isLastChild:a===n-1,isDisabled:o,disabledStyle:s,hasErrored:l,errorStyle:u,shouldAutoFocus:d,isInputNum:b,isInputSecure:m,className:p,"data-cy":O&&"".concat(O,"-").concat(a),"data-testid":v&&"".concat(v,"-").concat(a)},a))},y=0;y<n;y++)x(y);return j},e}return Object(je.a)(a,[{key:"render",value:function(){var e=this.props.containerStyle;return Object(Y.jsx)("div",{style:Object.assign({display:"flex"},ve(e)&&e),className:ve(e)?"":e,children:this.renderInputs()})}}]),a}(n.Component);ye.defaultProps={numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1};var ge=ye,Ne=function(e){var t=e.onChange,a=e.otpValue,n=e.length,r=e.errorMessage;return Object(Y.jsxs)("div",{className:"otp",children:[Object(Y.jsx)(ge,{isInputNum:!0,value:a,onChange:function(e){t(e)},numInputs:n,hasErrored:(null===r||void 0===r?void 0:r.length)>0,placeholder:!1,containerStyle:{fontSize:"16px",color:"black"},inputStyle:{width:42,height:48,border:"1px solid #E5E5EB",marginRight:16,borderRadius:"7px",fontWeight:400,fontSize:"18px",lineHeight:"28px"},focusStyle:{outline:"none",border:"1px solid #9C9CAF",color:"#14142B"},errorStyle:{border:"1px solid #E64C4C",color:"#E64C4C"},shouldAutoFocus:!0}),r&&Object(Y.jsx)(ie,{className:"text-xs font-light text-error mt-1",children:r})]})},Ce=a(187),Se=function(e){var t=e.handleLogin,a=e.loginDetails,r=e.editMobile,c=e.resendOtp,i=e.error,o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(30),m=Object(s.a)(b,2),p=m[0],j=m[1];Object(n.useCallback)((function(){return j((function(e){return e-1}))}),[]);return Object(Y.jsx)("div",{className:"md:min-h-screen bg-white flex items-center px-6 py-14 lg:pl-20 lg:pr-30",children:Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(u)},children:[Object(Y.jsxs)(ce,{type:"h4",className:"mb-2 md:mb-8 font-medium",children:["Enter Your PIN "," ",Object(Y.jsx)("span",{className:"font-bold",children:"".concat(a.mobileNumber)}),Object(Y.jsx)("span",{className:"ml-1",children:Object(Y.jsx)(Ce.a,{onClick:r})})]}),Object(Y.jsx)(Ne,{onChange:d,otpValue:u,length:4,errorMessage:i}),p>0&&Object(Y.jsx)(ie,{className:"my-8 md:my-11 text-sm text-gray-600 font-light"}),0==p&&Object(Y.jsx)("div",{onClick:function(){p||j(30),c()},children:Object(Y.jsx)(ie,{className:"text-primary-900 my-8 md:my-11 cursor-pointer",children:"Send the code again"})}),Object(Y.jsx)(be,{variant:"primaryBtn",fontWeight:"font-bold",btnClass:"w-full",disabled:4!=u.length,type:"submit",children:"Submit"})]})})},Ie=function(e){Object(ae.a)(e);var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({step:1,mobileNumber:""}),o=Object(s.a)(i,2),l=o[0],u=o[1],d=function(){var e=Object(j.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.mobileNumber);case 2:(a=e.sent).data.status?(u({step:2,mobileNumber:t.mobileNumber}),c([])):c(a.data.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!=t.length){e.next=6;break}return e.next=3,D(l.mobileNumber,t,l.countryCode);case 3:a=e.sent,console.log(a),a.data.status?(n={id:a.data.entity.id,token:a.data.entity.token},C.set("AUTH",JSON.stringify(n),{path:"/"}),window.location.reload(!1)):c(a.data.message);case 6:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(l.mobileNumber);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){c([]),u((function(e){return Object(p.a)(Object(p.a)({},e),{},{step:1})}))};return Object(Y.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap",children:[Object(Y.jsx)("div",{className:"w-full md:w-55/100 shrink-0",children:Object(Y.jsx)(le,{})}),Object(Y.jsx)("div",{className:"w-full md:w-45/100",children:function(){switch(l.step){case 1:return Object(Y.jsx)(me,{onSubmit:d,loginDetails:l,apierror:r,defaultValues:{mobileNumber:l.mobileNumber}});case 2:return Object(Y.jsx)(Se,{handleLogin:b,loginDetails:l,editMobile:h,resendOtp:m,error:r})}}()})]})},we=a(318),Ee=a(319),Te=a(320),ke=a(321),De=function(e){var t=e.tableData,a=e.invalidHeader,r=e.setHasErrors,c=e.setRecord,i=e.record,o=[{title:"ROW INDEX",dataIndex:"index",key:"index",width:"150px",render:function(e){return Object(Y.jsx)("div",{className:"flex flex-col",children:Object(Y.jsx)("label",{className:"font-semibold",children:e+2},e+2)},e+2)}},{title:"REASON",dataIndex:"reason",key:"reason",render:function(e,t){var a=e.map((function(e,t){return Object(Y.jsx)("li",{children:e},t)}));return Object(Y.jsx)("ul",{children:a},t.index+2)}}];return Object(n.useEffect)((function(){!function(){var e=0;c(e),t.map((function(t){t.reason.length&&(e+=1)})),c(e),e||a.length||r(!1)}()}),[i]),Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"flex-col pb-5",children:[Object(Y.jsx)("label",{className:"font text-md",children:"The following data is invalid. Please correct them and upload again."}),Object(Y.jsx)("ul",{className:"pl-2 text-red-800",children:a.length?a.map((function(e,t){return Object(Y.jsxs)("li",{children:["Invalid Header : ",e.invalidColumn]},t)})):""}),Object(Y.jsx)("label",{className:"font text-md",children:"Correct the errors and upload again."})]}),Object(Y.jsx)(y.a,{dataSource:t,columns:o,bordered:!0,pagination:{}})]})},Ae=function(e){var t=e.cardClass,a=void 0===t?"":t,n=e.cardWidth,r=void 0===n?"":n,c=e.cardBg,i=void 0===c?"bg-white":c,o=e.cardBorder,s=void 0===o?"border":o,l=e.cardBorderColor,u=void 0===l?"border-gray-200":l,d=e.cardRadius,b=void 0===d?"rounded-2xl":d,m=e.cardPadding,p=void 0===m?"":m,j=e.cardShadow,h=void 0===j?"":j,f=e.children,O=e.cardHeight,v=void 0===O?"":O,x=e.onClick;return Object(Y.jsx)("div",{className:"".concat(r," ").concat(v," ").concat(i," ").concat(s," ").concat(u," ").concat(b," ").concat(p," ").concat(h," ").concat(a," "),onClick:x,children:f})},Me=a(315),Re=a(316),Ve=a(91),Be=a(3),Fe=function(e){var t=e.acceptedFile,a=e.onValidate,n=e.resetUploadedCsv,r=e.setCsvArray,c=e.onCancel,i=e.setCsvErrors,o=e.setHasErrors,s=e.dataKeysMap,l=(e.validateButtonRef,Object(Ve.c)().readString),u=s,d=function(e){if(0===e.length||e.length>0&&0===Object.keys(e[0]).length)return alert("Error!! Empty Csv file upload!"),null;var t=[],a=[];return Object.keys(e[0]).forEach((function(e){u[e]||t.push({invalidColumn:e})})),t.length?console.log("invalidHeaders",t):(a=function(e,t){return t.map((function(t){return Object.keys(t).reduce((function(a,n){return Object(p.a)(Object(p.a)({},a),Object(Be.a)({},e[n]||n,t[n]))}),{})}))}(u,e),r(a)),{newCsv:a,invalidHeaders:t}},b=function(){r(null),i([]),o(!1),function(e){if(null===t)return alert("Error !! Empty Csv file upload!"),n(),[];e()}((function(){console.log("acceptedFile",t),l(t,{worker:!0,header:!0,skipEmptyLines:!0,complete:function(e){var t=d(e.data);if(console.log("results.data",e.data),t){var n=Object(p.a)({},t),r=n.newCsv,i=n.invalidHeaders;a({newCsv:r,invalidHeaders:i})}else c()}})}))};return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsxs)("div",{className:"flex justify-end items-center mt-5",children:[Object(Y.jsx)(be,{type:"button",variant:"outlineBtn",btnClass:"text-sm font-normal py-3 px-6",onClick:function(){return c()},children:"Cancel"}),Object(Y.jsx)(be,{type:"submit",variant:"primaryBtn",btnClass:"text-sm font-normal ml-2 py-3 px-8",onClick:function(){return b()},children:"Save"})]})})},Pe=function(e){var t=e.validateBulkCreation,a=e.onCancel,c=e.hasErrors,i=e.setHasErrors,o=(e.csvErrors,e.setCsvErrors),l=e.csvArray,u=e.setCsvArray,d=e.validateButtonRef,b=(e.invalidHeader,e.setInvalidHeader),m=e.record,h=e.setRecord,O=e.dataKeysMap,v=Object(Ve.b)().CSVReader,x=r.a.useRef(),y=Object(n.useState)(null),g=Object(s.a)(y,2),N=g[0],C=g[1],S=function(){var e=Object(j.a)(f.a.mark((function e(a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.newCsv,r=a.invalidHeaders,h(!1),n||I(),t(n,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e;a(),null===(e=x.current)||void 0===e||e.click()};return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)("div",{className:"",children:Object(Y.jsx)(v,{onUploadAccepted:function(e){C(e),i(!1),u(null)},children:function(e){var t=e.getRootProps,n=e.acceptedFile,r=(e.ProgressBar,e.getRemoveFileProps),s=Object(Y.jsx)("div",{className:"absolute group-hover:flex hidden w-53.5 h-25  top-0 left-0 items-center justify-center before:w-full before:h-full before:left-0 before:bg-black before:opacity-70",children:Object(Y.jsx)("div",Object(p.a)(Object(p.a)({ref:x,className:"absolute cursor-pointer "},r()),{},{children:Object(Y.jsx)(Me.a,{})}))});return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"relative w-53.5 h-25 mb-2 cursor-pointer",children:Object(Y.jsxs)("div",Object(p.a)(Object(p.a)({},t()),{},{children:[Object(Y.jsx)("input",{className:"shadow hidden appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),Object(Y.jsxs)("div",{className:"p-2 border border-dashed bg-gray-100 border-gray-300 w-53.5 h-25 flex items-center justify-center",children:[!n&&Object(Y.jsxs)("div",{className:"text-center",children:[Object(Y.jsx)(Re.a,{}),Object(Y.jsxs)(ie,{children:["Drag the file or ",Object(Y.jsx)("span",{className:"text-info ",children:"Browse"})]})]}),n&&Object(Y.jsxs)("div",{className:"relative w-53.5 h-25 align-middle mb-6 group flex items-center justify-center",children:[n.name,s]},n.name)]})]}))}),Object(Y.jsx)(Fe,{csvFileData:N,acceptedFile:n,onValidate:S,getRemoveFileProps:r,resetUploadedCsv:I,setCsvArray:u,setInvalidHeader:b,onCancel:a,setCsvErrors:o,setHasErrors:i,dataKeysMap:O,validateButtonRef:d}),Object(Y.jsx)("div",{className:"pb-5",children:l&&(c?Object(Y.jsxs)("label",{className:"font text-md text-red-800 ",children:[m," records needs correction. "]}):Object(Y.jsx)("label",{className:"font text-md ",children:" All records are valid. "}))})]})}})})})};function Ue(e){var t=e.sampleData,a=(e.fileName,e.children),n=e.page,r=Object(Ve.a)(),c=r.CSVDownloader,i=r.Type;return Object(Y.jsx)(c,{variant:"Link",type:i.Button,filename:"".concat(n,"-sample-file"),bom:!0,config:{delimiter:","},data:t,children:a})}var Le=function(e){var t=e.headingChildren,a=e.textChildren,n=e.getIcon,r=e.onIconClick,c=e.headingStyle,i=void 0===c?"":c;return Object(Y.jsxs)("div",{className:"flex items-center ".concat(r?"cursor-pointer":""),onClick:r,children:[Object(Y.jsx)("div",{className:"flex shrink-0 mr-2",children:n()}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(ce,{type:"h4",className:"leading-8 ".concat(i),children:t}),a&&Object(Y.jsx)(ie,{className:"text-sm font-light text-gray-500",children:a})]})]})},Ye=a(317),He=a(304),_e=a(303),qe=a(181),Ge=a(110),ze=a(306),Ke=["index"],We=["title","editable","children","dataIndex","record","handleSave","customerData","milk"],Je=r.a.createContext(null),Qe=function(e){e.index;var t=Object(ne.a)(e,Ke),a=_e.a.useForm(),n=Object(s.a)(a,1)[0];return Object(Y.jsx)(_e.a,{form:n,component:!1,children:Object(Y.jsx)(Je.Provider,{value:n,children:Object(Y.jsx)("tr",Object(p.a)({},t))})})},Xe=function(e){var t=e.title,a=e.editable,r=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,l=e.customerData,u=e.milk,d=Object(ne.a)(e,We),b=Object(n.useState)(!1),m=Object(s.a)(b,2),j=m[0],h=(m[1],Object(n.useRef)(null));Object(n.useContext)(Je);Object(n.useEffect)((function(){j&&h.current.focus()}),[j]);var f=function(e,t){var a={};if("categoryName"===c){var n="special"==l.type?u[t].normal.gstRate:u[t].gstRate;a={categoryName:u[t].name,categoryId:t,rate:u[t].rate,gstRate:n},void 0!=i.quantity&&(a.total=Math.round(parseFloat(a.rate)*parseFloat(i.quantity)*10)/10,a.totalWithTax=Math.round(10*(a.total+a.total*a.gstRate/100))/10)}"quantity"==c&&void 0!=i.rate&&((a={quantity:t}).total=Math.round(parseFloat(i.rate)*parseFloat(t)*10)/10,a.totalWithTax=Math.round(10*(a.total+a.total*i.gstRate/100))/10),o(Object(p.a)(Object(p.a)({},i),a))},O=r;return a&&(O="Total Amount"!=i.categoryName?Object(Y.jsx)(_e.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:"categoryName"!==c?Object(Y.jsx)(qe.a,{onChange:function(e){return f(0,e.target.value)}}):Object(Y.jsx)(Ge.a,{label:"Customer",editable:!0,showSearch:!0,optionFilterProp:"children",showArrow:!1,onChange:function(e){return f(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:Object.values(u).map((function(e,t){return Object(Y.jsx)(Option,{value:e.id,children:e.name},t)}))},"customerId")}):Object(Y.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:r})),Object(Y.jsx)("td",Object(p.a)(Object(p.a)({},d),{},{children:O}))},Ze=function(e){var t=e.setTransactions,a=e.customerData,r=e.transactions,c=e.milk,i=e.notEditable,o=e.invoiceDetails,l=Object(n.useState)([]),u=Object(s.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)(0),h=Object(s.a)(j,2),f=h[0],O=h[1];Object(n.useEffect)((function(){b(r)}),[r]);var v=function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})},x=[{title:"Item Name",dataIndex:"categoryName",width:"35%",editable:!i},{title:"Item Code",dataIndex:"itemCode",width:"15%",editable:!i},{title:"Rate",dataIndex:"rate",width:"10%",render:v},{title:"Quantity",dataIndex:"quantity",width:"10%",editable:!i},{title:"Total",dataIndex:"total",width:"20%",render:v}];i||x.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,t){return"Total Amount"!==t.categoryName&&d.length>=1?Object(Y.jsx)(ze.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var t=d.filter((function(t){return t.key!==e}));b(t)}(t.key)},children:Object(Y.jsx)("a",{children:"Delete"})}):null}});var g=function(e){var a=Object(m.a)(d),n=a.findIndex((function(t){return e.key===t.key})),r=a[n];a.splice(n,1,Object(p.a)(Object(p.a)({},r),e)),b(a),t(a)},N={body:{row:Qe,cell:Xe}},C=x.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{onCell:function(t,n){var r={},i=["Total Amount","Taxable Value","IGST","CGST"];return i.includes(t.categoryName)&&"categoryName"==e.dataIndex&&(r={colSpan:4}),!i.includes(t.categoryName)||"quantity"!=e.dataIndex&&"rate"!=e.dataIndex&&"itemCode"!=e.dataIndex||(r={colSpan:0}),e.editable?Object(p.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:g,customerData:a,milk:c},r):r}})})),S=2,I={key:f+S++,categoryName:"Taxable Value",total:o.taxableAmount,render:v},w={key:f+S++,categoryName:"IGST",total:o.igst},E={key:f+S++,categoryName:"CGST",total:o.cgst},T={key:f+S++,categoryName:"SGST",total:o.sgst},k={key:f+S++,categoryName:"Cess",total:o.cess},D={key:f+S++,categoryName:"Round Off",total:o.roundOff},A={key:f+S++,categoryName:"Total Amount",total:o.totalValue};return Object(Y.jsxs)("div",{children:[i?null:Object(Y.jsx)(z.a,{onClick:function(){var e={key:f,categoryName:"Select Item",rate:"0",quantity:"0",total:0,gstRate:0,totalWithTax:0};b([].concat(Object(m.a)(d),[e])),O(f+1)},type:"primary",style:{marginBottom:16},children:"Add a item"}),Object(Y.jsx)(y.a,{components:N,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:[].concat(Object(m.a)(d),[I,w,E,T,k,D,A]),columns:C,pagination:!1})]})},$e=O.a.Title,et=function(e){var t,a=e.visible,r=e.setVisible,c=e.invoiceId,i=Object(n.useState)({transactions:[]}),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)({}),b=Object(s.a)(d,2),m=(b[0],b[1],function(){var e=Object(j.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:r=e.sent,console.log(r),c=null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity.transactions.map((function(e){e.rate,e.quantity;return{itemCode:e.item.code,categoryName:e.item.name,rate:e.rate,quantity:e.quantity,total:e.rate*e.quantity}})),u(Object(p.a)(Object(p.a)({},null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity),{},{transactions:c}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(n.useEffect)(Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("calling",c),!c){e.next=4;break}return e.next=4,m(c);case 4:case"end":return e.stop()}}),e)}))),[c]),Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(He.a,{title:"Invoice Details",visible:a,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return r(!1)},footer:[],children:Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(v.a,{children:[Object(Y.jsx)(x.a,{span:18,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Customer Name : ",null===l||void 0===l||null===(t=l.customer)||void 0===t?void 0:t.name]})}),Object(Y.jsx)(x.a,{span:6,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Dated : ",L()(null===l||void 0===l?void 0:l.invoiceDate).format("DD-MM-YYYY")]})}),Object(Y.jsx)(x.a,{span:12,children:Object(Y.jsxs)($e,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Invoice Number : ",null===l||void 0===l?void 0:l.invoiceNumber]})})]}),Object(Y.jsx)(v.a,{children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(Ze,{customerData:l&&l.customerId&&(null===l||void 0===l?void 0:l.customer),transactions:l&&(null===l||void 0===l?void 0:l.transactions),milk:{},notEditable:!0,invoiceDetails:l})})})]})})})},tt=[{label:"Customer Code",name:"customerCode",type:"input",inputType:"text"},{label:"Customer Name",name:"customerName",type:"input",inputType:"text"},{label:"Receipt Date",name:"receiptDate",type:"input",inputType:"text"},{label:"Nature",name:"nature",type:"input",inputType:"text"},{label:"Receipt VIA",name:"via",inputType:"text",list:"customerType"},{label:"Invoice No.",name:"invoiceNumber",type:"input",inputType:"text"},{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Amount",name:"amount",inputType:"number",list:"customerType"}],at=O.a.Title,nt=function(e){var t=e.page,a=e.reload,r=Object(n.useState)(null),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),d=(u[0],u[1],Object(n.useState)(null)),b=Object(s.a)(d,2),m=(b[0],b[1],Object(n.useState)(!1)),h=Object(s.a)(m,2),g=h[0],N=h[1],C=Object(n.useState)(null),S=Object(s.a)(C,2),I=S[0],w=S[1],E=Object(n.useState)(1),T=Object(s.a)(E,2),k=T[0],D=T[1],A=Object(n.useState)(10),M=Object(s.a)(A,2),V=M[0],B=M[1],U=Object(n.useState)(0),H=Object(s.a)(U,2),_=H[0],q=H[1],G=function(){var e=Object(j.a)(f.a.mark((function e(){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="receipts"==t||"payments"==t?F:R,e.next=3,r(t,"",(k-1)*V,V);case 3:c=e.sent,console.log(c),o(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.entity.rows.map((function(e){var a,n,r;return Object(p.a)(Object(p.a)({},e),{},{invoiceNumber:"receipts"==t||"payments"==t?null===(a=e.invoice)||void 0===a?void 0:a.invoiceNumber:e.invoiceNumber,customerName:null===(n=e.customer)||void 0===n?void 0:n.name,customerCode:null===(r=e.customer)||void 0===r?void 0:r.code,invoiceDate:e.invoiceDate?L()(e.invoiceDate).format("DD-MM-YYYY"):null,companyName:e.company.name,division:e.company.division,receiptDate:e.receiptDate?L()(e.receiptDate).format("DD-MM-YYYY"):null})}))),q(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.entity.count);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){G()}),[t,k,V,a]);for(var z=function(e){return"invoiceNumber"==e.name?{render:function(e,a){var n,r="receipts"==t||"payments"==t?null===(n=a.invoice)||void 0===n?void 0:n.id:a.id;return Object(Y.jsx)("div",{children:Object(Y.jsx)("a",{onClick:function(){return function(e){w(e),N(!0)}(r)},className:"underline text-blue-900",children:e})})}}:"number"===e.inputType?{render:function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}},K=function(e){return"purchase"!=t&&"payments"!=t||"customerName"!=e.name&&"customerCode"!=e.name?"payments"!=t||"receiptDate"!=e.name&&"via"!=e.name?e.label:e.label.replace("Receipt","Payment"):e.label.replace("Customer","Vendor")},W=("receipts"==t||"payments"==t?tt:P).map((function(e){return Object(p.a)({title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:K(e)}),dataIndex:e.name,key:e.name,width:"150px"},z(e))})),J=[10,20,50,100],Q=[];J.length>0&&J[0]<_;)Q.push(J[0]+""),J.shift();_>10&&Q.push(_+"");return Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsx)(at,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"sales"===t?"Sale Invoices":"purchases"===t?"Purchase Invoices":"receipts"===t?"Receipts":"payments"===t?"Payments":void 0}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:i,columns:W,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:Q,ocurrent:k,pageSize:V,onChange:function(e){D(e)},onShowSizeChange:function(e,t){B(t),D(1)},total:_,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(Y.jsx)(et,{visible:g,setVisible:N,invoiceId:I})]})})},rt=function(e){var t=e.page,a=Object(n.useState)(null),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)([]),l=Object(s.a)(o,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(s.a)(m,2),h=p[0],O=p[1],v=Object(n.useState)([]),x=Object(s.a)(v,2),y=x[0],g=x[1],N=Object(n.useState)(null),C=Object(s.a)(N,2),S=C[0],I=C[1],w=Object(n.useState)(!1),E=Object(s.a)(w,2),T=E[0],k=E[1],D=Object(n.useState)(!1),R=Object(s.a)(D,2),V=(R[0],R[1]),B=Object(n.useRef)(null);Object(n.useEffect)((function(){F()}),[t]),Object(n.useEffect)((function(){O(!0)}),[u]);var F=function(){V(!1),i(null),d([]),O(!1),g([]),I(null)},P=function(){var e=Object(j.a)(f.a.mark((function e(a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,"csvData"),n="receipts"==t||"payments"==t?M:A,e.next=4,n(a,t);case 4:r=e.sent,console.log(r,"res"),r.data.status&&(r.data.entity.csvErrorArray?d(r.data.entity.csvErrorArray):(d([]),k(!0)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.length>0?g(a):P(t);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=ct(t);return Object(Y.jsxs)("div",{className:"scr",children:[Object(Y.jsx)(b.a,{style:{margin:"16px 0"},className:"text-4xl font-bold",children:Object(Y.jsx)(b.a.Item,{children:t.toUpperCase()})}),Object(Y.jsxs)(Ae,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:[Object(Y.jsxs)("div",{className:"w-2/5 py-8",children:[Object(Y.jsx)(Le,{getIcon:function(){return Object(Y.jsx)(Ye.a,{style:{fontSize:"450%"}})},headingChildren:"Bulk Upload",textChildren:"Upload the required file"}),Object(Y.jsxs)(ie,{className:"pl-14 pt-4",children:["To download a sample ",Object(Y.jsx)("b",{children:t})," file"," ",Object(Y.jsx)(Ue,{page:t,sampleData:[L],fileName:"sample-file",children:Object(Y.jsx)("div",{variant:"Link",className:"text-primary-500 font-semibold text-sm mt-2",children:"Click here"})})]})]}),Object(Y.jsx)("div",{className:"w-3/5 pl-25 py-8 mt-12",children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)(ue,{fontWeight:"font-normal",children:"Upload File"}),Object(Y.jsx)(Pe,{validateBulkCreation:U,handleBulkCreation:P,hasErrors:h,setHasErrors:O,csvErrors:u,setCsvErrors:d,csvArray:c,setCsvArray:i,onCancel:F,validateButtonRef:B,invalidHeader:y,setInvalidHeader:g,record:S,setRecord:I,dataKeysMap:L})]})})]}),h&&Object(Y.jsx)(Ae,{cardClass:"mt-6 mb-4 flex",cardPadding:"px-6",children:Object(Y.jsx)("div",{className:"w-full",children:Object(Y.jsx)(De,{tableData:u,invalidHeader:y,setHasErrors:O,hasErrors:h,setRecord:I,record:S})})}),Object(Y.jsx)(nt,{page:t,reload:T})]})},ct=function(e){return"sales"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"purchase"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","GST NUMBER":"gstNumber",DATE:"invoiceDate","INVOICE NUMBER":"invoiceNumber",QUANTITY:"quantity",UOM:"uom","ITEM CODE":"itemCode","ITEM NAME":"itemName","ITEM VALUE":"rate","LABOUR CHARGES":"labourCharges","CLAIM AMOUNT":"claimAmount","TAXABLE VALUE":"taxableAmount",IGST:"igst",CGST:"cgst",SGST:"sgst",CESS:"cess","ROUND OFF":"roundOff",TCS:"tcs","TOTAL VALUE":"totalValue"}:"receipts"==e?{COMPANY:"companyName",DIVISION:"division","CUSTOMER NAME":"customerName","CUSTOMER CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","RECEIPT VIA":"via",AMOUNT:"amount","RECEIPT DATE":"receiptDate"}:"payments"==e?{COMPANY:"companyName",DIVISION:"division","VENDOR NAME":"customerName","VENDOR CODE":"customerCode","INVOICE NUMBER":"invoiceNumber",NATURE:"nature","PAID VIA":"via",AMOUNT:"amount","PAYMENT DATE":"receiptDate"}:void 0},it=[{label:"Company",name:"companyName",type:"input",inputType:"text"},{label:"Division",name:"division",type:"input",inputType:"text"},{label:"Total Collection",name:"toatalCollection",inputType:"number",list:"customerType"},{label:"Total Payment",name:"toatlPayment",inputType:"number",list:"customerType"},{label:"Fund Available",name:"fundAvailable",inputType:"number",list:"customerType"}],ot=O.a.Title,st=function(e){e.page;var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(L()().format("YYYY-MM-DD")),b=Object(s.a)(d,2),m=b[0],h=b[1],g=Object(n.useState)(L()().format("YYYY-MM")),N=Object(s.a)(g,2),C=N[0],S=N[1],I=function(e,t){for(var a={},n=0;n<e.length;n++){var r=e[n];a[r.company_id]||(a[r.company_id]={id:r.company_id,companyName:r.name,division:r.division,fundAvailable:0});var c=a[r.company_id];"receipts"==r.type&&(c.toatalCollection="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year),"payments"==r.type&&(c.toatlPayment="date"==t?r.total_amount_for_date:r.total_amount_for_month_and_year)}return Object.values(a)},w=function(){var e=Object(j.a)(f.a.mark((function e(t){var a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,m,C.split("-")[1],C.split("-")[0]);case 2:n=e.sent,console.log(n),r=null===(a=n.data)||void 0===a?void 0:a.entity,"date"==t?c(Object.values(I(r,t))):u(Object.values(I(r,t)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){w("date")}),[m]),Object(n.useEffect)((function(){w("month")}),[C]);var E=it.map((function(e){return Object(p.a)({title:Object(Y.jsx)(O.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"},function(e){return"number"===e.inputType?{render:function(e,t){return Object(Y.jsx)("div",{children:e?e.toLocaleString("en-IN"):e})}}:{}}(e))}));return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(ot,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["As on ",Object(Y.jsx)("input",{type:"date",onChange:function(e){return h(e.target.value)},value:m})]}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:r,columns:E,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]}),Object(Y.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(Y.jsxs)(ot,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Month Report ",Object(Y.jsx)("input",{type:"month",onChange:function(e){return S(e.target.value)},value:C})]}),Object(Y.jsx)(v.a,{className:"w-full",children:Object(Y.jsx)(x.a,{span:24,children:Object(Y.jsx)(y.a,{dataSource:l,columns:E,bordered:!0,pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},lt=u.a.Header,ut=u.a.Content,dt=(u.a.Footer,u.a.Sider),bt=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1];if(!S())return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(Ie,{})});return Object(Y.jsxs)(u.a,{className:"h-screen",children:[Object(Y.jsx)(dt,{collapsible:!0,collapsed:a,onCollapse:function(e){return r(e)},children:Object(Y.jsx)(te,{collapsed:a})}),Object(Y.jsxs)(u.a,{className:"site-layout",children:[Object(Y.jsx)(lt,{className:"site-layout-background",style:{padding:0},children:Object(Y.jsxs)(d.a,{mode:"horizontal",style:{float:"right",width:"auto"},children:[Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(we.a,{})},"notification"),Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(Ee.a,{})},"mail"),Object(Y.jsx)(d.a.SubMenu,{icon:Object(Y.jsx)(Te.a,{}),children:Object(Y.jsx)(d.a.Item,{icon:Object(Y.jsx)(ke.a,{}),onClick:function(){C.remove("AUTH",{path:"/"}),window.location.reload(!1)},children:"Sign Out"},"logout")},"profile")]})}),Object(Y.jsx)(ut,{style:{margin:"0 16px"},children:Object(Y.jsx)("div",{style:{padding:10,height:"calc(100vh - 90px)",overflowY:"auto"},children:Object(Y.jsxs)(l.c,{children:[Object(Y.jsx)(l.a,{exact:!0,path:"/",children:Object(Y.jsx)(st,{})}),Object(Y.jsx)(l.a,{exact:!0,path:"/sales-reports",children:Object(Y.jsx)(G,{page:"sales"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/purchase-reports",children:Object(Y.jsx)(G,{page:"purchase"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/sales",children:Object(Y.jsx)(rt,{page:"sales"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/purchases",children:Object(Y.jsx)(rt,{page:"purchase"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/receipts",children:Object(Y.jsx)(rt,{page:"receipts"})}),Object(Y.jsx)(l.a,{exact:!0,path:"/payments",children:Object(Y.jsx)(rt,{page:"payments"})})]})})})]})]})};i.a.render(Object(Y.jsx)(r.a.StrictMode,{children:Object(Y.jsx)(o.a,{children:Object(Y.jsx)(bt,{})})}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.73859fbd.chunk.js.map